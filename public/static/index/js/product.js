/*! 2016 Baidu Inc. All Rights Reserved */
define("comm",["require"],function(require){var exports={};return exports.fetch=function(t,e,i){var n={type:"GET",dataType:"json",contentType:"application/json",cache:!1,timeout:5e3};return e=e||{},i=i||{},i=$.extend({url:t,data:e},n,i),$.ajax(i)},exports.post=function(t,e,i){return i=i||{},$.extend(i,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8"}),this.fetch(t,e,i)},exports.ajaxPost=function(t,e,i){return i=i||{},$.extend(i,{type:"POST"}),this.fetch(t,$.stringifyJSON(e),i)},exports.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);if(null!=i)return encodeURIComponent(i[2]);else return null},exports.gernerateTime=function(t){var e={};if(t>0){e.day=Math.floor(t/86400);var i=86400*e.day,n="00"+Math.floor((t-i)/3600);e.hour=n.substring(n.length-2);var r=3600*e.hour;n="00"+Math.floor((t-i-r)/60),e.min=n.substring(n.length-2),n="00"+(t-i-r-60*e.min),e.sec=n.substring(n.length-2)}else e.day=0,e.hour=0,e.min=0,e.sec=0;return e},exports.countDown=function(t){var e,i=Math.round((new Date).getTime()/1e3),n=0;if(arguments.length>1)e=i-n-arguments[1];else e=t-i-n;return exports.gernerateTime(e)},exports.timeInterval=function(t,e){e=Math.round((e||(new Date).getTime())/1e3);var i=t-e;return exports.gernerateTime(i)},exports.notEmpty=function(t,e){function i(t,e){var n=e.length,r=e.shift();if(t[r])if(1===n)return!0;else return i(t[r],e);return!1}if("string"!=typeof e||!t instanceof Object)return!1;var n=e.split(".");return i(t,n)},exports.locationJump=function(t,e){var i=this,n=i.getUrlParam("tg"),r=t,o="tr=cp."+pageId+"_pr."+cr+(e?"_po."+e:"");if(n&&t.indexOf("tg=")<0)if(~r.indexOf("?"))r=r+"&tg="+n;else r=r+"?tg="+n;try{if(~t.indexOf("tr="))r=r.replace(/tr=\d+/,o);else if(~r.indexOf("?"))r=r+"&"+o;else r=r+"?"+o}catch(s){}return r},exports.replaceEnter=function(t){if("string"==typeof t)return t.replace(/((\r\n\s*)|\n\s*|\r\s*)+/g,"<br>");else return t},exports.inherit=function(t,e,i){function n(){}var r=t.prototype;n.prototype=r;var o=function(){t.apply(this,arguments)};return o.prototype=new n,$.extend(o.prototype,e),$.extend(o,t,i),o.prototype.constructor=o,o},exports}),function(t){function e(t){var e=v[t]={};return h(t.split(/\s+/),function(t){e[t]=!0}),e}var i={},n=Array.prototype,r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=n.forEach,l=n.indexOf,c=n.slice,h=function(t,e,n){var r,s,l;if(t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length){for(s=0,l=t.length;l>s;s++)if(s in t&&e.call(n,t[s],s,t)===i)return}else for(r in t)if(o.call(t,r))if(e.call(n,t[r],r,t)===i)return},d=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},u=function(t){return h(c.call(arguments,1),function(e){var i;for(i in e)if(void 0!==e[i])t[i]=e[i]}),t},f=function(t,e,i){var n;if(e){if(l)return l.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},p={};h("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){p["[object "+t+"]"]=t.toLowerCase()});var m=function(t){return null==t?String(t):p[s.call(t)]||"object"},g={},v={};if(g.Callbacks=function(t){t="string"==typeof t?v[t]||e(t):u({},t);var i,n,r,o,s,a,l=[],c=!t.once&&[],d=function(e){for(i=t.memory&&e,n=!0,a=o||0,o=0,s=l.length,r=!0;l&&s>a;a++)if(l[a].apply(e[0],e[1])===!1&&t.stopOnFalse){i=!1;break}if(r=!1,l)if(c){if(c.length)d(c.shift())}else if(i)l=[];else p.disable()},p={add:function(){if(l){var e=l.length;if(function n(e){h(e,function(e){var i=m(e);if("function"===i){if(!t.unique||!p.has(e))l.push(e)}else if(e&&e.length&&"string"!==i)n(e)})}(arguments),r)s=l.length;else if(i)o=e,d(i)}return this},remove:function(){if(l)h(arguments,function(t){for(var e;(e=f(t,l,e))>-1;)if(l.splice(e,1),r){if(s>=e)s--;if(a>=e)a--}});return this},has:function(t){return f(t,l)>-1},empty:function(){return l=[],this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){if(c=void 0,!i)p.disable();return this},locked:function(){return!c},fireWith:function(t,e){if(e=e||[],e=[t,e.slice?e.slice():e],l&&(!n||c))if(r)c.push(e);else d(e);return this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},g.Deferred=function(t){var e=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return g.Deferred(function(i){h(e,function(e,n){var o=e[0],s=t[n];r[e[1]](d(s)?function(){var t;try{t=s.apply(this,arguments)}catch(e){return void i.reject(e)}if(t&&d(t.promise))t.promise().done(i.resolve).fail(i.reject).progress(i.notify);else i["notify"!==o?"resolveWith":o+"With"](this===r?i:this,[t])}:i[o])}),t=null}).promise()},promise:function(t){return null!=t?u(t,n):n}},r={};if(n.pipe=n.then,h(e,function(t,o){var s=t[2],a=t[3];if(n[t[1]]=s.add,a)s.add(function(){i=a},e[1^o][2].disable,e[2][2].lock);r[t[0]]=s.fire,r[t[0]+"With"]=s.fireWith}),n.promise(r),t)t.call(r,r);return r},g.when=function(t){var e,i,n,r=0,o="array"===m(t)&&1===arguments.length?t:c.call(arguments),s=o.length,a=1!==s||t&&d(t.promise)?s:0,l=1===a?t:g.Deferred(),h=function(t,i,n){return function(r){if(i[t]=this,n[t]=arguments.length>1?c.call(arguments):r,n===e)l.notifyWith(i,n);else if(!--a)l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)if(o[r]&&d(o[r].promise))o[r].promise().done(h(r,n,o)).fail(l.reject).progress(h(r,i,e));else--a;if(!a)l.resolveWith(n,o);return l.promise()},"undefined"!=typeof module&&module.exports)module.exports=g;else if(define&&define.amd)define("common/underscore.deferred",[],g);else if("undefined"!=typeof t._)t._.mixin(g);else t._=g}(this),!function(t){if("function"==typeof define&&define.amd)define("common/cookie",[],t);else if("object"==typeof exports)module.exports=t();else{var e=window.Cookies,i=window.Cookies=t(window.jQuery);i.noConflict=function(){return window.Cookies=e,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,r,o){var s;if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(l){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}e||(s={});for(var c=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var u=c[d].split("="),f=u[0].replace(h,decodeURIComponent),p=u.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=i&&i(p,f)||p.replace(h,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(l){}if(e===f){s=p;break}e||(s[f]=p)}catch(l){}}return s}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e()}),define("common/passport",["require","./underscore.deferred","./cookie","../comm"],function(require){var t=require("./underscore.deferred"),e=require("./cookie"),i="http://"+location.host,n=location.href,r=GLOBAL_CONF.passport.tpl||"baidumall",o="http://"+GLOBAL_CONF.passport.host||"http://passport.baidu.com";passportConf={scriptLink:o+"/passApi/js/uni_login_wrapper.js?cdnversion=20150331",fillUserNameScriptLink:o+"/passApi/js/wrapper.js?cdnversion=20150506",fillUserNameCSSLink:o+"/passApi/html/css/fillUserName.css",staticPage:i+"/v3Jump.html",tpl:r,u:n,authsite:["qzone","tsina"],registerLink:o+"/v2/?reg&tpl="+r+"&u="+i,logoutLink:o+"/?logout&u="+n,settingLink:o};var s=null,a=require("../comm"),l={userInfo:null,init:function(){return a.fetch("/user/loginInfo").then(function(t){if(l.userInfo=null,t&&t.isLogin)l.userInfo={displayName:t.displayname},l.trigger("login",l.userInfo);else e.remove("mi");return l.userInfo}).fail(function(t){return e.remove("mi"),l.userInfo=null,t})},tryLogin:function(e){function i(){return s=s||window.passport.pop.init({apiOpt:{loginType:1,u:passportConf.u,safeFlag:0,staticPage:passportConf.staticPage,product:passportConf.tpl,memberPass:!0},cache:!1,authsite:passportConf.authsite,tangram:!0,registerLink:passportConf.registerLink,onLoginSuccess:function(t){s.hide(),t.returnValue=!1,l.userInfo={displayName:t.rsp.data.userName},r.resolve(l.userInfo),n.init()}}),s.show(),r}var n=this,r=new t.Deferred;if(this.userInfo&&!e)return r.resolve(this.userInfo);else return $.getScript(passportConf.scriptLink).then(i)},gotoRegisterPage:function(){window.open(passportConf.registerLink)},logout:function(){e.remove("mi"),e.remove("mi",{domain:".mall.baidu.com"}),e.remove("ms"),e.remove("ms",{domain:".mall.baidu.com"}),location.href="http://passport.baidu.com/?logout&u="+encodeURIComponent(location.href)},on:function(t,e,i){var n;if("function"!=typeof e||!t)return this;else return n=this._events||(this._events={}),n[t]=n[t]||[],n[t].push({context:i||this,callback:e}),this},trigger:function(t){var e,i=this._events;if(!i||!t||!i[t])return this;else return e=[].slice.call(arguments,1),$.each(i[t],function(t,i){i.callback.apply(i.context,e)}),this}};return l}),define("common/artDialog",["require"],function(require){var t=function(){function t(){this.destroyed=!1,this.__popup=$("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=$("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],e++}var e=0,i=!("minWidth"in $("html")[0].style),n=!i;return $.extend(t.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",show:function(e){if(this.destroyed)return this;var r=this.__popup,o=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,!this.__ready){if(r.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),!i)$(window).on("resize",$.proxy(this.reset,this));if(this.modal){var s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||t.zIndex};if(r.addClass(this.className+"-modal"),!n)$.extend(s,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"});o.css(s).attr({tabindex:"0"}).on("focus",$.proxy(this.focus,this)),this.__mask=o.clone(!0).attr("style","").insertAfter(r),o.addClass(this.className+"-backdrop").insertBefore(r),this.__ready=!0}if(!r.html())r.html(this.innerHTML)}return r.addClass(this.className+"-show").show(),o.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){if(!this.destroyed&&this.open){if(void 0!==t)this.returnValue=t;this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")}return this},remove:function(){if(this.destroyed)return this;if(this.__dispatchEvent("beforeremove"),t.current===this)t.current=null;if(this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),!i)$(window).off("resize",this.reset);this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var t=this.follow;if(t)this.__follow(t);else this.__center();return this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,i=this.__popup,n=t.current,r=this.zIndex=t.zIndex++;if(n&&n!==this)n.blur(!1);if(!$.contains(e,this.__getActive())){var o=i.find("[autofocus]")[0];if(!this._autofocus&&o)this._autofocus=!0;else o=e;this.__focus(o)}return i.css("zIndex",r),t.current=this,i.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];if(e!==!1)this.__focus(t);return this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var i=this.__getEventListener(t),n=0;n<i.length;n++)if(e===i[n])i.splice(n--,1);return this},__getEventListener:function(t){var e=this.__listener;if(!e)e=this.__listener={};if(!e[t])e[t]=[];return e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);if(this["on"+t])this["on"+t]();for(var i=0;i<e.length;i++)e[i].call(this)},__focus:function(t){try{if(this.autofocus&&!/^iframe$/i.test(t.nodeName))t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,i=e&&e.activeElement||t;return i}catch(n){}},__center:function(){var t=this.__popup,e=$(window),i=$(document),n=this.fixed,r=n?0:i.scrollLeft(),o=n?0:i.scrollTop(),s=e.width(),a=e.height(),l=t.width(),c=t.height(),h=(s-l)/2+r,d=382*(a-c)/1e3+o,u=t[0].style;u.left=Math.max(parseInt(h),r)+"px",u.top=Math.max(parseInt(d),o)+"px"},__follow:function(t){var e=t.parentNode&&$(t),i=this.__popup;if(this.__followSkin)i.removeClass(this.__followSkin);if(e){var n=e.offset();if(n.left*n.top<0)return this.__center()}var r=this,o=this.fixed,s=$(window),a=$(document),l=s.width(),c=s.height(),h=a.scrollLeft(),d=a.scrollTop(),u=i.width(),f=i.height(),p=e?e.outerWidth():0,m=e?e.outerHeight():0,g=this.__offset(t),v=g.left,y=g.top,_=o?v-h:v,b=o?y-d:y,x=o?0:h,w=o?0:d,T=x+l-u,S=w+c-f,C={},k=this.align.split(" "),E=this.className+"-",I={top:"bottom",bottom:"top",left:"right",right:"left"},L={top:"top",bottom:"top",left:"left",right:"left"},A=[{top:b-f,bottom:b+m,left:_-u,right:_+p},{top:b,bottom:b-f+m,left:_,right:_-u+p}],M={left:_+p/2-u/2,top:b+m/2-f/2},P={left:[x,T],top:[w,S]};if($.each(k,function(t,e){if(A[t][e]>P[L[e]][1])e=k[t]=I[e];if(A[t][e]<P[L[e]][0])k[t]=I[e]}),!k[1])L[k[1]]="left"===L[k[0]]?"top":"left",A[1][k[1]]=M[L[k[1]]];if(E+=k.join("-")+" "+this.className+"-follow",r.__followSkin=E,e)i.addClass(E);C[L[k[0]]]=parseInt(A[0][k[0]]),C[L[k[1]]]=parseInt(A[1][k[1]]),i.css(C)},__offset:function(t){var e=t.parentNode,i=e?$(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var n=t.ownerDocument,r=n.defaultView||n.parentWindow;if(r==window)return i;var o=r.frameElement,s=$(n),a=s.scrollLeft(),l=s.scrollTop(),c=$(o).offset(),h=c.left,d=c.top;return{left:i.left+h-a,top:i.top+d-l}}}),t.zIndex=1024,t.current=null,t}(),e={backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"",innerHTML:'<div i="dialog" class="ui-dialog-wrap"><table class="ui-dialog-grid"><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr></table></div>'},i=function(){var i=t,n=e,r=n.cssUri;if(r){var o=require[require.toUrl?"toUrl":"resolve"];if(o)if(r=o(r),r='<link rel="stylesheet" href="'+r+'" />',$("base")[0])$("base").before(r);else $("head").append(r)}var s=0,a=new Date-0,l=!("minWidth"in $("html")[0].style),c="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),h=!l&&!c,d=function(t,e,i){var n=t=t||{};if("string"==typeof t||1===t.nodeType)t={content:t,fixed:!c};t=$.extend(!0,{},d.defaults,t),t.original=n;var r=t.id=t.id||a+s,o=d.get(r);if(o)return o.focus();if(!h)t.fixed=!1;if(t.quickClose)t.modal=!0,t.backdropOpacity=0;if(!$.isArray(t.button))t.button=[];if(void 0!==i)t.cancel=i;if(t.cancel)t.button.push({id:"cancel",value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay});if(void 0!==e)t.ok=e;if(t.ok)t.button.push({id:"ok",value:t.okValue,callback:t.ok,autofocus:!0});return d.list[r]=new d.create(t)},u=function(){};u.prototype=i.prototype;var f=d.prototype=new u;return d.create=function(t){var e=this;$.extend(this,new i);var n=(t.original,$(this.node).html(t.innerHTML)),r=$(this.backdrop);if(this.options=t,this._popup=n,$.each(t,function(t,i){if("function"==typeof e[t])e[t](i);else e[t]=i}),t.zIndex)i.zIndex=t.zIndex;if(n.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(t){e._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose)r.on("onmousedown"in document?"mousedown":"click",function(){return e._trigger("cancel"),!1});return this.addEventListener("show",function(){r.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var n=t.target,r=n.nodeName,o=/^input|textarea$/i,s=i.current===e,a=t.keyCode;if(s&&(!o.test(r)||"button"===n.type))if(27===a)e._trigger("cancel")},$(document).on("keydown",this._esc),this.addEventListener("remove",function(){$(document).off("keydown",this._esc),delete d.list[this.id]}),s++,d.oncreate(this),this},d.create.prototype=f,$.extend(f,{content:function(t){var e=this._$("content");if("object"==typeof t)t=$(t),e.empty("").append(t.show()),this.addEventListener("beforeremove",function(){$("body").append(t.hide())});else e.html(t);return this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var e=this,i="",n=0;if(this.callbacks={},"string"==typeof t)i=t,n++;else $.each(t,function(t,r){var o=r.id=r.id||r.value,s="";if(e.callbacks[o]=r.callback,r.display===!1)s=' style="display:none"';else n++;i+='<button type="button" i-id="'+o+'"'+s+(r.disabled?" disabled":"")+(r.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+r.value+"</button>",e._$("button").on("click","[i-id="+o+"]",function(t){var i=$(this);if(!i.attr("disabled"))e._trigger(o);t.preventDefault()})});return this._$("button").html(i),this._$("footer")[n?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),d.oncreate=$.noop,d.getCurrent=function(){return i.current},d.get=function(t){return void 0===t?d.list:d.list[t]},d.list={},d.defaults=n,d}();return i}),define("widget/dialog",["require","../common/artDialog"],function(require){Function.prototype.before=function(t){var e=this;return function(){if(t.apply(this,arguments)===!1)return!1;else return e.apply(this,arguments)}},Function.prototype.after=function(t){var e=this;return function(){var i=e.apply(this,arguments);if(i===!1)return!1;else return t.apply(this,arguments),i}};var t=require("../common/artDialog"),e=function(e,i){var n,r,o,s;if(e=e||{},i=i||{},i.cancel=i.cancel||function(){},i.cancel=i.cancel.after(function(){_dialogObj=null}),n=$(i.tmpl(e)),i.content=n[0],r=t(i),r.close=r.close.after(function(){this.remove(),n.remove(),i.close&&i.close()}),e.time)s=e.time/1e3,$(".J_close_time").html(s),o=setInterval(function(){if($(".J_close_time").html(--s),0>=s)clearInterval(o),r.close()},1e3);return i.init&&i.init(n[0],e),n.on("click",".J_ok",function(t){if(t.preventDefault(),e.time)clearInterval(o);if(i.success)i.success(n[0],r);else r.close()}),n.on("click",".J_close",function(){if(e.time)clearInterval(o);setTimeout(function(){r.close(),i.cancel&&i.cancel()},0)}),r};return e}),define("../tpl/confirm.tpl",[],function(){return'<div class="confirm-dialog {{ if: ${dialogClass} }}${dialogClass}{{ /if }}">\n	<div class="confirm-wrap">\n		<a href="javascript:;" class="J_close close-btn">×</a>\n		{{ if : ${title} }}\n		<div class="confirm-title">\n			{{ if: !${noIcon} }}<span class="{{ if: ${success} }}success-icon{{else}}alert-icon{{ /if }} f-icon">{{ if: ${success} }}{{ else }}{{ /if }}</span>{{ /if }}${title}\n		</div>{{ /if }}\n		{{ if : ${content} }}\n		<div class="confirm-content">\n			${content | raw}\n			{{ if: ${moreContent} }}\n			{{ for: ${moreContent} as ${cont} }}\n				<p>${cont}</p>\n			{{ /for }}\n			{{ /if }}\n		</div>\n		{{ /if }}\n		<div class="confirm-btn">\n			{{ for: ${buttons} as ${button} }}<a href="{{ if: ${button.href} }}${button.href}{{ else }}javascript:;{{ /if }}" class="{{ if: ${button.cls} }} ${button.cls} {{ /if }} btn btn-confirm"  {{ if: ${button.data} }} data-bind="${button.data}" {{ /if }} target="{{if:${button.target}==\'_blank\'}}_blank{{elif:${button.target}==\'_top\'}}_top{{elif:${button.target}==\'_parent\'}}_parent{{else}}_self{{/if}}">{{ if: ${button.val} }} ${button.val}{{ /if }}</a>{{ /for }}\n        </div>\n	</div>\n	<div class="confirm-bg"></div>\n</div>\n'}),define("widget/confirmDialog",["require","exports","module","./dialog","../common/etpl","../../tpl/confirm.tpl"],function(require,exports,module){var t=require("./dialog"),e=require("../common/etpl"),i=require("../../tpl/confirm.tpl");e.config({commandOpen:"{{",commandClose:"}}",strip:!0}),i=e.compile(i);var n=function(e,n){return n=$.extend({fixed:!0,backdropOpacity:.5,tmpl:i},n),t(e,n)};return n}),define("../tpl/product/priceDl.tpl",[],function(){return'<dl class="clearfix price">\n	<dt class="price_title" >价格</dt>\n		<dd class="clearfix">\n		<span class="price_yuan">${priceYuan}</span>\n        <span class="price_int">${priceInt}</span>\n        <span class="price_des">${priceDes}</span>\n        {{if: ${isFlash} }}\n        <span class="price_flash_icon">闪购价</span>\n        {{/if}}\n        {{if: ${isTime} }}\n        <span class="price_time_icon">限时抢价</span>\n        {{/if}}\n        {{if: ${isCut} }}\n        <span class="price_cut_icon">${cutPart}折</span>\n        <span class="price_cut_yuan">${priceYuan}</span>\n        <span class="price_cut_money">${priceMoney}</span>\n        {{else}}\n        <span class="price_cut_yuan no-display">${priceYuan}</span>\n        <span class="price_cut_money no-display">${priceMoney}</span>\n        {{/if }}\n\n	</dd>\n</dl>\n'}),define("../tpl/product/marketDl.tpl",[],function(){return'<dl class="clearfix sales">\n<dt>促销</dt>\n<dd>\n    {{if: ${downNotNull} }}\n    <div class="post clearfix" data-marketid="${offOnDown.marketId}" data-shopid="${offOnDown.shopId}">\n        <span class="sales_icon">直减</span>\n        <span class="cut_number" title="${offOnDown.marketTitle}">${offOnDown.marketTitle}</span>\n    </div>\n    {{/if}}\n    {{if: ${offNotNull} }}\n        {{if: ${offOnlyOne} }}\n            <div class="cut-dd clearfix " data-marketid="${offOnFulls[0].marketId}" data-shopid="${offOnFulls[0].shopId}" >\n                <div class="cut-first-contain">\n                    <span class="sales_icon">满减</span>\n\n                    <span class="cut_number" title="${offOnFulls[0].marketTitle}">满${offOnFulls[0].fullAmount}减${offOnFulls[0].offAmount}</span>\n                </div>\n            </div>\n        {{else}}\n            <div class="cut-dd clearfix " data-marketid="${offOnFulls[0].marketId}" data-shopid="${offOnFulls[0].shopId}" >\n                <div class="cut-first-contain cut-has-more">\n                    <span class="sales_icon">满减</span>\n                    <span class="sales_dot">·</span>\n                    <span class="cut_number" title="${offOnFulls[0].marketTitle}">满${offOnFulls[0].fullAmount}减${offOnFulls[0].offAmount}</span>\n                </div>\n                <a class="open-up">详情<span>&gt;&gt;</span></a>\n            </div>\n\n            <ul class="cut-ul clearfix">\n            {{for: ${offOnFulls} as ${offItem}, ${index} }}\n                {{if: ${index} != 0 }}\n                    <li class="cut-list clearfix " data-marketid="${offItem.marketId}" data-shopid="${offItem.shopId}" >\n\n                            <span class="sales_dot">·</span>\n                            <span class="cut_number" title="${offItem.marketTitle}">满${offItem.fullAmount}减${offItem.offAmount}</span>\n                    </li>\n                {{/if}}\n            {{/for}}\n            </ul>\n        {{/if}}\n    {{/if}}\n\n\n\n    {{if: ${giftNotNull} }}\n        {{for: ${giftOnFulls} as ${giftItem}, ${index} }}\n            <div class="gift clearfix" data-marketid="${giftItem.marketId}" data-shopid="${giftItem.shopId}">\n                <span class="sales_icon">满赠</span>\n                {{for: ${giftItem.gifts} as ${giftSetItem}, ${index} }}\n                    {{if: ${giftSetItem.giftPic} }}\n                        <span class="gift_set" data-id="${giftSetItem.giftId}">\n                            <img class="gift_img" src="${giftSetItem.giftPic}"></img>\n                            <span class="gift_times">&times;</span>\n                            <span class="gift_number">${giftSetItem.giftNum}</span>\n                        </span>\n                    {{else}}\n                        <span class="gift_set" data-id="${giftSetItem.giftId}">\n                            <span class="gift_tit" title="${giftSetItem.giftTitle}">${giftSetItem.giftTitle}</span>\n                            <span class="gift_times">&times;</span>\n                            <span class="gift_number">${giftSetItem.giftNum}</span>\n                        </span>\n                    {{/if}}\n                {{/for}}\n            </div>\n\n        {{/for}}\n    {{/if}}\n\n    {{if: ${postNotNull} }}\n        <div class="post clearfix" data-marketid="${postFreeOnFull.marketId}" data-shopid="${postFreeOnFull.shopId}">\n            <span class="sales_icon">包邮</span>\n            <span class="cut_number" title="${postFreeOnFull.marketTitle}">{{if:${postFreeOnFull.type}==1 }}满${postFreeOnFull.fullAmount}免运费{{elif:${postFreeOnFull.type}==2}}免运费{{else}}购买指定活动商品免运费{{/if}}</span>\n        </div>\n    {{/if}}\n\n    {{if: ${couponsNotNull} }}\n        {{for: ${coupons} as ${couponsItem},${index} }}\n            {{if: ${couponsItem.isBind}==0 }}\n            <div class="coupons clearfix" data-code="${couponsItem.code}" id="${index}">\n                <span class="sales_icon">优惠券</span>\n                <span class="cut_number" data-code="${couponsItem.code}" title="${couponsItem.name}">{{if:${couponsItem.couponType}==1}}立减${couponsItem.offAmount}{{else}}满${couponsItem.fullAmount}减${couponsItem.offAmount}{{/if}}</span>\n                <a class="open-up">点击领取<span>&gt;&gt;</span></a>\n            </div>\n            {{else}}\n            <div class="coupons clearfix" data-code="${couponsItem.code}" id="${index}">\n                <span class="sales_icon">优惠券</span>\n                <span class="cut_number" data-code="${couponsItem.code}" title="${couponsItem.name}">{{if:${couponsItem.couponType}==1}}立减${couponsItem.offAmount}{{else}}满${couponsItem.fullAmount}减${couponsItem.offAmount}{{/if}}</span>\n                <a class="already-get">已领取</a>\n            </div>\n            {{/if}}\n        {{ /for }}\n\n    {{/if}}\n</dd>\n</dl>\n'}),define("../tpl/product/timeDl.tpl",[],function(){return'<dl class="clearfix time">\n        <dt>${timeDt}</dt>\n        <dd class="time_set clearfix">\n        <span class="time_icon icon-clock"></span>\n        <span class="time_number">\n                <span id="timeDay" class="day"></span>\n                <span id="timeHour" class="hour"></span>\n                <span id="timeMin" class="min"></span>\n                <span id="timeSec"class="sec"></span>\n        </span>\n        </dd>\n</dl>\n'}),define("../tpl/product/addrSelectBar.tpl",[],function(){return'<div class="address-wrap address-dialog" id="addressBox" data-id="${userAddressId}">\n	<div class="info address-area">\n		<ul class="clearfix address-select">\n			<li class="province select-list" data-id="${provinceId}" data-name="${provinceName}">\n			</li>\n			<li class="city select-list" data-id="${cityId}" data-pid="${provinceId}" data-name="${cityName}">\n			</li>\n			<li class="area select-list" data-id="${countyId}" data-pid="${cityId}" data-name="${countyName}">\n			</li>\n		</ul>\n	</div>\n</div>'}),define("../tpl/product/selectAddress.tpl",[],function(){return'<a class="select-text">\n	<span class="select-name">\n		{{ if: ${selectName} }}${selectName}{{ else }}请选择{{ if : ${type}=="1" }}省{{elif: ${type}=="2"}}市{{elif: ${type}=="3"}}区{{/if}}{{ /if }}</span><span class="arrow arrow-1"></span>\n</a>\n{{ if : ${type}=="1" }}\n<div class="address-option province-option">\n	<div class="province-wrap">\n		<dl>\n			{{ for : ${provinceArea} as ${areas} }}\n			<div class="clearfix">\n				<dt>${areas.name}：</dt>\n				<dd>\n					<ul class="clearfix">\n					{{ for : ${areas.provinceList} as ${province} }}\n						<li><a href="javascript:;" data-id="${province.id}" class="option-item" title="${province.name}">${province.name}</a></li>\n					{{ /for }}\n					</ul>\n				</dd>\n			</div>\n			{{ /for }}\n		</dl>\n	</div>\n</div>\n{{ elif : ${type}=="2" }}\n{{ if : ${childAreaList} && ${childAreaList.length} }}\n<div class="address-option city-option">\n	<div class="city-wrap">\n		<ul class="clearfix">\n			{{ for : ${childAreaList} as ${childArea} }}\n			<li><a href="javascript:;" data-id="${childArea.areaId}" class="option-item" title="${childArea.name}">${childArea.name}</a></li>\n			{{ /for }}\n		</ul>\n	</div>\n</div>\n{{ /if }}\n{{ elif : ${type}=="3" }}\n{{ if : ${childAreaList} && ${childAreaList.length} }}\n<div class="address-option area-option">\n	<div class="area-wrap">\n		<ul class="clearfix">\n			{{ for : ${childAreaList} as ${childArea} }}\n			<li><a href="javascript:;" data-id="${childArea.areaId}" class="option-item" title="${childArea.name}">${childArea.name}</a></li>\n			{{ /for }}\n		</ul>\n	</div>\n</div>\n{{ /if }}\n{{ else }}\n{{ if : ${childAreaList} && ${childAreaList.length} }}\n<div class="address-option town-option">\n	<div class="town-wrap">\n		<ul class="clearfix">\n			{{ for : ${childAreaList} as ${childArea} }}\n			<li><a href="javascript:;" data-id="${childArea.areaId}" class="option-item" title="${childArea.name}">${childArea.name}</a></li>\n			{{ /for }}\n		</ul>\n	</div>\n</div>\n{{ /if }}\n{{ /if }}'}),define("../tpl/product/productAddition.tpl",[],function(){return'	{{for : ${data.serviceGuarantee} as ${serviceItem}, ${index} }}\n		{{if: ${serviceItem.type}==2 }}\n			<li>\n				<a class="timely_delivery_btn">\n					<span class="timely_delivery_icon icon-plane2"></span>\n					<span class="timely_delivery_des">${serviceItem.name}</span>\n				</a>\n			</li>\n\n		{{elif: ${serviceItem.type}==1 }}\n			<li>\n				<a class="seven_days_return_btn">\n					<span class="seven_days_return_icon icon-seven-day"></span>\n					<span class="seven_days_return_des">${serviceItem.name}</span>\n				</a>\n			</li>\n\n		{{elif: ${serviceItem.type}==4 }}\n			<li>\n				<a class="genius_btn">\n					<span class="genius_icon icon-guarantee2"></span>\n					<span class="genius_des">${serviceItem.name}</span>\n				</a>\n			</li>\n\n		{{elif: ${serviceItem.type}==5 }}\n			<li>\n				<a class="waybill_peer_btn">\n					<span class="waybill_peer_icon icon-invoice"></span>\n					<span class="waybill_peer_des">${serviceItem.name}</span>\n				</a>\n			</li>\n\n		{{elif: ${serviceItem.type}==3 }}\n			<li>\n				<a class="shunfeng_shipping_btn">\n					<span class="shunfeng_shipping_icon icon-sf2"></span>\n					<span class="shunfeng_shipping_des">${serviceItem.name}</span>\n				</a>\n			</li>\n		{{elif: ${serviceItem.type}==6 }}\n			<li>\n				<a class="free_return_btn">\n					<span class="free_return_icon icon-no-worry-return" ></span>\n					<span class="free_return_des">${serviceItem.name}</span>\n				</a>\n			</li>\n		{{/if}}\n	{{/for}}\n';
}),define("../tpl/cateSide.tpl",[],function(){return'<div class="shop_list" id="shop_list">\n	<h3 class="tit">店内商品分类</h3>\n	<ul id="accordion" class="accordion">\n		{{for: ${categorySide} as ${categList} }}\n		<li>\n\n			<div class="link"><i class="cat-plus"></i>${categList.info}</div>\n			<ul class="submenu">\n				{{for: ${categList.list} as ${categItem} }}\n				<li><a>${categItem.item}</a></li>\n				{{ /for }}\n\n			</ul>\n		</li>\n		{{ /for }}\n	</ul>\n\n</div>\n'}),define("../tpl/recommendSide.tpl",[],function(){return'<div class="other_recommend" id="">\n	<h3 class="tit">买过的顾客还买过</h3>\n	\n	{{for: ${recommendSide} as ${recomItem} }}\n	<div class="recommend_item" id="${recomItem.id}">\n		<div class="recommend_img">\n			<a href="${recomItem.recomHref}">\n				<img class="transparent" alt="${recomItem.imgUrl}" src="${recomItem.imgUrl}">\n			</a>					\n		</div>\n		<div class="recommend_price">\n			<em class="price_yuan">￥</em>\n			<span class="price_int">${recomItem.price} </span>			\n			<em class="price_cut_yuan">￥</em>\n			<span class="price_cut_money">${recomItem.cut}</span>\n		</div>\n		<a href="${recomItem.recomHref}" class="recommend_name">${recomItem.recomName}</a>\n		<a href="${recomItem.recomHref}" class="recommend_shop">${recomItem.recomShop}</a>\n	</div>\n\n	{{ /for}}\n\n</div>'}),define("widget/addressSelector",["require","../comm","../common/etpl"],function(require){var t=require("../comm"),e=require("../common/etpl");e.config({commandOpen:"{{",commandClose:"}}",strip:!0});var i={getAreaList:"/address/getAreaList"},n=function(t,e,i){this.select=$(t),this.type=i,this.opts={},$.extend(this.opts,e),this.init()};return n.prototype={init:function(){var t=this.opts.optionData||{},e=this.select,i=e.attr("data-pid");if(t.type=this.type,i&&1!==this.type)this.renderSelect({selectName:this.opts.optionData.selectName},1);else this.renderSelect(t,1);this.bind()},hide:function(){if(this.select.next().length)this.select.removeClass("hover"),this.select.next().addClass("hover");return this},renderSelect:function(t,i){var n=e.compile(this.opts.optionData.template);if(t=t||{},t.type=this.type,t.first=i,this.select.html(n(t)),i&&4===this.type&&t.selectName)this.select.show();return!i&&this.select.attr("data-id","").attr("data-pid","").attr("data-name",""),this.select},update:function(e,n,r){var o=this;return t.fetch(i.getAreaList,{id:e}).then(function(t){if("0"===t.rtnCode){if(o.select.hasClass("town"))o.select.show();n&&$.extend(t.data,{selectName:n}),o.renderSelect(t.data,r),o.updateAddressHeight()}else o.opts.beforeSelect&&o.opts.beforeSelect(o)}),this},updateAddressHeight:function(){if($(".product_container .delivery").length>0){var t=this,e=$(".province-wrap").outerHeight();if(t.select.hasClass("province"))e=$(".province-wrap").outerHeight();if(t.select.hasClass("city"))e=$(".city-wrap").outerHeight();if(t.select.hasClass("area"))e=$(".area-wrap").outerHeight();$(".address-wrap .address-area").height(e+70)}},changeOptions:function(){if(this.select.next().length)this.select.removeClass("hover"),this.select.next().addClass("hover");else this.select.removeClass("hover");return this},bind:function(){var t=this,e=this.select;e.on("click",".select-text",function(){var i;if(e.siblings().removeClass("hover"),e.toggleClass("hover"),t.updateAddressHeight(),i=$(this).parents(".select-list").attr("data-pid"))$(this).parents(".select-list").attr("data-pid",""),t.update(i,$(this).text(),1);return!1}),e.on("click",".option-item",function(){var i=$(this).attr("data-id");return e.find(".select-name").html($(this).text()),e.attr("data-id",i).attr("data-name",$(this).text()),t.changeOptions(),t.opts.afterSelect&&t.opts.afterSelect(t,i),!1})}},n}),define("common/province",["require"],function(require){var t=[{name:"华北",provinceList:[{name:"北京市",id:3},{name:"河北省",id:25},{name:"内蒙古",id:22},{name:"山东省",id:8},{name:"山西省",id:10},{name:"天津市",id:14}]},{name:"华东",provinceList:[{name:"安徽省",id:23},{name:"江苏省",id:18},{name:"上海市",id:5},{name:"浙江省",id:29}]},{name:"华南",provinceList:[{name:"福建省",id:16},{name:"广西",id:17},{name:"海南省",id:21},{name:"广东省",id:7}]},{name:"华中",provinceList:[{name:"河南省",id:30},{name:"湖北省",id:15},{name:"湖南省",id:26},{name:"江西省",id:31}]},{name:"东北",provinceList:[{name:"黑龙江省",id:2},{name:"吉林省",id:9},{name:"辽宁省",id:19}]},{name:"西南",provinceList:[{name:"重庆市",id:4},{name:"贵州省",id:24},{name:"四川省",id:32},{name:"西藏",id:13},{name:"云南省",id:28}]},{name:"西北",provinceList:[{name:"甘肃省",id:6},{name:"宁夏",id:20},{name:"青海省",id:11},{name:"陕西省",id:27},{name:"新疆",id:12}]},{name:"港澳",provinceList:[{name:"香港",id:2910},{name:"澳门",id:2909}]}];return t}),define("common/localStorage",["require"],function(require){function t(){this._data=null,this._defExpires=null,this._file=null}function e(){this.getStore=function(t){if(window.localStorage)return localStorage.getItem(t.key);else return this.getItem(t)},this.setStore=function(t){if(t.value="string"==typeof t.value?t.value:JSON.stringify(t.value),window.localStorage)localStorage.setItem(t.key,t.value);else this.setItem(t)},this.removeStore=function(t){if(window.localStorage)if(t.clear)localStorage.clear();else localStorage.removeItem(t.key);else this.removeItem(t)}}t.prototype={setDefExpires:function(t){this._defExpires=t||365},setFile:function(t){this._file=t||window.location.hostname},init:function(){var t=this;try{t._data=document.createElement("input"),t._data.addBehavior("#default#userData"),document.body.appendChild(t._data)}catch(e){return!1}return!0},setItem:function(t){var e=this;if(e.init()){e.setDefExpires(t.expires);var i=new Date;i.setDate(i.getDate()+e._defExpires),e._data.expires=expires.toUTCString(),e.setFile(t.file),e._data.load(e._file),e._data.setAttribute(t.key,t.value),e._data.save(e._file)}},getItem:function(t){var e=this;if(e.init())return e.setFile(t.file),e._data.load(e._file),e._data.getAttribute(t.key);else return void 0},removeItem:function(t){var e=this;if(e.init())e.setFile(t.file),e._data.load(e._file),e._data.removeAttribute(t.key),e._data.save(e._file)}},e.prototype=new t;var i=new e;return i}),define("../tpl/product/mDoctorDl.tpl",[],function(){return'<div class="m_wraper">\n    {{if: ${dataList} && ${dataList.length} }}\n    <ul>\n        {{for: ${dataList} as ${item} }}\n        <li class="know-item">\n\n            <div class="title">\n                <i class="icon-plus"></i>\n                <i class="icon-minus"></i>\n                ${item.title}\n            </div>\n            <div class="content">\n                ${item.content | raw}\n            </div>\n\n        </li>\n        {{/for}}\n    </ul>\n    {{else}}\n    <div class="no-data">\n        暂无相关知识，我们会及时补充\n    </div>\n    {{/if}}\n\n</div>\n'}),define("../tpl/product/productComment.tpl",[],function(){return'<div>\n    <div class="score-container">\n        <div class="score-content">\n            <span class="num">${score}</span>\n            <div class="score-star score-star-${star}">\n            </div>\n            {{if: ${commentNum} > 5 }}\n            <div class="text">${commentNum}人评价过</div>\n            {{/if}}\n        </div>\n        <div class="desc">综合评价</div>\n    </div>\n    <div class="chart-container">\n        <div class="chart-content"></div>\n        <div class="chart-title">* 各项评价雷达图</div>\n    </div>\n</div>\n'}),define("../tpl/product/briefComment.tpl",[],function(){return'{{target: product-brief-comment }}\n\n<dt>商品评价</dt>\n<dd>\n    <div class="score-star score-star-${star}"></div>\n    {{if: ${score} }}\n    <span class="score">${score}</span>\n    {{/if}}\n    {{if: ${commentNum} > 5 }}\n    <i class="split"></i>\n    <span class="comment-count">${commentNum}人评价</span>\n    {{/if}}\n</dd>\n'}),define("widget/lazyload",[],function(){!function(t,e,i,n){var r=t(e);t.fn.lazyload=function(o){function s(){var e=0;l.each(function(){var i=t(this);if(!c.skip_invisible||i.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(!t.belowthefold(this,c)&&!t.rightoffold(this,c))i.trigger("appear"),e=0;else if(++e>c.failure_limit)return!1})}var a,l=this,c={threshold:100,failure_limit:0,event:"scroll",effect:"fadeIn",container:e,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};if(o){if(n!==o.failurelimit)o.failure_limit=o.failurelimit,delete o.failurelimit;if(n!==o.effectspeed)o.effect_speed=o.effectspeed,delete o.effectspeed;t.extend(c,o)}if(a=c.container===n||c.container===e?r:t(c.container),0===c.event.indexOf("scroll"))a.bind(c.event,function(){return s()});if(this.each(function(){var e=this,i=t(e);if(e.loaded=!1,i.attr("src")===n||i.attr("src")===!1)if(i.is("img"))i.attr("src",c.placeholder);if(i.one("appear",function(){if(!this.loaded){if(c.appear){var n=l.length;c.appear.call(e,n,c)}t("<img />").bind("load",function(){var n=i.attr("data-"+c.data_attribute);if(i.hide(),i.is("img"))i.attr("src",n);else i.css("background-image","url('"+n+"')");i[c.effect](c.effect_speed),e.loaded=!0;var r=t.grep(l,function(t){return!t.loaded});if(l=t(r),c.load){var o=l.length;c.load.call(e,o,c)}}).attr("src",i.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll"))i.bind(c.event,function(){if(!e.loaded)i.trigger("appear")})}),r.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion))r.bind("pageshow",function(e){if(e.originalEvent&&e.originalEvent.persisted)l.each(function(){t(this).trigger("appear")})});return t(i).ready(function(){s()}),this},t.belowthefold=function(i,o){var s;if(o.container===n||o.container===e)s=(e.innerHeight?e.innerHeight:r.height())+r.scrollTop();else s=t(o.container).offset().top+t(o.container).height();return s<=t(i).offset().top-o.threshold},t.rightoffold=function(i,o){var s;if(o.container===n||o.container===e)s=r.width()+r.scrollLeft();else s=t(o.container).offset().left+t(o.container).width();return s<=t(i).offset().left-o.threshold},t.abovethetop=function(i,o){var s;if(o.container===n||o.container===e)s=r.scrollTop();else s=t(o.container).offset().top;return s>=t(i).offset().top+o.threshold+t(i).height()},t.leftofbegin=function(i,o){var s;if(o.container===n||o.container===e)s=r.scrollLeft();else s=t(o.container).offset().left;return s>=t(i).offset().left+o.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document)}),define("widget/categorySide",["require"],function(require){var t=function(t){this.el=t||{};var e=this.el.find(".link");e.on("click",{el:this.el},this.dropdown)};return t.prototype.dropdown=function(t){var e=t.data.el,i=$(this),n=i.next();if(n.slideToggle(),i.parent().toggleClass("open"),i.parent().hasClass("open"))i.parent().find("i").removeClass("cat-plus").addClass("cat-minus");else i.parent().find("i").removeClass("cat-minus").addClass("cat-plus");e.find(".submenu").not(n).slideUp().parent().removeClass("open").find("i").removeClass("cat-minus").addClass("cat-plus")},t}),define("echarts/config",[],function(){var t={CHART_TYPE_LINE:"line",CHART_TYPE_BAR:"bar",CHART_TYPE_SCATTER:"scatter",CHART_TYPE_PIE:"pie",CHART_TYPE_RADAR:"radar",CHART_TYPE_VENN:"venn",CHART_TYPE_TREEMAP:"treemap",CHART_TYPE_TREE:"tree",CHART_TYPE_MAP:"map",CHART_TYPE_K:"k",CHART_TYPE_ISLAND:"island",CHART_TYPE_FORCE:"force",CHART_TYPE_CHORD:"chord",CHART_TYPE_GAUGE:"gauge",CHART_TYPE_FUNNEL:"funnel",CHART_TYPE_EVENTRIVER:"eventRiver",CHART_TYPE_WORDCLOUD:"wordCloud",CHART_TYPE_HEATMAP:"heatmap",COMPONENT_TYPE_TITLE:"title",COMPONENT_TYPE_LEGEND:"legend",COMPONENT_TYPE_DATARANGE:"dataRange",COMPONENT_TYPE_DATAVIEW:"dataView",COMPONENT_TYPE_DATAZOOM:"dataZoom",COMPONENT_TYPE_TOOLBOX:"toolbox",COMPONENT_TYPE_TOOLTIP:"tooltip",COMPONENT_TYPE_GRID:"grid",COMPONENT_TYPE_AXIS:"axis",COMPONENT_TYPE_POLAR:"polar",COMPONENT_TYPE_X_AXIS:"xAxis",COMPONENT_TYPE_Y_AXIS:"yAxis",COMPONENT_TYPE_AXIS_CATEGORY:"categoryAxis",COMPONENT_TYPE_AXIS_VALUE:"valueAxis",COMPONENT_TYPE_TIMELINE:"timeline",COMPONENT_TYPE_ROAMCONTROLLER:"roamController",backgroundColor:"rgba(0,0,0,0)",color:["#ff7f50","#87cefa","#da70d6","#32cd32","#6495ed","#ff69b4","#ba55d3","#cd5c5c","#ffa500","#40e0d0","#1e90ff","#ff6347","#7b68ee","#00fa9a","#ffd700","#6699FF","#ff6666","#3cb371","#b8860b","#30e0e0"],markPoint:{clickable:!0,symbol:"pin",symbolSize:10,large:!1,effect:{show:!1,loop:!0,period:15,type:"scale",scaleSize:2,bounceDistance:10},itemStyle:{normal:{borderWidth:2,label:{show:!0,position:"inside"}},emphasis:{label:{show:!0}}}},markLine:{clickable:!0,symbol:["circle","arrow"],symbolSize:[2,4],smoothness:.2,precision:2,effect:{show:!1,loop:!0,period:15,scaleSize:2},bundling:{enable:!1,maxTurningAngle:45},itemStyle:{normal:{borderWidth:1.5,label:{show:!0,position:"end"},lineStyle:{type:"dashed"}},emphasis:{label:{show:!1},lineStyle:{}}}},textStyle:{decoration:"none",fontFamily:"Arial, Verdana, sans-serif",fontFamily2:"微软雅黑",fontSize:12,fontStyle:"normal",fontWeight:"normal"},EVENT:{REFRESH:"refresh",RESTORE:"restore",RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",HOVER:"hover",MOUSEOUT:"mouseout",DATA_CHANGED:"dataChanged",DATA_ZOOM:"dataZoom",DATA_RANGE:"dataRange",DATA_RANGE_SELECTED:"dataRangeSelected",DATA_RANGE_HOVERLINK:"dataRangeHoverLink",LEGEND_SELECTED:"legendSelected",LEGEND_HOVERLINK:"legendHoverLink",MAP_SELECTED:"mapSelected",PIE_SELECTED:"pieSelected",MAGIC_TYPE_CHANGED:"magicTypeChanged",DATA_VIEW_CHANGED:"dataViewChanged",TIMELINE_CHANGED:"timelineChanged",MAP_ROAM:"mapRoam",FORCE_LAYOUT_END:"forceLayoutEnd",TOOLTIP_HOVER:"tooltipHover",TOOLTIP_IN_GRID:"tooltipInGrid",TOOLTIP_OUT_GRID:"tooltipOutGrid",ROAMCONTROLLER:"roamController"},DRAG_ENABLE_TIME:120,EFFECT_ZLEVEL:10,effectBlendAlpha:.95,symbolList:["circle","rectangle","triangle","diamond","emptyCircle","emptyRectangle","emptyTriangle","emptyDiamond"],loadingEffect:"spin",loadingText:"数据读取中...",noDataEffect:"bubble",noDataText:"暂无数据",calculable:!1,calculableColor:"rgba(255,165,0,0.6)",calculableHolderColor:"#ccc",nameConnector:" & ",valueConnector:": ",animation:!0,addDataAnimation:!0,animationThreshold:2e3,animationDuration:2e3,animationDurationUpdate:500,animationEasing:"ExponentialOut"};return t}),define("zrender/dep/excanvas",["require"],function(require){if(!document.createElement("canvas").getContext)!function(){function t(){return this.context_||(this.context_=new b(this))}function e(t,e,i){var n=B.call(arguments,2);return function(){return t.apply(e,n.concat(B.call(arguments)))}}function i(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(t,e,i){if(!t.namespaces[e])t.namespaces.add(e,i,"#default#VML")}function r(t){if(n(t,"g_vml_","urn:schemas-microsoft-com:vml"),n(t,"g_o_","urn:schemas-microsoft-com:office:office"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function o(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function s(t){var e=t.srcElement;if(e.firstChild)e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px"}function a(){return[[1,0,0],[0,1,0],[0,0,1]]}function l(t,e){for(var i=a(),n=0;3>n;n++)for(var r=0;3>r;r++){for(var o=0,s=0;3>s;s++)o+=t[n][s]*e[s][r];i[n][r]=o}return i}function c(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.scaleX_=t.scaleX_,e.scaleY_=t.scaleY_,e.lineScale_=t.lineScale_}function h(t){var e=t.indexOf("(",3),i=t.indexOf(")",e+1),n=t.substring(e+1,i).split(",");if(4!=n.length||"a"!=t.charAt(3))n[3]=1;return n}function d(t){return parseFloat(t)/100}function u(t,e,i){return Math.min(i,Math.max(e,t))}function f(t){var e,i,n,r,o,s;if(r=parseFloat(t[0])/360%360,0>r)r++;if(o=u(d(t[1]),0,1),s=u(d(t[2]),0,1),0==o)e=i=n=s;else{var a=.5>s?s*(1+o):s+o-s*o,l=2*s-a;e=p(l,a,r+1/3),i=p(l,a,r),n=p(l,a,r-1/3)}return"#"+q[Math.floor(255*e)]+q[Math.floor(255*i)]+q[Math.floor(255*n)]}function p(t,e,i){if(0>i)i++;if(i>1)i--;if(1>6*i)return t+6*(e-t)*i;else if(1>2*i)return e;else if(2>3*i)return t+(e-t)*(2/3-i)*6;else return t}function m(t){if(t in U)return U[t];var e,i=1;if(t=String(t),"#"==t.charAt(0))e=t;else if(/^rgb/.test(t)){for(var n,r=h(t),e="#",o=0;3>o;o++){if(-1!=r[o].indexOf("%"))n=Math.floor(255*d(r[o]));else n=+r[o];e+=q[u(n,0,255)]}i=+r[3]}else if(/^hsl/.test(t)){var r=h(t);e=f(r),i=r[3]}else e=V[t]||t;return U[t]={color:e,alpha:i}}function g(t){if(G[t])return G[t];var e,i=document.createElement("div"),n=i.style;try{n.font=t,e=n.fontFamily.split(",")[0]}catch(r){}return G[t]={style:n.fontStyle||Y.style,variant:n.fontVariant||Y.variant,weight:n.fontWeight||Y.weight,size:n.fontSize||Y.size,family:e||Y.family}}function v(t,e){var i={};for(var n in t)i[n]=t[n];var r=parseFloat(e.currentStyle.fontSize),o=parseFloat(t.size);if("number"==typeof t.size)i.size=t.size;else if(-1!=t.size.indexOf("px"))i.size=o;else if(-1!=t.size.indexOf("em"))i.size=r*o;else if(-1!=t.size.indexOf("%"))i.size=r/100*o;else if(-1!=t.size.indexOf("pt"))i.size=o/.75;else i.size=r;return i}function y(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+"px '"+t.family+"'"}function _(t){return X[t]||"square"}function b(t){this.m_=a(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*R,this.globalAlpha=1,this.font="12px 微软雅黑",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",i=t.ownerDocument.createElement("div");i.style.cssText=e,t.appendChild(i);var n=i.cloneNode(!1);n.style.backgroundColor="#fff",n.style.filter="alpha(opacity=0)",t.appendChild(n),this.element_=i,this.scaleX_=1,this.scaleY_=1,this.lineScale_=1}function x(t,e,i,n){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),t.currentX_=n.x,t.currentY_=n.y}function w(t,e){var i=m(t.strokeStyle),n=i.color,r=i.alpha*t.globalAlpha,o=t.lineScale_*t.lineWidth;if(1>o)r*=o;e.push("<g_vml_:stroke",' opacity="',r,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',_(t.lineCap),'"',' weight="',o,'px"',' color="',n,'" />')}function T(t,e,i,n){var r=t.fillStyle,o=t.scaleX_,s=t.scaleY_,a=n.x-i.x,l=n.y-i.y;if(r instanceof $){var c=0,h={x:0,y:0},d=0,u=1;if("gradient"==r.type_){var f=r.x0_/o,p=r.y0_/s,g=r.x1_/o,v=r.y1_/s,y=S(t,f,p),_=S(t,g,v),b=_.x-y.x,x=_.y-y.y;if(c=180*Math.atan2(b,x)/Math.PI,0>c)c+=360;if(1e-6>c)c=0}else{var y=S(t,r.x0_,r.y0_);h={x:(y.x-i.x)/a,y:(y.y-i.y)/l},a/=o*R,l/=s*R;var w=M.max(a,l);d=2*r.r0_/w,u=2*r.r1_/w-d}var T=r.colors_;T.sort(function(t,e){return t.offset-e.offset});for(var C=T.length,k=T[0].color,I=T[C-1].color,L=T[0].alpha*t.globalAlpha,A=T[C-1].alpha*t.globalAlpha,P=[],z=0;C>z;z++){var D=T[z];P.push(D.offset*u+d+" "+D.color)}e.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',k,'"',' color2="',I,'"',' colors="',P.join(","),'"',' opacity="',A,'"',' g_o_:opacity2="',L,'"',' angle="',c,'"',' focusposition="',h.x,",",h.y,'" />')}else if(r instanceof E){if(a&&l){var O=-i.x,N=-i.y;e.push("<g_vml_:fill",' position="',O/a*o*o,",",N/l*s*s,'"',' type="tile"',' src="',r.src_,'" />')}}else{var F=m(t.fillStyle),B=F.color,H=F.alpha*t.globalAlpha;e.push('<g_vml_:fill color="',B,'" opacity="',H,'" />')}}function S(t,e,i){var n=t.m_;return{x:R*(e*n[0][0]+i*n[1][0]+n[2][0])-F,y:R*(e*n[0][1]+i*n[1][1]+n[2][1])-F}}function C(t){return isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])}function k(t,e,i){if(C(e))if(t.m_=e,t.scaleX_=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]),t.scaleY_=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]),i){var n=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=N(O(n))}}function $(t){this.type_=t,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function E(t,e){switch(L(t),e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:I("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function I(t){throw new A(t)}function L(t){if(!t||1!=t.nodeType||"IMG"!=t.tagName)I("TYPE_MISMATCH_ERR");if("complete"!=t.readyState)I("INVALID_STATE_ERR")}function A(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var M=Math,P=M.round,z=M.sin,D=M.cos,O=M.abs,N=M.sqrt,R=10,F=R/2,B=(+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],Array.prototype.slice);r(document);var H={init:function(t){var i=t||document;i.createElement("canvas"),i.attachEvent("onreadystatechange",e(this.init_,this,i))},init_:function(t){for(var e=t.getElementsByTagName("canvas"),i=0;i<e.length;i++)this.initElement(e[i])},initElement:function(e){if(!e.getContext){e.getContext=t,r(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",o),e.attachEvent("onresize",s);var i=e.attributes;if(i.width&&i.width.specified)e.style.width=i.width.nodeValue+"px";else e.width=e.clientWidth;if(i.height&&i.height.specified)e.style.height=i.height.nodeValue+"px";else e.height=e.clientHeight}return e}};H.init();for(var q=[],j=0;16>j;j++)for(var W=0;16>W;W++)q[16*j+W]=j.toString(16)+W.toString(16);var V={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},U={},Y={style:"normal",variant:"normal",weight:"normal",size:12,family:"微软雅黑"},G={},X={butt:"flat",round:"round"},Z=b.prototype;Z.clearRect=function(){if(this.textMeasureEl_)this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null;this.element_.innerHTML=""},Z.beginPath=function(){this.currentPath_=[]},Z.moveTo=function(t,e){var i=S(this,t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},Z.lineTo=function(t,e){var i=S(this,t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},Z.bezierCurveTo=function(t,e,i,n,r,o){var s=S(this,r,o),a=S(this,t,e),l=S(this,i,n);x(this,a,l,s)},Z.quadraticCurveTo=function(t,e,i,n){var r=S(this,t,e),o=S(this,i,n),s={x:this.currentX_+2/3*(r.x-this.currentX_),y:this.currentY_+2/3*(r.y-this.currentY_)},a={x:s.x+(o.x-this.currentX_)/3,y:s.y+(o.y-this.currentY_)/3};x(this,s,a,o)},Z.arc=function(t,e,i,n,r,o){i*=R;var s=o?"at":"wa",a=t+D(n)*i-F,l=e+z(n)*i-F,c=t+D(r)*i-F,h=e+z(r)*i-F;if(a==c&&!o)a+=.125;var d=S(this,t,e),u=S(this,a,l),f=S(this,c,h);this.currentPath_.push({type:s,x:d.x,y:d.y,radius:i,xStart:u.x,yStart:u.y,xEnd:f.x,yEnd:f.y})},Z.rect=function(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()},Z.strokeRect=function(t,e,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.stroke(),this.currentPath_=r},Z.fillRect=function(t,e,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.fill(),this.currentPath_=r},Z.createLinearGradient=function(t,e,i,n){var r=new $("gradient");return r.x0_=t,r.y0_=e,r.x1_=i,r.y1_=n,r},Z.createRadialGradient=function(t,e,i,n,r,o){var s=new $("gradientradial");return s.x0_=t,s.y0_=e,s.r0_=i,s.x1_=n,s.y1_=r,s.r1_=o,s},Z.drawImage=function(t,e){var i,n,r,o,s,a,l,c,h=t.runtimeStyle.width,d=t.runtimeStyle.height;t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var u=t.width,f=t.height;if(t.runtimeStyle.width=h,t.runtimeStyle.height=d,3==arguments.length)i=arguments[1],n=arguments[2],s=a=0,l=r=u,c=o=f;else if(5==arguments.length)i=arguments[1],n=arguments[2],r=arguments[3],o=arguments[4],s=a=0,l=u,c=f;else if(9==arguments.length)s=arguments[1],a=arguments[2],l=arguments[3],c=arguments[4],i=arguments[5],n=arguments[6],r=arguments[7],o=arguments[8];else throw Error("Invalid number of arguments");var p=S(this,i,n),m=[],g=10,v=10,y=b=1;if(m.push(" <g_vml_:group",' coordsize="',R*g,",",R*v,'"',' coordorigin="0,0"',' style="width:',g,"px;height:",v,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var _=[],y=this.scaleX_,b=this.scaleY_;_.push("M11=",this.m_[0][0]/y,",","M12=",this.m_[1][0]/b,",","M21=",this.m_[0][1]/y,",","M22=",this.m_[1][1]/b,",","Dx=",P(p.x/R),",","Dy=",P(p.y/R),"");var x=p,w=S(this,i+r,n),T=S(this,i,n+o),C=S(this,i+r,n+o);x.x=M.max(x.x,w.x,T.x,C.x),x.y=M.max(x.y,w.y,T.y,C.y),m.push("padding:0 ",P(x.x/R),"px ",P(x.y/R),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",_.join(""),", SizingMethod='clip');")}else m.push("top:",P(p.y/R),"px;left:",P(p.x/R),"px;");if(m.push(' ">'),s||a)m.push('<div style="overflow: hidden; width:',Math.ceil((r+s*r/l)*y),"px;"," height:",Math.ceil((o+a*o/c)*b),"px;"," filter:progid:DxImageTransform.Microsoft.Matrix(Dx=",-s*r/l*y,",Dy=",-a*o/c*b,');">');if(m.push('<div style="width:',Math.round(y*u*r/l),"px;"," height:",Math.round(b*f*o/c),"px;"," filter:"),this.globalAlpha<1)m.push(" progid:DXImageTransform.Microsoft.Alpha(opacity="+100*this.globalAlpha+")");if(m.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=",t.src,',sizingMethod=scale)">'),s||a)m.push("</div>");m.push("</div></div>"),this.element_.insertAdjacentHTML("BeforeEnd",m.join(""))},Z.stroke=function(t){var e=[],i=10,n=10;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',i,"px;height:",n,'px;"',' coordorigin="0,0"',' coordsize="',R*i,",",R*n,'"',' stroked="',!t,'"',' path="');for(var r={x:null,y:null},o={x:null,y:null},s=0;s<this.currentPath_.length;s++){var a,l=this.currentPath_[s];switch(l.type){case"moveTo":a=l,e.push(" m ",P(l.x),",",P(l.y));break;case"lineTo":e.push(" l ",P(l.x),",",P(l.y));break;case"close":e.push(" x "),l=null;break;case"bezierCurveTo":e.push(" c ",P(l.cp1x),",",P(l.cp1y),",",P(l.cp2x),",",P(l.cp2y),",",P(l.x),",",P(l.y));break;case"at":case"wa":e.push(" ",l.type," ",P(l.x-this.scaleX_*l.radius),",",P(l.y-this.scaleY_*l.radius)," ",P(l.x+this.scaleX_*l.radius),",",P(l.y+this.scaleY_*l.radius)," ",P(l.xStart),",",P(l.yStart)," ",P(l.xEnd),",",P(l.yEnd))}if(l){if(null==r.x||l.x<r.x)r.x=l.x;if(null==o.x||l.x>o.x)o.x=l.x;if(null==r.y||l.y<r.y)r.y=l.y;if(null==o.y||l.y>o.y)o.y=l.y}}if(e.push(' ">'),!t)w(this,e);else T(this,e,r,o);e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},Z.fill=function(){this.stroke(!0)},Z.closePath=function(){this.currentPath_.push({type:"close"})},Z.save=function(){var t={};c(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=l(a(),this.m_)},Z.restore=function(){if(this.aStack_.length)c(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},Z.translate=function(t,e){var i=[[1,0,0],[0,1,0],[t,e,1]];k(this,l(i,this.m_),!1)},Z.rotate=function(t){var e=D(t),i=z(t),n=[[e,i,0],[-i,e,0],[0,0,1]];k(this,l(n,this.m_),!1)},Z.scale=function(t,e){var i=[[t,0,0],[0,e,0],[0,0,1]];k(this,l(i,this.m_),!0)},Z.transform=function(t,e,i,n,r,o){var s=[[t,e,0],[i,n,0],[r,o,1]];k(this,l(s,this.m_),!0)},Z.setTransform=function(t,e,i,n,r,o){var s=[[t,e,0],[i,n,0],[r,o,1]];k(this,s,!0)},Z.drawText_=function(t,e,n,r,o){var s=this.m_,a=1e3,l=0,c=a,h={x:0,y:0},d=[],u=v(g(this.font),this.element_),f=y(u),p=this.element_.currentStyle,m=this.textAlign.toLowerCase();switch(m){case"left":case"center":case"right":break;case"end":m="ltr"==p.direction?"right":"left";break;case"start":m="rtl"==p.direction?"right":"left";break;default:m="left"}switch(this.textBaseline){case"hanging":case"top":h.y=u.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":h.y=-u.size/2.25}switch(m){case"right":l=a,c=.05;break;case"center":l=c=a/2}var _=S(this,e+h.x,n+h.y);if(d.push('<g_vml_:line from="',-l,' 0" to="',c,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!o,'" stroked="',!!o,'" style="position:absolute;width:1px;height:1px;">'),o)w(this,d);else T(this,d,{x:-l,y:0},{x:c,y:u.size});var b=s[0][0].toFixed(3)+","+s[1][0].toFixed(3)+","+s[0][1].toFixed(3)+","+s[1][1].toFixed(3)+",0,0",x=P(_.x/R)+","+P(_.y/R);d.push('<g_vml_:skew on="t" matrix="',b,'" ',' offset="',x,'" origin="',l,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',i(t),'" style="v-text-align:',m,";font:",i(f),'" /></g_vml_:line>'),
this.element_.insertAdjacentHTML("beforeEnd",d.join(""))},Z.fillText=function(t,e,i,n){this.drawText_(t,e,i,n,!1)},Z.strokeText=function(t,e,i,n){this.drawText_(t,e,i,n,!0)},Z.measureText=function(t){if(!this.textMeasureEl_){var e='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",e),this.textMeasureEl_=this.element_.lastChild}var i=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";try{this.textMeasureEl_.style.font=this.font}catch(n){}return this.textMeasureEl_.appendChild(i.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},Z.clip=function(){},Z.arcTo=function(){},Z.createPattern=function(t,e){return new E(t,e)},$.prototype.addColorStop=function(t,e){e=m(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})};var J=A.prototype=new Error;J.INDEX_SIZE_ERR=1,J.DOMSTRING_SIZE_ERR=2,J.HIERARCHY_REQUEST_ERR=3,J.WRONG_DOCUMENT_ERR=4,J.INVALID_CHARACTER_ERR=5,J.NO_DATA_ALLOWED_ERR=6,J.NO_MODIFICATION_ALLOWED_ERR=7,J.NOT_FOUND_ERR=8,J.NOT_SUPPORTED_ERR=9,J.INUSE_ATTRIBUTE_ERR=10,J.INVALID_STATE_ERR=11,J.SYNTAX_ERR=12,J.INVALID_MODIFICATION_ERR=13,J.NAMESPACE_ERR=14,J.INVALID_ACCESS_ERR=15,J.VALIDATION_ERR=16,J.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=H,CanvasRenderingContext2D=b,CanvasGradient=$,CanvasPattern=E,DOMException=A}();else G_vmlCanvasManager=!1;return G_vmlCanvasManager}),define("zrender/tool/util",["require","../dep/excanvas"],function(require){function t(t){return t&&1===t.nodeType&&"string"==typeof t.nodeName}function e(i){if("object"==typeof i&&null!==i){var n=i;if(i instanceof Array){n=[];for(var r=0,o=i.length;o>r;r++)n[r]=e(i[r])}else if(!g[v.call(i)]&&!t(i)){n={};for(var s in i)if(i.hasOwnProperty(s))n[s]=e(i[s])}return n}return i}function i(e,i,r,o){if(i.hasOwnProperty(r)){var s=e[r];if("object"==typeof s&&!g[v.call(s)]&&!t(s))n(e[r],i[r],o);else if(o||!(r in e))e[r]=i[r]}}function n(t,e,n){for(var r in e)i(t,e,r,n);return t}function r(){if(!d)if(require("../dep/excanvas"),window.G_vmlCanvasManager){var t=document.createElement("div");t.style.position="absolute",t.style.top="-1000px",document.body.appendChild(t),d=G_vmlCanvasManager.initElement(t).getContext("2d")}else d=document.createElement("canvas").getContext("2d");return d}function o(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function s(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.constructor=t}function a(t,e,i){if(t&&e)if(t.forEach&&t.forEach===f)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;r>n;n++)e.call(i,t[n],n,t);else for(var o in t)if(t.hasOwnProperty(o))e.call(i,t[o],o,t)}function l(t,e,i){if(t&&e)if(t.map&&t.map===p)return t.map(e,i);else{for(var n=[],r=0,o=t.length;o>r;r++)n.push(e.call(i,t[r],r,t));return n}}function c(t,e,i){if(t&&e)if(t.filter&&t.filter===m)return t.filter(e,i);else{for(var n=[],r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t))n.push(t[r]);return n}}function h(t,e){return function(){t.apply(e,arguments)}}var d,u=Array.prototype,f=u.forEach,p=u.map,m=u.filter,g={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},v=Object.prototype.toString;return{inherits:s,clone:e,merge:n,getContext:r,indexOf:o,each:a,map:l,filter:c,bind:h}}),define("zrender/mixin/Eventful",["require"],function(require){var t=function(){this._handlers={}};return t.prototype.one=function(t,e,i){var n=this._handlers;if(!e||!t)return this;if(!n[t])n[t]=[];return n[t].push({h:e,one:!0,ctx:i||this}),this},t.prototype.bind=function(t,e,i){var n=this._handlers;if(!e||!t)return this;if(!n[t])n[t]=[];return n[t].push({h:e,one:!1,ctx:i||this}),this},t.prototype.unbind=function(t,e){var i=this._handlers;if(!t)return this._handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;o>r;r++)if(i[t][r].h!=e)n.push(i[t][r]);i[t]=n}if(i[t]&&0===i[t].length)delete i[t]}else delete i[t];return this},t.prototype.dispatch=function(t){if(this._handlers[t]){var e=arguments,i=e.length;if(i>3)e=Array.prototype.slice.call(e,1);for(var n=this._handlers[t],r=n.length,o=0;r>o;){switch(i){case 1:n[o].h.call(n[o].ctx);break;case 2:n[o].h.call(n[o].ctx,e[1]);break;case 3:n[o].h.call(n[o].ctx,e[1],e[2]);break;default:n[o].h.apply(n[o].ctx,e)}if(n[o].one)n.splice(o,1),r--;else o++}}return this},t.prototype.dispatchWithContext=function(t){if(this._handlers[t]){var e=arguments,i=e.length;if(i>4)e=Array.prototype.slice.call(e,1,e.length-1);for(var n=e[e.length-1],r=this._handlers[t],o=r.length,s=0;o>s;){switch(i){case 1:r[s].h.call(n);break;case 2:r[s].h.call(n,e[1]);break;case 3:r[s].h.call(n,e[1],e[2]);break;default:r[s].h.apply(n,e)}if(r[s].one)r.splice(s,1),o--;else s++}}return this},t}),define("zrender/tool/event",["require","../mixin/Eventful"],function(require){"use strict";function t(t){return"undefined"!=typeof t.zrenderX&&t.zrenderX||"undefined"!=typeof t.offsetX&&t.offsetX||"undefined"!=typeof t.layerX&&t.layerX||"undefined"!=typeof t.clientX&&t.clientX}function e(t){return"undefined"!=typeof t.zrenderY&&t.zrenderY||"undefined"!=typeof t.offsetY&&t.offsetY||"undefined"!=typeof t.layerY&&t.layerY||"undefined"!=typeof t.clientY&&t.clientY}function i(t){return"undefined"!=typeof t.zrenderDelta&&t.zrenderDelta||"undefined"!=typeof t.wheelDelta&&t.wheelDelta||"undefined"!=typeof t.detail&&-t.detail}var n=require("../mixin/Eventful"),r="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};return{getX:t,getY:e,getDelta:i,stop:r,Dispatcher:n}}),define("zrender/tool/env",[],function(){function t(t){var e=this.os={},i=this.browser={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&t.match(/TouchPad/),h=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),u=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),v=t.match(/Firefox\/([\d.]+)/),y=t.match(/MSIE ([\d.]+)/),_=n&&t.match(/Mobile\//)&&!g,b=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,y=t.match(/MSIE\s([\d.]+)/);if(i.webkit=!!n)i.version=n[1];if(r)e.android=!0,e.version=r[2];if(a&&!s)e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".");if(o)e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".");if(s)e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null;if(l)e.webos=!0,e.version=l[2];if(c)e.touchpad=!0;if(u)e.blackberry=!0,e.version=u[2];if(f)e.bb10=!0,e.version=f[2];if(p)e.rimtabletos=!0,e.version=p[2];if(m)i.playbook=!0;if(h)e.kindle=!0,e.version=h[1];if(d)i.silk=!0,i.version=d[1];if(!d&&e.android&&t.match(/Kindle Fire/))i.silk=!0;if(g)i.chrome=!0,i.version=g[1];if(v)i.firefox=!0,i.version=v[1];if(y)i.ie=!0,i.version=y[1];if(_&&(t.match(/Safari/)||e.ios))i.safari=!0;if(b)i.webview=!0;if(y)i.ie=!0,i.version=y[1];return e.tablet=!!(o||m||r&&!t.match(/Mobile/)||v&&t.match(/Tablet/)||y&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||a||l||u||f||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||v&&t.match(/Mobile/)||y&&t.match(/Touch/))),{browser:i,os:e,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return t(navigator.userAgent)}),define("zrender/config",[],function(){var t={EVENT:{RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},elementClassName:"zr-element",catchBrushException:!1,debugMode:0,devicePixelRatio:Math.max(window.devicePixelRatio||1,1)};return t}),define("zrender/tool/log",["require","../config"],function(require){var t=require("../config");return function(){if(0!==t.debugMode)if(1==t.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(t.debugMode>1)for(var e in arguments)console.log(arguments[e])}}),define("zrender/tool/guid",[],function(){var t=2311;return function(){return"zrender__"+t++}}),define("zrender/tool/vector",[],function(){var t="undefined"==typeof Float32Array?Array:Float32Array,e={create:function(e,i){var n=new t(2);return n[0]=e||0,n[1]=i||0,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(e){var i=new t(2);return i[0]=e[0],i[1]=e[1],i},set:function(t,e,i){return t[0]=e,t[1]=i,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},sub:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},len:function(t){return Math.sqrt(this.lenSquare(t))},lenSquare:function(t){return t[0]*t[0]+t[1]*t[1]},mul:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},div:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},normalize:function(t,i){var n=e.len(i);if(0===n)t[0]=0,t[1]=0;else t[0]=i[0]/n,t[1]=i[1]/n;return t},distance:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))},distanceSquare:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},applyTransform:function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}};return e.length=e.len,e.lengthSquare=e.lenSquare,e.dist=e.distance,e.distSquare=e.distanceSquare,e}),define("zrender/tool/matrix",[],function(){var t="undefined"==typeof Float32Array?Array:Float32Array,e={create:function(){var i=new t(6);return e.identity(i),i},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},mul:function(t,e,i){return t[0]=e[0]*i[0]+e[2]*i[1],t[1]=e[1]*i[0]+e[3]*i[1],t[2]=e[0]*i[2]+e[2]*i[3],t[3]=e[1]*i[2]+e[3]*i[3],t[4]=e[0]*i[4]+e[2]*i[5]+e[4],t[5]=e[1]*i[4]+e[3]*i[5]+e[5],t},translate:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},rotate:function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=n*h+s*c,t[1]=-n*c+s*h,t[2]=r*h+a*c,t[3]=-r*c+h*a,t[4]=h*o+c*l,t[5]=h*l-c*o,t},scale:function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},invert:function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],l=i*s-o*n;if(!l)return null;else return l=1/l,t[0]=s*l,t[1]=-o*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*r)*l,t[5]=(o*r-i*a)*l,t}};return e}),define("zrender/Handler",["require","./config","./tool/env","./tool/event","./tool/util","./tool/vector","./tool/matrix","./mixin/Eventful"],function(require){"use strict";function t(t,e){return function(i,n){return t.call(e,i,n)}}function e(t,e){return function(i,n,r){return t.call(e,i,n,r)}}function i(e){for(var i=u.length;i--;){var n=u[i];e["_"+n+"Handler"]=t(p[n],e)}}function n(t,e,i){if(this._draggingTarget&&this._draggingTarget.id==t.id||t.isSilent())return!1;var n=this._event;if(t.isCover(e,i)){if(t.hoverable)this.storage.addHover(t);for(var r=t.parent;r;){if(r.clipShape&&!r.clipShape.isCover(this._mouseX,this._mouseY))return!1;r=r.parent}if(this._lastHover!=t)this._processOutShape(n),this._processDragLeave(n),this._lastHover=t,this._processDragEnter(n);return this._processOverShape(n),this._processDragOver(n),this._hasfound=1,!0}return!1}var r=require("./config"),o=require("./tool/env"),s=require("./tool/event"),a=require("./tool/util"),l=require("./tool/vector"),c=require("./tool/matrix"),h=r.EVENT,d=require("./mixin/Eventful"),u=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],f=function(t){if(window.G_vmlCanvasManager)return!0;t=t||window.event;var e=t.toElement||t.relatedTarget||t.srcElement||t.target;return e&&e.className.match(r.elementClassName)},p={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(h.RESIZE,t)},click:function(t,e){if(f(t)||e){t=this._zrenderEventFixed(t);var i=this._lastHover;if(i&&i.clickable||!i)if(this._clickThreshold<5)this._dispatchAgency(i,h.CLICK,t);this._mousemoveHandler(t)}},dblclick:function(t,e){if(f(t)||e){t=t||window.event,t=this._zrenderEventFixed(t);var i=this._lastHover;if(i&&i.clickable||!i)if(this._clickThreshold<5)this._dispatchAgency(i,h.DBLCLICK,t);this._mousemoveHandler(t)}},mousewheel:function(t,e){if(f(t)||e){t=this._zrenderEventFixed(t);var i=t.wheelDelta||-t.detail,n=i>0?1.1:1/1.1,r=!1,o=this._mouseX,a=this._mouseY;if(this.painter.eachBuildinLayer(function(e){var i=e.position;if(e.zoomable){e.__zoom=e.__zoom||1;var l=e.__zoom;l*=n,l=Math.max(Math.min(e.maxZoom,l),e.minZoom),n=l/e.__zoom,e.__zoom=l,i[0]-=(o-i[0])*(n-1),i[1]-=(a-i[1])*(n-1),e.scale[0]*=n,e.scale[1]*=n,e.dirty=!0,r=!0,s.stop(t)}}),r)this.painter.refresh();this._dispatchAgency(this._lastHover,h.MOUSEWHEEL,t),this._mousemoveHandler(t)}},mousemove:function(t,e){if(f(t)||e)if(!this.painter.isLoading()){t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=s.getX(t),this._mouseY=s.getY(t);var i=this._mouseX-this._lastX,n=this._mouseY-this._lastY;if(this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)this._processOutShape(t),this._processDragLeave(t);this._lastHover=null,this.storage.delHover(),this.painter.clearHover()}var r="default";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,i,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget),this._clickThreshold++;else if(this._isMouseDown){var o=!1;if(this.painter.eachBuildinLayer(function(t){if(t.panable)r="move",t.position[0]+=i,t.position[1]+=n,o=!0,t.dirty=!0}),o)this.painter.refresh()}if(this._draggingTarget||this._hasfound&&this._lastHover.draggable)r="move";else if(this._hasfound&&this._lastHover.clickable)r="pointer";if(this.root.style.cursor=r,this._dispatchAgency(this._lastHover,h.MOUSEMOVE,t),this._draggingTarget||this._hasfound||this.storage.hasHoverShape())this.painter.refreshHover()}},mouseout:function(t,e){if(f(t)||e){t=this._zrenderEventFixed(t);var i=t.toElement||t.relatedTarget;if(i!=this.root)for(;i&&9!=i.nodeType;){if(i==this.root)return void this._mousemoveHandler(t);i=i.parentNode}if(t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="default",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),!this.painter.isLoading())this.painter.refreshHover();this.dispatch(h.GLOBALOUT,t)}},mousedown:function(t,e){if(f(t)||e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,h.MOUSEDOWN,t),this._lastDownButton=t.button}},mouseup:function(t,e){if(f(t)||e)t=this._zrenderEventFixed(t),this.root.style.cursor="default",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,h.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t,e){if(f(t)||e)t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobileFindFixed(t),this._mousedownHandler(t)},touchmove:function(t,e){if(f(t)||e)if(t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging)s.stop(t)},touchend:function(t,e){if(f(t)||e){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var i=new Date;if(i-this._lastTouchMoment<h.touchClickDelay){if(this._mobileFindFixed(t),this._clickHandler(t),i-this._lastClickMoment<h.touchClickDelay/2)if(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable)s.stop(t);this._lastClickMoment=i}this.painter.clearHover()}}},m=function(t,r,s){if(d.call(this),this.root=t,this.storage=r,this.painter=s,this._lastX=this._lastY=this._mouseX=this._mouseY=0,this._findHover=e(n,this),this._domHover=s.getDomHover(),i(this),window.addEventListener){if(window.addEventListener("resize",this._resizeHandler),o.os.tablet||o.os.phone)t.addEventListener("touchstart",this._touchstartHandler),t.addEventListener("touchmove",this._touchmoveHandler),t.addEventListener("touchend",this._touchendHandler);else t.addEventListener("click",this._clickHandler),t.addEventListener("dblclick",this._dblclickHandler),t.addEventListener("mousewheel",this._mousewheelHandler),t.addEventListener("mousemove",this._mousemoveHandler),t.addEventListener("mousedown",this._mousedownHandler),t.addEventListener("mouseup",this._mouseupHandler);t.addEventListener("DOMMouseScroll",this._mousewheelHandler),t.addEventListener("mouseout",this._mouseoutHandler)}else window.attachEvent("onresize",this._resizeHandler),t.attachEvent("onclick",this._clickHandler),t.ondblclick=this._dblclickHandler,t.attachEvent("onmousewheel",this._mousewheelHandler),t.attachEvent("onmousemove",this._mousemoveHandler),t.attachEvent("onmouseout",this._mouseoutHandler),t.attachEvent("onmousedown",this._mousedownHandler),t.attachEvent("onmouseup",this._mouseupHandler)};m.prototype.on=function(t,e,i){return this.bind(t,e,i),this},m.prototype.un=function(t,e){return this.unbind(t,e),this},m.prototype.trigger=function(t,e){switch(t){case h.RESIZE:case h.CLICK:case h.DBLCLICK:case h.MOUSEWHEEL:case h.MOUSEMOVE:case h.MOUSEDOWN:case h.MOUSEUP:case h.MOUSEOUT:this["_"+t+"Handler"](e,!0)}},m.prototype.dispose=function(){var t=this.root;if(window.removeEventListener){if(window.removeEventListener("resize",this._resizeHandler),o.os.tablet||o.os.phone)t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler);else t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler);t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)}else window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler);this.root=this._domHover=this.storage=this.painter=null,this.un()},m.prototype._processDragStart=function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var i=e;this._draggingTarget=i,this._isDragging=1,i.invisible=!0,this.storage.mod(i.id),this._dispatchAgency(i,h.DRAGSTART,t),this.painter.refresh()}},m.prototype._processDragEnter=function(t){if(this._draggingTarget)this._dispatchAgency(this._lastHover,h.DRAGENTER,t,this._draggingTarget)},m.prototype._processDragOver=function(t){if(this._draggingTarget)this._dispatchAgency(this._lastHover,h.DRAGOVER,t,this._draggingTarget)},m.prototype._processDragLeave=function(t){if(this._draggingTarget)this._dispatchAgency(this._lastHover,h.DRAGLEAVE,t,this._draggingTarget)},m.prototype._processDrop=function(t){if(this._draggingTarget)this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,h.DROP,t,this._draggingTarget)},m.prototype._processDragEnd=function(t){if(this._draggingTarget)this._dispatchAgency(this._draggingTarget,h.DRAGEND,t),this._lastHover=null;this._isDragging=0,this._draggingTarget=null},m.prototype._processOverShape=function(t){this._dispatchAgency(this._lastHover,h.MOUSEOVER,t)},m.prototype._processOutShape=function(t){this._dispatchAgency(this._lastHover,h.MOUSEOUT,t)},m.prototype._dispatchAgency=function(t,e,i,n){var r="on"+e,o={type:e,event:i,target:t,cancelBubble:!1},s=t;if(n)o.dragged=n;for(;s&&(s[r]&&(o.cancelBubble=s[r](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););if(t){if(!o.cancelBubble)this.dispatch(e,o)}else if(!n){var a={type:e,event:i};this.dispatch(e,a),this.painter.eachOtherLayer(function(t){if("function"==typeof t[r])t[r](a);if(t.dispatch)t.dispatch(e,a)})}},m.prototype._iterateAndFindHover=function(){var t=c.create();return function(){for(var e,i,n=this.storage.getShapeList(),r=[0,0],o=n.length-1;o>=0;o--){var s=n[o];if(e!==s.zlevel)if(i=this.painter.getLayer(s.zlevel,i),r[0]=this._mouseX,r[1]=this._mouseY,i.needTransform)c.invert(t,i.transform),l.applyTransform(r,r,t);if(this._findHover(s,r[0],r[1]))break}}}();var g=[{x:10},{x:-20},{x:10,y:10},{y:-20}];return m.prototype._mobileFindFixed=function(t){this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var e=0;!this._lastHover&&e<g.length;e++){var i=g[e];i.x&&(this._mouseX+=i.x),i.y&&(this._mouseY+=i.y),this._iterateAndFindHover()}if(this._lastHover)t.zrenderX=this._mouseX,t.zrenderY=this._mouseY},m.prototype._zrenderEventFixed=function(t,e){if(t.zrenderFixed)return t;if(!e){t=t||window.event;var i=t.toElement||t.relatedTarget||t.srcElement||t.target;if(i&&i!=this._domHover)t.zrenderX=("undefined"!=typeof t.offsetX?t.offsetX:t.layerX)+i.offsetLeft,t.zrenderY=("undefined"!=typeof t.offsetY?t.offsetY:t.layerY)+i.offsetTop}else{var n="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(n){var r=this.painter._domRoot.getBoundingClientRect();t.zrenderX=n.clientX-r.left,t.zrenderY=n.clientY-r.top}}return t.zrenderFixed=1,t},a.merge(m.prototype,d.prototype,!0),m}),define("zrender/tool/curve",["require","./vector"],function(require){function t(t){return t>-m&&m>t}function e(t){return t>m||-m>t}function i(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function n(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function r(e,i,n,r,o,s){var a=r+3*(i-n)-e,l=3*(n-2*i+e),c=3*(i-e),h=e-o,d=l*l-3*a*c,u=l*c-9*a*h,f=c*c-3*l*h,p=0;if(t(d)&&t(u))if(t(l))s[0]=0;else{var m=-c/l;if(m>=0&&1>=m)s[p++]=m}else{var y=u*u-4*d*f;if(t(y)){var _=u/d,m=-l/a+_,b=-_/2;if(m>=0&&1>=m)s[p++]=m;if(b>=0&&1>=b)s[p++]=b}else if(y>0){var x=Math.sqrt(y),w=d*l+1.5*a*(-u+x),T=d*l+1.5*a*(-u-x);if(0>w)w=-Math.pow(-w,v);else w=Math.pow(w,v);if(0>T)T=-Math.pow(-T,v);else T=Math.pow(T,v);var m=(-l-(w+T))/(3*a);if(m>=0&&1>=m)s[p++]=m}else{var S=(2*d*l-3*a*u)/(2*Math.sqrt(d*d*d)),C=Math.acos(S)/3,k=Math.sqrt(d),$=Math.cos(C),m=(-l-2*k*$)/(3*a),b=(-l+k*($+g*Math.sin(C)))/(3*a),E=(-l+k*($-g*Math.sin(C)))/(3*a);if(m>=0&&1>=m)s[p++]=m;if(b>=0&&1>=b)s[p++]=b;if(E>=0&&1>=E)s[p++]=E}}return p}function o(i,n,r,o,s){var a=6*r-12*n+6*i,l=9*n+3*o-3*i-9*r,c=3*n-3*i,h=0;if(t(l)){if(e(a)){var d=-c/a;if(d>=0&&1>=d)s[h++]=d}}else{var u=a*a-4*l*c;if(t(u))s[0]=-a/(2*l);else if(u>0){var f=Math.sqrt(u),d=(-a+f)/(2*l),p=(-a-f)/(2*l);if(d>=0&&1>=d)s[h++]=d;if(p>=0&&1>=p)s[h++]=p}}return h}function s(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,l=(n-i)*r+i,c=(a-s)*r+s,h=(l-a)*r+a,d=(h-c)*r+c;o[0]=t,o[1]=s,o[2]=c,o[3]=d,o[4]=d,o[5]=h,o[6]=l,o[7]=n}function a(t,e,n,r,o,s,a,l,c,h,d){var u,f=.005,g=1/0;y[0]=c,y[1]=h;for(var v=0;1>v;v+=.05){_[0]=i(t,n,o,a,v),_[1]=i(e,r,s,l,v);var x=p.distSquare(y,_);if(g>x)u=v,g=x}g=1/0;for(var w=0;32>w&&!(m>f);w++){var T=u-f,S=u+f;_[0]=i(t,n,o,a,T),_[1]=i(e,r,s,l,T);var x=p.distSquare(_,y);if(T>=0&&g>x)u=T,g=x;else{b[0]=i(t,n,o,a,S),b[1]=i(e,r,s,l,S);var C=p.distSquare(b,y);if(1>=S&&g>C)u=S,g=C;else f*=.5}}if(d)d[0]=i(t,n,o,a,u),d[1]=i(e,r,s,l,u);return Math.sqrt(g)}function l(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function c(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function h(i,n,r,o,s){var a=i-2*n+r,l=2*(n-i),c=i-o,h=0;if(t(a)){if(e(l)){var d=-c/l;if(d>=0&&1>=d)s[h++]=d}}else{var u=l*l-4*a*c;if(t(u)){var d=-l/(2*a);if(d>=0&&1>=d)s[h++]=d}else if(u>0){var f=Math.sqrt(u),d=(-l+f)/(2*a),p=(-l-f)/(2*a);if(d>=0&&1>=d)s[h++]=d;if(p>=0&&1>=p)s[h++]=p}}return h}function d(t,e,i){var n=t+i-2*e;if(0===n)return.5;else return(t-e)/n}function u(t,e,i,n,r){var o=(e-t)*n+t,s=(i-e)*n+e,a=(s-o)*n+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=i}function f(t,e,i,n,r,o,s,a,c){var h,d=.005,u=1/0;y[0]=s,y[1]=a;for(var f=0;1>f;f+=.05){_[0]=l(t,i,r,f),_[1]=l(e,n,o,f);var g=p.distSquare(y,_);if(u>g)h=f,u=g}u=1/0;for(var v=0;32>v&&!(m>d);v++){var x=h-d,w=h+d;_[0]=l(t,i,r,x),_[1]=l(e,n,o,x);var g=p.distSquare(_,y);if(x>=0&&u>g)h=x,u=g;else{b[0]=l(t,i,r,w),b[1]=l(e,n,o,w);var T=p.distSquare(b,y);if(1>=w&&u>T)h=w,u=T;else d*=.5}}if(c)c[0]=l(t,i,r,h),c[1]=l(e,n,o,h);return Math.sqrt(u)}var p=require("./vector"),m=1e-4,g=Math.sqrt(3),v=1/3,y=p.create(),_=p.create(),b=p.create();return{cubicAt:i,cubicDerivativeAt:n,cubicRootAt:r,cubicExtrema:o,cubicSubdivide:s,cubicProjectPoint:a,quadraticAt:l,quadraticDerivativeAt:c,quadraticRootAt:h,quadraticExtremum:d,quadraticSubdivide:u,quadraticProjectPoint:f}}),define("zrender/tool/area",["require","./util","./curve"],function(require){"use strict";function t(t){if(t%=A,0>t)t+=A;return t}function e(t,e,r,o){if(!e||!t)return!1;var s=t.type;T=T||S.getContext();var a=i(t,e,r,o);if("undefined"!=typeof a)return a;if(t.buildPath&&T.isPointInPath)return n(t,T,e,r,o);switch(s){case"ellipse":return!0;case"trochoid":var l="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return u(e,r,o,l);case"rose":return u(e,r,o,e.maxr);default:return!1}}function i(t,e,i,n){var r=t.type;switch(r){case"bezier-curve":if("undefined"==typeof e.cpX2)return a(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,i,n);else return s(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,i,n);case"line":return o(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,i,n);case"polyline":return c(e.pointList,e.lineWidth,i,n);case"ring":return h(e.x,e.y,e.r0,e.r,i,n);case"circle":return u(e.x,e.y,e.r,i,n);case"sector":var l=e.startAngle*Math.PI/180,m=e.endAngle*Math.PI/180;if(!e.clockWise)l=-l,m=-m;return f(e.x,e.y,e.r0,e.r,l,m,!e.clockWise,i,n);case"path":return e.pathArray&&b(e.pathArray,Math.max(e.lineWidth,5),e.brushType,i,n);case"polygon":case"star":case"isogon":return p(e.pointList,i,n);case"text":var g=e.__rect||t.getRect(e);return d(g.x,g.y,g.width,g.height,i,n);case"rectangle":case"image":return d(e.x,e.y,e.width,e.height,i,n)}}function n(t,e,i,n,r){return e.beginPath(),t.buildPath(e,i),e.closePath(),e.isPointInPath(n,r)}function r(t,i,n,r){return!e(t,i,n,r)}function o(t,e,i,n,r,o,s){if(0===r)return!1;var a=Math.max(r,5),l=0,c=t;if(s>e+a&&s>n+a||e-a>s&&n-a>s||o>t+a&&o>i+a||t-a>o&&i-a>o)return!1;if(t!==i)l=(e-n)/(t-i),c=(t*n-i*e)/(t-i);else return Math.abs(o-t)<=a/2;var h=l*o-s+c,d=h*h/(l*l+1);return a/2*a/2>=d}function s(t,e,i,n,r,o,s,a,l,c,h){if(0===l)return!1;var d=Math.max(l,5);if(h>e+d&&h>n+d&&h>o+d&&h>a+d||e-d>h&&n-d>h&&o-d>h&&a-d>h||c>t+d&&c>i+d&&c>r+d&&c>s+d||t-d>c&&i-d>c&&r-d>c&&s-d>c)return!1;var u=C.cubicProjectPoint(t,e,i,n,r,o,s,a,c,h,null);return d/2>=u}function a(t,e,i,n,r,o,s,a,l){if(0===s)return!1;var c=Math.max(s,5);if(l>e+c&&l>n+c&&l>o+c||e-c>l&&n-c>l&&o-c>l||a>t+c&&a>i+c&&a>r+c||t-c>a&&i-c>a&&r-c>a)return!1;var h=C.quadraticProjectPoint(t,e,i,n,r,o,a,l,null);return c/2>=h}function l(e,i,n,r,o,s,a,l,c){if(0===a)return!1;var h=Math.max(a,5);l-=e,c-=i;var d=Math.sqrt(l*l+c*c);if(d-h>n||n>d+h)return!1;if(Math.abs(r-o)>=A)return!0;if(s){var u=r;r=t(o),o=t(u)}else r=t(r),o=t(o);if(r>o)o+=A;var f=Math.atan2(c,l);if(0>f)f+=A;return f>=r&&o>=f||f+A>=r&&o>=f+A}function c(t,e,i,n){for(var e=Math.max(e,10),r=0,s=t.length-1;s>r;r++){var a=t[r][0],l=t[r][1],c=t[r+1][0],h=t[r+1][1];if(o(a,l,c,h,e,i,n))return!0}return!1}function h(t,e,i,n,r,o){var s=(r-t)*(r-t)+(o-e)*(o-e);return n*n>s&&s>i*i}function d(t,e,i,n,r,o){return r>=t&&t+i>=r&&o>=e&&e+n>=o}function u(t,e,i,n,r){return i*i>(n-t)*(n-t)+(r-e)*(r-e)}function f(t,e,i,n,r,o,s,a,c){return l(t,e,(i+n)/2,r,o,s,n-i,a,c)}function p(t,e,i){for(var n=t.length,r=0,o=0,s=n-1;n>o;o++){var a=t[s][0],l=t[s][1],c=t[o][0],h=t[o][1];r+=m(a,l,c,h,e,i),s=o}return 0!==r}function m(t,e,i,n,r,o){if(o>e&&o>n||e>o&&n>o)return 0;if(n==e)return 0;var s=e>n?1:-1,a=(o-e)/(n-e),l=a*(i-t)+t;return l>r?s:0}function g(){var t=P[0];P[0]=P[1],P[1]=t}function v(t,e,i,n,r,o,s,a,l,c){if(c>e&&c>n&&c>o&&c>a||e>c&&n>c&&o>c&&a>c)return 0;var h=C.cubicRootAt(e,n,o,a,c,M);if(0===h)return 0;else{for(var d,u,f=0,p=-1,m=0;h>m;m++){var v=M[m],y=C.cubicAt(t,i,r,s,v);if(!(l>y)){if(0>p){if(p=C.cubicExtrema(e,n,o,a,P),P[1]<P[0]&&p>1)g();if(d=C.cubicAt(e,n,o,a,P[0]),p>1)u=C.cubicAt(e,n,o,a,P[1])}if(2==p)if(v<P[0])f+=e>d?1:-1;else if(v<P[1])f+=d>u?1:-1;else f+=u>a?1:-1;else if(v<P[0])f+=e>d?1:-1;else f+=d>a?1:-1}else;}return f}}function y(t,e,i,n,r,o,s,a){if(a>e&&a>n&&a>o||e>a&&n>a&&o>a)return 0;var l=C.quadraticRootAt(e,n,o,a,M);if(0===l)return 0;else{var c=C.quadraticExtremum(e,n,o);if(c>=0&&1>=c){for(var h=0,d=C.quadraticAt(e,n,o,c),u=0;l>u;u++){var f=C.quadraticAt(t,i,r,M[u]);if(!(s>f))if(M[u]<c)h+=e>d?1:-1;else h+=d>o?1:-1;else;}return h}else{var f=C.quadraticAt(t,i,r,M[0]);if(s>f)return 0;else return e>o?1:-1}}}function _(e,i,n,r,o,s,a,l){if(l-=i,l>n||-n>l)return 0;var c=Math.sqrt(n*n-l*l);if(M[0]=-c,M[1]=c,Math.abs(r-o)>=A){r=0,o=A;var h=s?1:-1;if(a>=M[0]+e&&a<=M[1]+e)return h;else return 0}if(s){var c=r;r=t(o),o=t(c)}else r=t(r),o=t(o);if(r>o)o+=A;for(var d=0,u=0;2>u;u++){var f=M[u];if(f+e>a){var p=Math.atan2(l,f),h=s?1:-1;if(0>p)p=A+p;if(p>=r&&o>=p||p+A>=r&&o>=p+A){if(p>Math.PI/2&&p<1.5*Math.PI)h=-h;d+=h}}}return d}function b(t,e,i,n,r){var c=0,h=0,d=0,u=0,f=0,p=!0,g=!0;i=i||"fill";for(var b="stroke"===i||"both"===i,x="fill"===i||"both"===i,w=0;w<t.length;w++){var T=t[w],S=T.points;if(p||"M"===T.command){if(w>0){if(x)c+=m(h,d,u,f,n,r);if(0!==c)return!0}if(u=S[S.length-2],f=S[S.length-1],p=!1,g&&"A"!==T.command)g=!1,h=u,d=f}switch(T.command){case"M":h=S[0],d=S[1];break;case"L":if(b)if(o(h,d,S[0],S[1],e,n,r))return!0;if(x)c+=m(h,d,S[0],S[1],n,r);h=S[0],d=S[1];break;case"C":if(b)if(s(h,d,S[0],S[1],S[2],S[3],S[4],S[5],e,n,r))return!0;if(x)c+=v(h,d,S[0],S[1],S[2],S[3],S[4],S[5],n,r);h=S[4],d=S[5];break;case"Q":if(b)if(a(h,d,S[0],S[1],S[2],S[3],e,n,r))return!0;if(x)c+=y(h,d,S[0],S[1],S[2],S[3],n,r);h=S[2],d=S[3];break;case"A":var C=S[0],k=S[1],$=S[2],E=S[3],I=S[4],L=S[5],A=Math.cos(I)*$+C,M=Math.sin(I)*E+k;if(!g)c+=m(h,d,A,M);else g=!1,u=A,f=M;var P=(n-C)*E/$+C;if(b)if(l(C,k,E,I,I+L,1-S[7],e,P,r))return!0;if(x)c+=_(C,k,E,I,I+L,1-S[7],P,r);h=Math.cos(I+L)*$+C,d=Math.sin(I+L)*E+k;break;case"z":if(b)if(o(h,d,u,f,e,n,r))return!0;p=!0}}if(x)c+=m(h,d,u,f,n,r);return 0!==c}function x(t,e){var i=t+":"+e;if(k[i])return k[i];if(T=T||S.getContext(),T.save(),e)T.font=e;t=(t+"").split("\n");for(var n=0,r=0,o=t.length;o>r;r++)n=Math.max(T.measureText(t[r]).width,n);if(T.restore(),k[i]=n,++E>L)E=0,k={};return n}function w(t,e){var i=t+":"+e;if($[i])return $[i];if(T=T||S.getContext(),T.save(),e)T.font=e;t=(t+"").split("\n");var n=(T.measureText("国").width+2)*t.length;if(T.restore(),$[i]=n,++I>L)I=0,$={};return n}var T,S=require("./util"),C=require("./curve"),k={},$={},E=0,I=0,L=5e3,A=2*Math.PI,M=[-1,-1,-1],P=[-1,-1];
return{isInside:e,isOutside:r,getTextWidth:x,getTextHeight:w,isInsidePath:b,isInsidePolygon:p,isInsideSector:f,isInsideCircle:u,isInsideLine:o,isInsideRect:d,isInsidePolyline:c,isInsideCubicStroke:s,isInsideQuadraticStroke:a}}),define("zrender/mixin/Transformable",["require","../tool/matrix","../tool/vector"],function(require){"use strict";function t(t){return t>-s&&s>t}function e(t){return t>s||-s>t}var i=require("../tool/matrix"),n=require("../tool/vector"),r=[0,0],o=i.translate,s=5e-5,a=function(){if(!this.position)this.position=[0,0];if("undefined"==typeof this.rotation)this.rotation=[0,0,0];if(!this.scale)this.scale=[1,1,0,0];this.needLocalTransform=!1,this.needTransform=!1};return a.prototype={constructor:a,updateNeedTransform:function(){this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)},updateTransform:function(){this.updateNeedTransform();var t=this.parent&&this.parent.needTransform;if(this.needTransform=this.needLocalTransform||t,this.needTransform){var n=this.transform||i.create();if(i.identity(n),this.needLocalTransform){var s=this.scale;if(e(s[0])||e(s[1])){r[0]=-s[2]||0,r[1]=-s[3]||0;var a=e(r[0])||e(r[1]);if(a)o(n,n,r);if(i.scale(n,n,s),a)r[0]=-r[0],r[1]=-r[1],o(n,n,r)}if(this.rotation instanceof Array){if(0!==this.rotation[0]){r[0]=-this.rotation[1]||0,r[1]=-this.rotation[2]||0;var a=e(r[0])||e(r[1]);if(a)o(n,n,r);if(i.rotate(n,n,this.rotation[0]),a)r[0]=-r[0],r[1]=-r[1],o(n,n,r)}}else if(0!==this.rotation)i.rotate(n,n,this.rotation);if(e(this.position[0])||e(this.position[1]))o(n,n,this.position)}if(t)if(this.needLocalTransform)i.mul(n,this.parent.transform,n);else i.copy(n,this.parent.transform);this.transform=n,this.invTransform=this.invTransform||i.create(),i.invert(this.invTransform,n)}},setTransform:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},lookAt:function(){var e=n.create();return function(r){if(!this.transform)this.transform=i.create();var o=this.transform;if(n.sub(e,r,this.position),!t(e[0])||!t(e[1])){n.normalize(e,e);var s=this.scale;o[2]=e[0]*s[1],o[3]=e[1]*s[1],o[0]=e[1]*s[0],o[1]=-e[0]*s[0],o[4]=this.position[0],o[5]=this.position[1],this.decomposeTransform()}}}(),decomposeTransform:function(){if(this.transform){var t=this.transform,i=t[0]*t[0]+t[1]*t[1],n=this.position,r=this.scale,o=this.rotation;if(e(i-1))i=Math.sqrt(i);var s=t[2]*t[2]+t[3]*t[3];if(e(s-1))s=Math.sqrt(s);n[0]=t[4],n[1]=t[5],r[0]=i,r[1]=s,r[2]=r[3]=0,o[0]=Math.atan2(-t[1]/s,t[0]/i),o[1]=o[2]=0}},transformCoordToLocal:function(t,e){var i=[t,e];if(this.needTransform&&this.invTransform)n.applyTransform(i,i,this.invTransform);return i}},a}),define("zrender/tool/color",["require","../tool/util"],function(require){function t(t){H=t}function e(){H=q}function i(t,e){return t=0|t,e=e||H,e[t%e.length]}function n(t){j=t}function r(){W=j}function o(){return j}function s(t,e,i,n,r,o,s){if(!F)F=B.getContext();for(var a=F.createRadialGradient(t,e,i,n,r,o),l=0,c=s.length;c>l;l++)a.addColorStop(s[l][0],s[l][1]);return a.__nonRecursion=!0,a}function a(t,e,i,n,r){if(!F)F=B.getContext();for(var o=F.createLinearGradient(t,e,i,n),s=0,a=r.length;a>s;s++)o.addColorStop(r[s][0],r[s][1]);return o.__nonRecursion=!0,o}function l(t,e,i){t=f(t),e=f(e),t=I(t),e=I(e);for(var n=[],r=(e[0]-t[0])/i,o=(e[1]-t[1])/i,s=(e[2]-t[2])/i,a=(e[3]-t[3])/i,l=0,c=t[0],d=t[1],u=t[2],p=t[3];i>l;l++)n[l]=h([M(Math.floor(c),[0,255]),M(Math.floor(d),[0,255]),M(Math.floor(u),[0,255]),p.toFixed(4)-0],"rgba"),c+=r,d+=o,u+=s,p+=a;return c=e[0],d=e[1],u=e[2],p=e[3],n[l]=h([c,d,u,p],"rgba"),n}function c(t,e){var i=[],n=t.length;if(void 0===e)e=20;if(1===n)i=l(t[0],t[0],e);else if(n>1)for(var r=0,o=n-1;o>r;r++){var s=l(t[r],t[r+1],e);if(o-1>r)s.pop();i=i.concat(s)}return i}function h(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=A(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);else if(e.indexOf("hs")>-1){var i=A(t.slice(1,3),function(t){return t+"%"});t[1]=i[0],t[2]=i[1]}if(e.indexOf("a")>-1){if(3===t.length)t.push(1);return t[3]=M(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"}return e+"("+t.slice(0,3).join(",")+")"}}function d(t){if(t=T(t),t.indexOf("rgba")<0)t=f(t);var e=[],i=0;return t.replace(/[\d.]+/g,function(t){if(3>i)t=0|t;else t=+t;e[i++]=t}),e}function u(t,e){if(!P(t))return t;var i=I(t),n=i[3];if("undefined"==typeof n)n=1;if(t.indexOf("hsb")>-1)i=z(i);else if(t.indexOf("hsl")>-1)i=D(i);if(e.indexOf("hsb")>-1||e.indexOf("hsv")>-1)i=N(i);else if(e.indexOf("hsl")>-1)i=R(i);return i[3]=n,h(i,e)}function f(t){return u(t,"rgba")}function p(t){return u(t,"rgb")}function m(t){return u(t,"hex")}function g(t){return u(t,"hsva")}function v(t){return u(t,"hsv")}function y(t){return u(t,"hsba")}function _(t){return u(t,"hsb")}function b(t){return u(t,"hsla")}function x(t){return u(t,"hsl")}function w(t){for(var e in U)if(m(U[e])===m(t))return e;return null}function T(t){return String(t).replace(/\s+/g,"")}function S(t){if(U[t])t=U[t];if(t=T(t),t=t.replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){t=parseInt(t.slice(1),16);var e=(3840&t)<<8,i=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(i<<4)+i+(n<<4)+n).toString(16).slice(1)}return t}function C(t,e){if(!P(t))return t;var i=e>0?1:-1;if("undefined"==typeof e)e=0;e=Math.abs(e)>1?1:Math.abs(e),t=p(t);for(var n=I(t),r=0;3>r;r++)if(1===i)n[r]=n[r]*(1-e)|0;else n[r]=(255-n[r])*e+n[r]|0;return"rgb("+n.join(",")+")"}function k(t){if(!P(t))return t;var e=I(f(t));return e=A(e,function(t){return 255-t}),h(e,"rgb")}function $(t,e,i){if(!P(t)||!P(e))return t;if("undefined"==typeof i)i=.5;i=1-M(i,[0,1]);for(var n=2*i-1,r=I(f(t)),o=I(f(e)),s=r[3]-o[3],a=((n*s===-1?n:(n+s)/(1+n*s))+1)/2,l=1-a,c=[],d=0;3>d;d++)c[d]=r[d]*a+o[d]*l;var u=r[3]*i+o[3]*(1-i);if(u=Math.max(0,Math.min(1,u)),1===r[3]&&1===o[3])return h(c,"rgb");else return c[3]=u,h(c,"rgba")}function E(){return"#"+(Math.random().toString(16)+"0000").slice(2,8)}function I(t){t=S(t);var e=t.match(V);if(null===e)throw new Error("The color format error");var i,n,r,o=[];if(e[2])i=e[2].replace("#","").split(""),r=[i[0]+i[1],i[2]+i[3],i[4]+i[5]],o=A(r,function(t){return M(parseInt(t,16),[0,255])});else if(e[4]){var s=e[4].split(",");if(n=s[3],r=s.slice(0,3),o=A(r,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),M(t,[0,255])}),"undefined"!=typeof n)o.push(M(parseFloat(n),[0,1]))}else if(e[5]||e[6]){var a=(e[5]||e[6]).split(","),l=parseInt(a[0],0)/360,c=a[1],h=a[2];if(n=a[3],o=A([c,h],function(t){return M(parseFloat(t)/100,[0,1])}),o.unshift(l),"undefined"!=typeof n)o.push(M(parseFloat(n),[0,1]))}return o}function L(t,e){if(!P(t))return t;if(null===e)e=1;var i=I(f(t));return i[3]=M(Number(e).toFixed(4),[0,1]),h(i,"rgba")}function A(t,e){if("function"!=typeof e)throw new TypeError;for(var i=t?t.length:0,n=0;i>n;n++)t[n]=e(t[n]);return t}function M(t,e){if(t<=e[0])t=e[0];else if(t>=e[1])t=e[1];return t}function P(t){return t instanceof Array||"string"==typeof t}function z(t){var e,i,n,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,i=255*s,n=255*s;else{var a=6*r;if(6===a)a=0;var l=0|a,c=s*(1-o),h=s*(1-o*(a-l)),d=s*(1-o*(1-(a-l))),u=0,f=0,p=0;if(0===l)u=s,f=d,p=c;else if(1===l)u=h,f=s,p=c;else if(2===l)u=c,f=s,p=d;else if(3===l)u=c,f=h,p=s;else if(4===l)u=d,f=c,p=s;else u=s,f=c,p=h;e=255*u,i=255*f,n=255*p}return[e,i,n]}function D(t){var e,i,n,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,i=255*s,n=255*s;else{var a;if(.5>s)a=s*(1+o);else a=s+o-o*s;var l=2*s-a;e=255*O(l,a,r+1/3),i=255*O(l,a,r),n=255*O(l,a,r-1/3)}return[e,i,n]}function O(t,e,i){if(0>i)i+=1;if(i>1)i-=1;if(1>6*i)return t+6*(e-t)*i;if(1>2*i)return e;if(2>3*i)return t+(e-t)*(2/3-i)*6;else return t}function N(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s,c=a;if(0===l)e=0,i=0;else{i=l/a;var h=((a-n)/6+l/2)/l,d=((a-r)/6+l/2)/l,u=((a-o)/6+l/2)/l;if(n===a)e=u-d;else if(r===a)e=1/3+h-u;else if(o===a)e=2/3+d-h;if(0>e)e+=1;if(e>1)e-=1}return e=360*e,i=100*i,c=100*c,[e,i,c]}function R(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s,c=(a+s)/2;if(0===l)e=0,i=0;else{if(.5>c)i=l/(a+s);else i=l/(2-a-s);var h=((a-n)/6+l/2)/l,d=((a-r)/6+l/2)/l,u=((a-o)/6+l/2)/l;if(n===a)e=u-d;else if(r===a)e=1/3+h-u;else if(o===a)e=2/3+d-h;if(0>e)e+=1;if(e>1)e-=1}return e=360*e,i=100*i,c=100*c,[e,i,c]}var F,B=require("../tool/util"),H=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],q=H,j="rgba(255,255,0,0.5)",W=j,V=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,U={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};return{customPalette:t,resetPalette:e,getColor:i,getHighlightColor:o,customHighlight:n,resetHighlight:r,getRadialGradient:s,getLinearGradient:a,getGradientColors:c,getStepColors:l,reverse:k,mix:$,lift:C,trim:T,random:E,toRGB:p,toRGBA:f,toHex:m,toHSL:x,toHSLA:b,toHSB:_,toHSBA:y,toHSV:v,toHSVA:g,toName:w,toColor:h,toArray:d,alpha:L,getData:I}}),define("zrender/shape/Base",["require","../tool/matrix","../tool/guid","../tool/util","../tool/log","../mixin/Transformable","../mixin/Eventful","../tool/area","../tool/color"],function(require){function t(t,i,n,r,o,s,a){if(o)t.font=o;t.textAlign=s,t.textBaseline=a;var l=e(i,n,r,o,s,a);i=(i+"").split("\n");var c=require("../tool/area").getTextHeight("国",o);switch(a){case"top":r=l.y;break;case"bottom":r=l.y+c;break;default:r=l.y+c/2}for(var h=0,d=i.length;d>h;h++)t.fillText(i[h],n,r),r+=c}function e(t,e,i,n,r,o){var s=require("../tool/area"),a=s.getTextWidth(t,n),l=s.getTextHeight("国",n);switch(t=(t+"").split("\n"),r){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(o){case"top":break;case"bottom":i-=l*t.length;break;default:i-=l*t.length/2}return{x:e,y:i,width:a,height:l*t.length}}var i=window.G_vmlCanvasManager,n=require("../tool/matrix"),r=require("../tool/guid"),o=require("../tool/util"),s=require("../tool/log"),a=require("../mixin/Transformable"),l=require("../mixin/Eventful"),c=function(t){t=t||{},this.id=t.id||r();for(var e in t)this[e]=t[e];this.style=this.style||{},this.highlightStyle=this.highlightStyle||null,this.parent=null,this.__dirty=!0,this.__clipShapes=[],a.call(this),l.call(this)};c.prototype.invisible=!1,c.prototype.ignore=!1,c.prototype.zlevel=0,c.prototype.draggable=!1,c.prototype.clickable=!1,c.prototype.hoverable=!0,c.prototype.z=0,c.prototype.brush=function(t,e){var i=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,i),i.brushType){case"both":t.fill();case"stroke":i.lineWidth>0&&t.stroke();break;default:t.fill()}this.drawText(t,i,this.style),this.afterBrush(t)},c.prototype.beforeBrush=function(t,e){var i=this.style;if(this.brushTypeOnly)i.brushType=this.brushTypeOnly;if(e)i=this.getHighlightStyle(i,this.highlightStyle||{},this.brushTypeOnly);if("stroke"==this.brushTypeOnly)i.strokeColor=i.strokeColor||i.color;return t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i},c.prototype.afterBrush=function(t){t.restore()};var h=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];c.prototype.setContext=function(t,e){for(var i=0,n=h.length;n>i;i++){var r=h[i][0],o=e[r],s=h[i][1];if("undefined"!=typeof o)t[s]=o}};var d=n.create();return c.prototype.doClip=function(t){if(this.__clipShapes&&!i)for(var e=0;e<this.__clipShapes.length;e++){var r=this.__clipShapes[e];if(r.needTransform){var o=r.transform;n.invert(d,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),r.buildPath(t,r.style),t.clip(),r.needTransform){var o=d;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}},c.prototype.getHighlightStyle=function(t,e,i){var n={};for(var r in t)n[r]=t[r];var o=require("../tool/color"),s=o.getHighlightColor();if("stroke"!=t.brushType)n.strokeColor=s,n.lineWidth=(t.lineWidth||1)+this.getHighlightZoom(),n.brushType="both";else if("stroke"!=i)n.strokeColor=s,n.lineWidth=(t.lineWidth||1)+this.getHighlightZoom();else n.strokeColor=e.strokeColor||o.mix(t.strokeColor,o.toRGB(s));for(var r in e)if("undefined"!=typeof e[r])n[r]=e[r];return n},c.prototype.getHighlightZoom=function(){return"text"!=this.type?6:2},c.prototype.drift=function(t,e){this.position[0]+=t,this.position[1]+=e},c.prototype.buildPath=function(t,e){s("buildPath not implemented in "+this.type)},c.prototype.getRect=function(t){s("getRect not implemented in "+this.type)},c.prototype.isCover=function(t,e){var i=this.transformCoordToLocal(t,e);if(t=i[0],e=i[1],this.isCoverRect(t,e))return require("../tool/area").isInside(this,this.style,t,e);else return!1},c.prototype.isCoverRect=function(t,e){var i=this.style.__rect;if(!i)i=this.style.__rect=this.getRect(this.style);return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},c.prototype.drawText=function(e,i,n){if("undefined"!=typeof i.text&&i.text!==!1){var r=i.textColor||i.color||i.strokeColor;e.fillStyle=r;var o,s,a,l,c=10,h=i.textPosition||this.textPosition||"top";switch(h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var d=(n||i).__rect||this.getRect(n||i);switch(h){case"inside":if(a=d.x+d.width/2,l=d.y+d.height/2,o="center",s="middle","stroke"!=i.brushType&&r==i.color)e.fillStyle="#fff";break;case"left":a=d.x-c,l=d.y+d.height/2,o="end",s="middle";break;case"right":a=d.x+d.width+c,l=d.y+d.height/2,o="start",s="middle";break;case"top":a=d.x+d.width/2,l=d.y-c,o="center",s="bottom";break;case"bottom":a=d.x+d.width/2,l=d.y+d.height+c,o="center",s="top"}}break;case"start":case"end":var u=i.pointList||[[i.xStart||0,i.yStart||0],[i.xEnd||0,i.yEnd||0]],f=u.length;if(2>f)return;var p,m,g,v;switch(h){case"start":p=u[1][0],m=u[0][0],g=u[1][1],v=u[0][1];break;case"end":p=u[f-2][0],m=u[f-1][0],g=u[f-2][1],v=u[f-1][1]}a=m,l=v;var y=Math.atan((g-v)/(m-p))/Math.PI*180;if(0>m-p)y+=180;else if(0>g-v)y+=360;if(c=5,y>=30&&150>=y)o="center",s="bottom",l-=c;else if(y>150&&210>y)o="right",s="middle",a-=c;else if(y>=210&&330>=y)o="center",s="top",l+=c;else o="left",s="middle",a+=c;break;case"specific":a=i.textX||0,l=i.textY||0,o="start",s="middle"}if(null!=a&&null!=l)t(e,i.text,a,l,i.textFont,i.textAlign||o,i.textBaseline||s)}},c.prototype.modSelf=function(){if(this.__dirty=!0,this.style)this.style.__rect=null;if(this.highlightStyle)this.highlightStyle.__rect=null},c.prototype.isSilent=function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)},o.merge(c.prototype,a.prototype,!0),o.merge(c.prototype,l.prototype,!0),c}),define("zrender/shape/Text",["require","../tool/area","./Base","../tool/util"],function(require){var t=require("../tool/area"),e=require("./Base"),i=function(t){e.call(this,t)};return i.prototype={type:"text",brush:function(e,i){var n=this.style;if(i)n=this.getHighlightStyle(n,this.highlightStyle||{});if("undefined"!=typeof n.text&&n.text!==!1){if(e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont)e.font=n.textFont;e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var r,o=(n.text+"").split("\n"),s=t.getTextHeight("国",n.textFont),a=this.getRect(n),l=n.x;if("top"==n.textBaseline)r=a.y;else if("bottom"==n.textBaseline)r=a.y+s;else r=a.y+s/2;for(var c=0,h=o.length;h>c;c++){if(n.maxWidth)switch(n.brushType){case"fill":e.fillText(o[c],l,r,n.maxWidth);break;case"stroke":e.strokeText(o[c],l,r,n.maxWidth);break;case"both":e.fillText(o[c],l,r,n.maxWidth),e.strokeText(o[c],l,r,n.maxWidth);break;default:e.fillText(o[c],l,r,n.maxWidth)}else switch(n.brushType){case"fill":e.fillText(o[c],l,r);break;case"stroke":e.strokeText(o[c],l,r);break;case"both":e.fillText(o[c],l,r),e.strokeText(o[c],l,r);break;default:e.fillText(o[c],l,r)}r+=s}e.restore()}},getRect:function(e){if(e.__rect)return e.__rect;var i=t.getTextWidth(e.text,e.textFont),n=t.getTextHeight(e.text,e.textFont),r=e.x;if("end"==e.textAlign||"right"==e.textAlign)r-=i;else if("center"==e.textAlign)r-=i/2;var o;if("top"==e.textBaseline)o=e.y;else if("bottom"==e.textBaseline)o=e.y-n;else o=e.y-n/2;return e.__rect={x:r,y:o,width:i,height:n},e.__rect}},require("../tool/util").inherits(i,e),i}),define("zrender/shape/Rectangle",["require","./Base","../tool/util"],function(require){var t=require("./Base"),e=function(e){t.call(this,e)};return e.prototype={type:"rectangle",_buildRadiusPath:function(t,e){var i,n,r,o,s=e.x,a=e.y,l=e.width,c=e.height,h=e.radius;if("number"==typeof h)i=n=r=o=h;else if(h instanceof Array)if(1===h.length)i=n=r=o=h[0];else if(2===h.length)i=r=h[0],n=o=h[1];else if(3===h.length)i=h[0],n=o=h[1],r=h[2];else i=h[0],n=h[1],r=h[2],o=h[3];else i=n=r=o=0;var d;if(i+n>l)d=i+n,i*=l/d,n*=l/d;if(r+o>l)d=r+o,r*=l/d,o*=l/d;if(n+r>c)d=n+r,n*=c/d,r*=c/d;if(i+o>c)d=i+o,i*=c/d,o*=c/d;t.moveTo(s+i,a),t.lineTo(s+l-n,a),0!==n&&t.quadraticCurveTo(s+l,a,s+l,a+n),t.lineTo(s+l,a+c-r),0!==r&&t.quadraticCurveTo(s+l,a+c,s+l-r,a+c),t.lineTo(s+o,a+c),0!==o&&t.quadraticCurveTo(s,a+c,s,a+c-o),t.lineTo(s,a+i),0!==i&&t.quadraticCurveTo(s,a,s+i,a)},buildPath:function(t,e){if(!e.radius)t.moveTo(e.x,e.y),t.lineTo(e.x+e.width,e.y),t.lineTo(e.x+e.width,e.y+e.height),t.lineTo(e.x,e.y+e.height),t.lineTo(e.x,e.y);else this._buildRadiusPath(t,e);t.closePath()},getRect:function(t){if(t.__rect)return t.__rect;var e;if("stroke"==t.brushType||"fill"==t.brushType)e=t.lineWidth||1;else e=0;return t.__rect={x:Math.round(t.x-e/2),y:Math.round(t.y-e/2),width:t.width+e,height:t.height+e},t.__rect}},require("../tool/util").inherits(e,t),e}),define("zrender/loadingEffect/Base",["require","../tool/util","../shape/Text","../shape/Rectangle"],function(require){function t(t){this.setOptions(t)}var e=require("../tool/util"),i=require("../shape/Text"),n=require("../shape/Rectangle"),r="Loading...",o="normal 16px Arial";return t.prototype.createTextShape=function(t){return new i({highlightStyle:e.merge({x:this.canvasWidth/2,y:this.canvasHeight/2,text:r,textAlign:"center",textBaseline:"middle",textFont:o,color:"#333",brushType:"fill"},t,!0)})},t.prototype.createBackgroundShape=function(t){return new n({highlightStyle:{x:0,y:0,width:this.canvasWidth,height:this.canvasHeight,brushType:"fill",color:t}})},t.prototype.start=function(t){function e(e){t.storage.addHover(e)}function i(){t.refreshHover()}this.canvasWidth=t._width,this.canvasHeight=t._height,this.loadingTimer=this._start(e,i)},t.prototype._start=function(){return setInterval(function(){},1e4)},t.prototype.stop=function(){clearInterval(this.loadingTimer)},t.prototype.setOptions=function(t){this.options=t||{}},t.prototype.adjust=function(t,e){if(t<=e[0])t=e[0];else if(t>=e[1])t=e[1];return t},t.prototype.getLocation=function(t,e,i){var n=null!=t.x?t.x:"center";switch(n){case"center":n=Math.floor((this.canvasWidth-e)/2);break;case"left":n=0;break;case"right":n=this.canvasWidth-e}var r=null!=t.y?t.y:"center";switch(r){case"center":r=Math.floor((this.canvasHeight-i)/2);break;case"top":r=0;break;case"bottom":r=this.canvasHeight-i}return{x:n,y:r,width:e,height:i}},t}),define("zrender/Layer",["require","./mixin/Transformable","./tool/util","./config"],function(require){function t(){return!1}function e(t,e,i){var n=document.createElement(e),r=i.getWidth(),s=i.getHeight();return n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=r+"px",n.style.height=s+"px",n.width=r*o.devicePixelRatio,n.height=s*o.devicePixelRatio,n.setAttribute("data-zr-dom-id",t),n}var i=require("./mixin/Transformable"),n=require("./tool/util"),r=window.G_vmlCanvasManager,o=require("./config"),s=function(n,s){this.id=n,this.dom=e(n,"canvas",s),this.dom.onselectstart=t,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",this.dom.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",this.dom.className=o.elementClassName,r&&r.initElement(this.dom),this.domBack=null,this.ctxBack=null,this.painter=s,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=1/0,this.minZoom=0,i.call(this)};return s.prototype.initContext=function(){this.ctx=this.dom.getContext("2d");var t=o.devicePixelRatio;if(1!=t)this.ctx.scale(t,t)},s.prototype.createBackBuffer=function(){if(!r){this.domBack=e("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d");var t=o.devicePixelRatio;if(1!=t)this.ctxBack.scale(t,t)}},s.prototype.resize=function(t,e){var i=o.devicePixelRatio;if(this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*i),this.dom.setAttribute("height",e*i),1!=i)this.ctx.scale(i,i);if(this.domBack)if(this.domBack.setAttribute("width",t*i),this.domBack.setAttribute("height",e*i),1!=i)this.ctxBack.scale(i,i)},s.prototype.clear=function(){var t=this.dom,e=this.ctx,i=t.width,n=t.height,s=this.clearColor&&!r,a=this.motionBlur&&!r,l=this.lastFrameAlpha,c=o.devicePixelRatio;if(a){if(!this.domBack)this.createBackBuffer();this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,i/c,n/c)}if(e.clearRect(0,0,i/c,n/c),s)e.save(),e.fillStyle=this.clearColor,e.fillRect(0,0,i/c,n/c),e.restore();if(a){var h=this.domBack;e.save(),e.globalAlpha=l,e.drawImage(h,0,0,i/c,n/c),e.restore()}},n.merge(s.prototype,i.prototype),s}),define("zrender/shape/Image",["require","./Base","../tool/util"],function(require){var t=require("./Base"),e=function(e){t.call(this,e)};return e.prototype={type:"image",brush:function(t,e,i){var n=this.style||{};if(e)n=this.getHighlightStyle(n,this.highlightStyle||{});var r=n.image,o=this;if(!this._imageCache)this._imageCache={};if("string"==typeof r){var s=r;if(this._imageCache[s])r=this._imageCache[s];else r=new Image,r.onload=function(){r.onload=null,o.modSelf(),i()},r.src=s,this._imageCache[s]=r}if(r){if("IMG"==r.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=r.readyState)return}else if(!r.complete)return;var a=n.width||r.width,l=n.height||r.height,c=n.x,h=n.y;if(!r.width||!r.height)return;if(t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.sWidth&&n.sHeight){var d=n.sx||0,u=n.sy||0;t.drawImage(r,d,u,n.sWidth,n.sHeight,c,h,a,l)}else if(n.sx&&n.sy){var d=n.sx,u=n.sy,f=a-d,p=l-u;t.drawImage(r,d,u,f,p,c,h,a,l)}else t.drawImage(r,c,h,a,l);if(!n.width)n.width=a;if(!n.height)n.height=l;if(!this.style.width)this.style.width=a;if(!this.style.height)this.style.height=l;this.drawText(t,n,this.style),t.restore()}},getRect:function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},clearCache:function(){this._imageCache={}}},require("../tool/util").inherits(e,t),e}),define("zrender/Painter",["require","./config","./tool/util","./tool/log","./loadingEffect/Base","./Layer","./shape/Image"],function(require){"use strict";function t(){return!1}function e(){}function i(t){if(!t)return!1;if(t.isBuildin)return!0;if("function"!=typeof t.resize||"function"!=typeof t.refresh)return!1;else return!0}var n=require("./config"),r=require("./tool/util"),o=require("./tool/log"),s=require("./loadingEffect/Base"),a=require("./Layer"),l=function(e,i){this.root=e,e.style["-webkit-tap-highlight-color"]="transparent",e.style["-webkit-user-select"]="none",e.style["user-select"]="none",e.style["-webkit-touch-callout"]="none",this.storage=i,e.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",e.appendChild(r),this._layers={},this._zlevelList=[],this._layerConfig={},this._loadingEffect=new s({}),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=document.createElement("div"),this._bgDom.style.cssText=["position:absolute;left:0px;top:0px;width:",this._width,"px;height:",this._height+"px;","-webkit-user-select:none;user-select;none;","-webkit-touch-callout:none;"].join(""),this._bgDom.setAttribute("data-zr-dom-id","bg"),this._bgDom.className=n.elementClassName,r.appendChild(this._bgDom),this._bgDom.onselectstart=t;var o=new a("_zrender_hover_",this);this._layers.hover=o,r.appendChild(o.dom),o.initContext(),o.dom.onselectstart=t,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",this.refreshNextFrame=null};return l.prototype.render=function(t){if(this.isLoading())this.hideLoading();return this.refresh(t,!0),this},l.prototype.refresh=function(t,e){var i=this.storage.getShapeList(!0);this._paintList(i,e);for(var n=0;n<this._zlevelList.length;n++){var r=this._zlevelList[n],o=this._layers[r];if(!o.isBuildin&&o.refresh)o.refresh()}if("function"==typeof t)t();return this},l.prototype._preProcessLayer=function(t){t.unusedCount++,t.updateTransform()},l.prototype._postProcessLayer=function(t){if(t.dirty=!1,1==t.unusedCount)t.clear()},l.prototype._paintList=function(t,e){if("undefined"==typeof e)e=!1;this._updateLayerStatus(t);var i,r,s;this.eachBuildinLayer(this._preProcessLayer);for(var a=0,l=t.length;l>a;a++){var c=t[a];if(r!==c.zlevel){if(i){if(i.needTransform)s.restore();s.flush&&s.flush()}if(r=c.zlevel,i=this.getLayer(r),!i.isBuildin)o("ZLevel "+r+" has been used by unkown layer "+i.id);if(s=i.ctx,i.unusedCount=0,i.dirty||e)i.clear();if(i.needTransform)s.save(),i.setTransform(s)}if((i.dirty||e)&&!c.invisible)if(!c.onbrush||c.onbrush&&!c.onbrush(s,!1))if(n.catchBrushException)try{c.brush(s,!1,this.refreshNextFrame)}catch(h){o(h,"brush error of "+c.type,c)}else c.brush(s,!1,this.refreshNextFrame);c.__dirty=!1}if(i){if(i.needTransform)s.restore();s.flush&&s.flush()}this.eachBuildinLayer(this._postProcessLayer)},l.prototype.getLayer=function(t){var e=this._layers[t];if(!e){if(e=new a(t,this),e.isBuildin=!0,this._layerConfig[t])r.merge(e,this._layerConfig[t],!0);e.updateTransform(),this.insertLayer(t,e),e.initContext()}return e},l.prototype.insertLayer=function(t,e){if(this._layers[t])return void o("ZLevel "+t+" has been used already");if(!i(e))return void o("Layer of zlevel "+t+" is not valid");var n=this._zlevelList.length,r=null,s=-1;if(n>0&&t>this._zlevelList[0]){for(s=0;n-1>s&&!(this._zlevelList[s]<t&&this._zlevelList[s+1]>t);s++);r=this._layers[this._zlevelList[s]]}this._zlevelList.splice(s+1,0,t);var a=r?r.dom:this._bgDom;if(a.nextSibling)a.parentNode.insertBefore(e.dom,a.nextSibling);else a.parentNode.appendChild(e.dom);this._layers[t]=e},l.prototype.eachLayer=function(t,e){for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];t.call(e,this._layers[n],n)}},l.prototype.eachBuildinLayer=function(t,e){for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i],r=this._layers[n];if(r.isBuildin)t.call(e,r,n)}},l.prototype.eachOtherLayer=function(t,e){for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i],r=this._layers[n];if(!r.isBuildin)t.call(e,r,n)}},l.prototype.getLayers=function(){return this._layers},l.prototype._updateLayerStatus=function(t){var e=this._layers,i={};this.eachBuildinLayer(function(t,e){i[e]=t.elCount,t.elCount=0});for(var n=0,r=t.length;r>n;n++){var o=t[n],s=o.zlevel,a=e[s];if(a){if(a.elCount++,a.dirty)continue;a.dirty=o.__dirty}}this.eachBuildinLayer(function(t,e){if(i[e]!==t.elCount)t.dirty=!0})},l.prototype.refreshShapes=function(t,e){for(var i=0,n=t.length;n>i;i++){var r=t[i];r.modSelf()}return this.refresh(e),this},l.prototype.setLoadingEffect=function(t){return this._loadingEffect=t,this},l.prototype.clear=function(){return this.eachBuildinLayer(this._clearLayer),this},l.prototype._clearLayer=function(t){t.clear()},l.prototype.modLayer=function(t,e){if(e){if(!this._layerConfig[t])this._layerConfig[t]=e;else r.merge(this._layerConfig[t],e,!0);var i=this._layers[t];if(i)r.merge(i,this._layerConfig[t],!0)}},l.prototype.delLayer=function(t){var e=this._layers[t];if(e)this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice(r.indexOf(this._zlevelList,t),1)},l.prototype.refreshHover=function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,i=t.length;i>e;e++)this._brushHover(t[e]);var n=this._layers.hover.ctx;return n.flush&&n.flush(),this.storage.delHover(),this},l.prototype.clearHover=function(){var t=this._layers.hover;return t&&t.clear(),this},l.prototype.showLoading=function(t){return this._loadingEffect&&this._loadingEffect.stop(),
t&&this.setLoadingEffect(t),this._loadingEffect.start(this),this.loading=!0,this},l.prototype.hideLoading=function(){return this._loadingEffect.stop(),this.clearHover(),this.loading=!1,this},l.prototype.isLoading=function(){return this.loading},l.prototype.resize=function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),i=this._getHeight();if(t.style.display="",this._width!=e||i!=this._height){this._width=e,this._height=i,t.style.width=e+"px",t.style.height=i+"px";for(var n in this._layers)this._layers[n].resize(e,i);this.refresh(null,!0)}return this},l.prototype.clearLayer=function(t){var e=this._layers[t];if(e)e.clear()},l.prototype.dispose=function(){if(this.isLoading())this.hideLoading();this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},l.prototype.getDomHover=function(){return this._layers.hover.dom},l.prototype.toDataURL=function(t,e,i){if(window.G_vmlCanvasManager)return null;var r=new a("image",this);this._bgDom.appendChild(r.dom),r.initContext();var s=r.ctx;r.clearColor=e||"#fff",r.clear();var l=this;this.storage.iterShape(function(t){if(!t.invisible)if(!t.onbrush||t.onbrush&&!t.onbrush(s,!1))if(n.catchBrushException)try{t.brush(s,!1,l.refreshNextFrame)}catch(e){o(e,"brush error of "+t.type,t)}else t.brush(s,!1,l.refreshNextFrame)},{normal:"up",update:!0});var c=r.dom.toDataURL(t,i);return s=null,this._bgDom.removeChild(r.dom),c},l.prototype.getWidth=function(){return this._width},l.prototype.getHeight=function(){return this._height},l.prototype._getWidth=function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0},l.prototype._getHeight=function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0},l.prototype._brushHover=function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var i=this.getLayer(t.zlevel);if(i.needTransform)e.save(),i.setTransform(e);if(n.catchBrushException)try{t.brush(e,!0,this.refreshNextFrame)}catch(r){o(r,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.refreshNextFrame);if(i.needTransform)e.restore()}},l.prototype._shapeToImage=function(t,e,i,n,r){var o=document.createElement("canvas"),s=o.getContext("2d");o.style.width=i+"px",o.style.height=n+"px",o.setAttribute("width",i*r),o.setAttribute("height",n*r),s.clearRect(0,0,i*r,n*r);var a={position:e.position,rotation:e.rotation,scale:e.scale};if(e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e)e.brush(s,!1);var l=require("./shape/Image"),c=new l({id:t,style:{x:0,y:0,image:o}});if(null!=a.position)c.position=e.position=a.position;if(null!=a.rotation)c.rotation=e.rotation=a.rotation;if(null!=a.scale)c.scale=e.scale=a.scale;return c},l.prototype._createShapeToImageProcessor=function(){if(window.G_vmlCanvasManager)return e;var t=this;return function(e,i,r,o){return t._shapeToImage(e,i,r,o,n.devicePixelRatio)}},l}),define("zrender/Group",["require","./tool/guid","./tool/util","./mixin/Transformable","./mixin/Eventful"],function(require){var t=require("./tool/guid"),e=require("./tool/util"),i=require("./mixin/Transformable"),n=require("./mixin/Eventful"),r=function(e){e=e||{},this.id=e.id||t();for(var r in e)this[r]=e[r];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,i.call(this),n.call(this)};return r.prototype.ignore=!1,r.prototype.children=function(){return this._children.slice()},r.prototype.childAt=function(t){return this._children[t]},r.prototype.addChild=function(t){if(t!=this)if(t.parent!=this){if(t.parent)t.parent.removeChild(t);if(this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage)if(this._storage.addToMap(t),t instanceof r)t.addChildrenToStorage(this._storage)}},r.prototype.removeChild=function(t){var i=e.indexOf(this._children,t);if(i>=0)this._children.splice(i,1);if(t.parent=null,this._storage)if(this._storage.delFromMap(t.id),t instanceof r)t.delChildrenFromStorage(this._storage)},r.prototype.clearChildren=function(){for(var t=0;t<this._children.length;t++){var e=this._children[t];if(this._storage)if(this._storage.delFromMap(e.id),e instanceof r)e.delChildrenFromStorage(this._storage)}this._children.length=0},r.prototype.eachChild=function(t,e){for(var i=!!e,n=0;n<this._children.length;n++){var r=this._children[n];if(i)t.call(e,r);else t(r)}},r.prototype.traverse=function(t,e){for(var i=!!e,n=0;n<this._children.length;n++){var r=this._children[n];if(i)t.call(e,r);else t(r);if("group"===r.type)r.traverse(t,e)}},r.prototype.addChildrenToStorage=function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];if(t.addToMap(i),i instanceof r)i.addChildrenToStorage(t)}},r.prototype.delChildrenFromStorage=function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];if(t.delFromMap(i.id),i instanceof r)i.delChildrenFromStorage(t)}},r.prototype.modSelf=function(){this.__dirty=!0},e.merge(r.prototype,i.prototype,!0),e.merge(r.prototype,n.prototype,!0),r}),define("zrender/Storage",["require","./tool/util","./Group"],function(require){"use strict";function t(t,e){if(t.zlevel==e.zlevel)if(t.z==e.z)return t.__renderidx-e.__renderidx;else return t.z-e.z;return t.zlevel-e.zlevel}var e=require("./tool/util"),i=require("./Group"),n={hover:!1,normal:"down",update:!1},r=function(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0};return r.prototype.iterShape=function(t,e){if(!e)e=n;if(e.hover)for(var i=0,r=this._hoverElements.length;r>i;i++){var o=this._hoverElements[i];if(o.updateTransform(),t(o))return this}if(e.update)this.updateShapeList();switch(e.normal){case"down":for(var r=this._shapeList.length;r--;)if(t(this._shapeList[r]))return this;break;default:for(var i=0,r=this._shapeList.length;r>i;i++)if(t(this._shapeList[i]))return this}return this},r.prototype.getHoverShapes=function(e){for(var i=[],n=0,r=this._hoverElements.length;r>n;n++){i.push(this._hoverElements[n]);var o=this._hoverElements[n].hoverConnect;if(o){var s;o=o instanceof Array?o:[o];for(var a=0,l=o.length;l>a;a++)if(s=o[a].id?o[a]:this.get(o[a]))i.push(s)}}if(i.sort(t),e)for(var n=0,r=i.length;r>n;n++)i[n].updateTransform();return i},r.prototype.getShapeList=function(t){if(t)this.updateShapeList();return this._shapeList},r.prototype.updateShapeList=function(){this._shapeListOffset=0;for(var e=0,i=this._roots.length;i>e;e++){var n=this._roots[e];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var e=0,i=this._shapeList.length;i>e;e++)this._shapeList[e].__renderidx=e;this._shapeList.sort(t)},r.prototype._updateAndAddShape=function(t,e){if(!t.ignore){if(t.updateTransform(),t.clipShape)if(t.clipShape.parent=t,t.clipShape.updateTransform(),e)e=e.slice(),e.push(t.clipShape);else e=[t.clipShape];if("group"==t.type){for(var i=0;i<t._children.length;i++){var n=t._children[i];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},r.prototype.mod=function(t,i){if("string"==typeof t)t=this._elements[t];if(t)if(t.modSelf(),i)if(i.parent||i._storage||i.__clipShapes){var n={};for(var r in i)if("parent"!==r&&"_storage"!==r&&"__clipShapes"!==r){if(i.hasOwnProperty(r))n[r]=i[r]}else;e.merge(t,n,!0)}else e.merge(t,i,!0);return this},r.prototype.drift=function(t,e,i){var n=this._elements[t];if(n){if(n.needTransform=!0,"horizontal"===n.draggable)i=0;else if("vertical"===n.draggable)e=0;if(!n.ondrift||n.ondrift&&!n.ondrift(e,i))n.drift(e,i)}return this},r.prototype.addHover=function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this},r.prototype.delHover=function(){return this._hoverElements=[],this},r.prototype.hasHoverShape=function(){return this._hoverElements.length>0},r.prototype.addRoot=function(t){if(!this._elements[t.id]){if(t instanceof i)t.addChildrenToStorage(this);this.addToMap(t),this._roots.push(t)}},r.prototype.delRoot=function(t){if("undefined"==typeof t){for(var n=0;n<this._roots.length;n++){var r=this._roots[n];if(r instanceof i)r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],void(this._shapeListOffset=0)}if(!(t instanceof Array)){var o;if("string"==typeof t)o=this._elements[t];else o=t;var s=e.indexOf(this._roots,o);if(s>=0)if(this.delFromMap(o.id),this._roots.splice(s,1),o instanceof i)o.delChildrenFromStorage(this)}else for(var n=0,a=t.length;a>n;n++)this.delRoot(t[n])},r.prototype.addToMap=function(t){if(t instanceof i)t._storage=this;return t.modSelf(),this._elements[t.id]=t,this},r.prototype.get=function(t){return this._elements[t]},r.prototype.delFromMap=function(t){var e=this._elements[t];if(e)if(delete this._elements[t],e instanceof i)e._storage=null;return this},r.prototype.dispose=function(){this._elements=this._renderList=this._roots=this._hoverElements=null},r}),define("zrender/animation/easing",[],function(){var t={Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){if((t*=2)<1)return.5*t*t;else return-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){if((t*=2)<1)return.5*t*t*t;else return.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){if((t*=2)<1)return.5*t*t*t*t;else return-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){if((t*=2)<1)return.5*t*t*t*t*t;else return.5*((t-=2)*t*t*t*t+2)},SinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},SinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},SinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){if(0===t)return 0;if(1===t)return 1;if((t*=2)<1)return.5*Math.pow(1024,t-1);else return.5*(-Math.pow(2,-10*(t-1))+2)},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){if((t*=2)<1)return-.5*(Math.sqrt(1-t*t)-1);else return.5*(Math.sqrt(1-(t-=2)*t)+1)},ElasticIn:function(t){var e,i=.1,n=.4;if(0===t)return 0;if(1===t)return 1;if(!i||1>i)i=1,e=n/4;else e=n*Math.asin(1/i)/(2*Math.PI);return-(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},ElasticOut:function(t){var e,i=.1,n=.4;if(0===t)return 0;if(1===t)return 1;if(!i||1>i)i=1,e=n/4;else e=n*Math.asin(1/i)/(2*Math.PI);return i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1},ElasticInOut:function(t){var e,i=.1,n=.4;if(0===t)return 0;if(1===t)return 1;if(!i||1>i)i=1,e=n/4;else e=n*Math.asin(1/i)/(2*Math.PI);if((t*=2)<1)return-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n));else return i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1},BackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},BackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},BackInOut:function(t){var e=2.5949095;if((t*=2)<1)return.5*(t*t*((e+1)*t-e));else return.5*((t-=2)*t*((e+1)*t+e)+2)},BounceIn:function(e){return 1-t.BounceOut(1-e)},BounceOut:function(t){if(1/2.75>t)return 7.5625*t*t;else if(2/2.75>t)return 7.5625*(t-=1.5/2.75)*t+.75;else if(2.5/2.75>t)return 7.5625*(t-=2.25/2.75)*t+.9375;else return 7.5625*(t-=2.625/2.75)*t+.984375},BounceInOut:function(e){if(.5>e)return.5*t.BounceIn(2*e);else return.5*t.BounceOut(2*e-1)+.5}};return t}),define("zrender/animation/Clip",["require","./easing"],function(require){function t(t){if(this._targetPool=t.target||{},!(this._targetPool instanceof Array))this._targetPool=[this._targetPool];this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop="undefined"==typeof t.loop?!1:t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}var e=require("./easing");return t.prototype={step:function(t){var i=(t-this._startTime)/this._life;if(!(0>i)){i=Math.min(i,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,r="function"==typeof n?n(i):i;if(this.fire("frame",r),1==i)if(this.loop)return this.restart(),"restart";else return this.__needsRemove=!0,"destroy";return null}},restart:function(){var t=(new Date).getTime(),e=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap,this.__needsRemove=!1},fire:function(t,e){for(var i=0,n=this._targetPool.length;n>i;i++)if(this["on"+t])this["on"+t](this._targetPool[i],e)},constructor:t},t}),define("zrender/animation/Animation",["require","./Clip","../tool/color","../tool/util","../tool/event"],function(require){"use strict";function t(t,e){return t[e]}function e(t,e,i){t[e]=i}function i(t,e,i){return(e-t)*i+t}function n(t,e,n,r,o){var s=t.length;if(1==o)for(var a=0;s>a;a++)r[a]=i(t[a],e[a],n);else for(var l=t[0].length,a=0;s>a;a++)for(var c=0;l>c;c++)r[a][c]=i(t[a][c],e[a][c],n)}function r(t){switch(typeof t){case"undefined":case"string":return!1}return"undefined"!=typeof t.length}function o(t,e,i,n,r,o,a,l,c){var h=t.length;if(1==c)for(var d=0;h>d;d++)l[d]=s(t[d],e[d],i[d],n[d],r,o,a);else for(var u=t[0].length,d=0;h>d;d++)for(var f=0;u>f;f++)l[d][f]=s(t[d][f],e[d][f],i[d][f],n[d][f],r,o,a)}function s(t,e,i,n,r,o,s){var a=.5*(i-t),l=.5*(n-e);return(2*(e-i)+a+l)*s+(-3*(e-i)-2*a-l)*o+a*r+e}function a(t){if(r(t)){var e=t.length;if(r(t[0])){for(var i=[],n=0;e>n;n++)i.push(p.call(t[n]));return i}else return p.call(t)}else return t}function l(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}var c=require("./Clip"),h=require("../tool/color"),d=require("../tool/util"),u=require("../tool/event").Dispatcher,f=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},p=Array.prototype.slice,m=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time=0,u.call(this)};m.prototype={add:function(t){this._clips.push(t)},remove:function(t){if(t.__inStep)t.__needsRemove=!0;else{var e=d.indexOf(this._clips,t);if(e>=0)this._clips.splice(e,1)}},_update:function(){for(var t=(new Date).getTime(),e=t-this._time,i=this._clips,n=i.length,r=[],o=[],s=0;n>s;s++){var a=i[s];a.__inStep=!0;var l=a.step(t);if(a.__inStep=!1,l)r.push(l),o.push(a)}for(var s=0;n>s;)if(i[s].__needsRemove)i[s]=i[n-1],i.pop(),n--;else s++;n=r.length;for(var s=0;n>s;s++)o[s].fire(r[s]);if(this._time=t,this.onframe(e),this.dispatch("frame",e),this.stage.update)this.stage.update()},start:function(){function t(){if(e._running)f(t),e._update()}var e=this;this._running=!0,this._time=(new Date).getTime(),f(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(t,e){e=e||{};var i=new g(t,e.loop,e.getter,e.setter);return i.animation=this,i},constructor:m},d.merge(m.prototype,u.prototype,!0);var g=function(i,n,r,o){this._tracks={},this._target=i,this._loop=n||!1,this._getter=r||t,this._setter=o||e,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};return g.prototype={when:function(t,e){for(var i in e){if(!this._tracks[i])if(this._tracks[i]=[],0!==t)this._tracks[i].push({time:0,value:a(this._getter(this._target,i))});this._tracks[i].push({time:parseInt(t,10),value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},start:function(t){var e=this,a=this._setter,d=this._getter,u="spline"===t,f=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,i=0;t>i;i++)e._doneList[i].call(e)}},p=function(p,m){var g=p.length;if(g){var v=p[0].value,y=r(v),_=!1,b=y&&r(v[0])?2:1;p.sort(function(t,e){return t.time-e.time});var x;if(g){x=p[g-1].time;for(var w=[],T=[],S=0;g>S;S++){w.push(p[S].time/x);var C=p[S].value;if("string"==typeof C){if(C=h.toArray(C),0===C.length)C[0]=C[1]=C[2]=0,C[3]=1;_=!0}T.push(C)}var k,S,$,E,I,L,A,M=0,P=0;if(_)var z=[0,0,0,0];var D=function(t,r){if(P>r){for(k=Math.min(M+1,g-1),S=k;S>=0&&!(w[S]<=r);S--);S=Math.min(S,g-2)}else{for(S=M;g>S&&!(w[S]>r);S++);S=Math.min(S-1,g-2)}M=S,P=r;var c=w[S+1]-w[S];if(0!==c){if($=(r-w[S])/c,u)if(I=T[S],E=T[0===S?S:S-1],L=T[S>g-2?g-1:S+1],A=T[S>g-3?g-1:S+2],y)o(E,I,L,A,$,$*$,$*$*$,d(t,m),b);else{var h;if(_)h=o(E,I,L,A,$,$*$,$*$*$,z,1),h=l(z);else h=s(E,I,L,A,$,$*$,$*$*$);a(t,m,h)}else if(y)n(T[S],T[S+1],$,d(t,m),b);else{var h;if(_)n(T[S],T[S+1],$,z,1),h=l(z);else h=i(T[S],T[S+1],$);a(t,m,h)}for(S=0;S<e._onframeList.length;S++)e._onframeList[S](t,r)}},O=new c({target:e._target,life:x,loop:e._loop,delay:e._delay,onframe:D,ondestroy:f});if(t&&"spline"!==t)O.easing=t;e._clipList.push(O),e._clipCount++,e.animation.add(O)}else;}};for(var m in this._tracks)p(this._tracks[m],m);return this},stop:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]},delay:function(t){return this._delay=t,this},done:function(t){if(t)this._doneList.push(t);return this}},m}),define("zrender/zrender",["require","./dep/excanvas","./tool/util","./tool/log","./tool/guid","./Handler","./Painter","./Storage","./animation/Animation","./tool/env"],function(require){function t(t){return function(){if(t._needsRefreshNextFrame)t.refresh()}}require("./dep/excanvas");var e=require("./tool/util"),i=require("./tool/log"),n=require("./tool/guid"),r=require("./Handler"),o=require("./Painter"),s=require("./Storage"),a=require("./animation/Animation"),l={},c={};c.version="2.1.1",c.init=function(t){var e=new h(n(),t);return l[e.id]=e,e},c.dispose=function(t){if(t)t.dispose();else{for(var e in l)l[e].dispose();l={}}return c},c.getInstance=function(t){return l[t]},c.delInstance=function(t){return delete l[t],c};var h=function(e,i){this.id=e,this.env=require("./tool/env"),this.storage=new s,this.painter=new o(i,this.storage),this.handler=new r(i,this.storage,this.painter),this.animation=new a({stage:{update:t(this)}}),this.animation.start();var n=this;this.painter.refreshNextFrame=function(){n.refreshNextFrame()},this._needsRefreshNextFrame=!1;var n=this,l=this.storage,c=l.delFromMap;l.delFromMap=function(t){var e=l.get(t);n.stopAnimation(e),c.call(l,t)}};return h.prototype.getId=function(){return this.id},h.prototype.addShape=function(t){return this.addElement(t),this},h.prototype.addGroup=function(t){return this.addElement(t),this},h.prototype.delShape=function(t){return this.delElement(t),this},h.prototype.delGroup=function(t){return this.delElement(t),this},h.prototype.modShape=function(t,e){return this.modElement(t,e),this},h.prototype.modGroup=function(t,e){return this.modElement(t,e),this},h.prototype.addElement=function(t){return this.storage.addRoot(t),this._needsRefreshNextFrame=!0,this},h.prototype.delElement=function(t){return this.storage.delRoot(t),this._needsRefreshNextFrame=!0,this},h.prototype.modElement=function(t,e){return this.storage.mod(t,e),this._needsRefreshNextFrame=!0,this},h.prototype.modLayer=function(t,e){return this.painter.modLayer(t,e),this._needsRefreshNextFrame=!0,this},h.prototype.addHoverShape=function(t){return this.storage.addHover(t),this},h.prototype.render=function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this},h.prototype.refresh=function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this},h.prototype.refreshNextFrame=function(){return this._needsRefreshNextFrame=!0,this},h.prototype.refreshHover=function(t){return this.painter.refreshHover(t),this},h.prototype.refreshShapes=function(t,e){return this.painter.refreshShapes(t,e),this},h.prototype.resize=function(){return this.painter.resize(),this},h.prototype.animate=function(t,n,r){var o=this;if("string"==typeof t)t=this.storage.get(t);if(t){var s;if(n){for(var a=n.split("."),l=t,c=0,h=a.length;h>c;c++)if(l)l=l[a[c]];else;if(l)s=l}else s=t;if(!s)return void i('Property "'+n+'" is not existed in element '+t.id);if(null==t.__animators)t.__animators=[];var d=t.__animators,u=this.animation.animate(s,{loop:r}).during(function(){o.modShape(t)}).done(function(){var i=e.indexOf(t.__animators,u);if(i>=0)d.splice(i,1)});return d.push(u),u}else i("Element not existed")},h.prototype.stopAnimation=function(t){if(t.__animators){for(var e=t.__animators,i=e.length,n=0;i>n;n++)e[n].stop();e.length=0}return this},h.prototype.clearAnimation=function(){return this.animation.clear(),this},h.prototype.showLoading=function(t){return this.painter.showLoading(t),this},h.prototype.hideLoading=function(){return this.painter.hideLoading(),this},h.prototype.getWidth=function(){return this.painter.getWidth()},h.prototype.getHeight=function(){return this.painter.getHeight()},h.prototype.toDataURL=function(t,e,i){return this.painter.toDataURL(t,e,i)},h.prototype.shapeToImage=function(t,e,i){var r=n();return this.painter.shapeToImage(r,t,e,i)},h.prototype.on=function(t,e,i){return this.handler.on(t,e,i),this},h.prototype.un=function(t,e){return this.handler.un(t,e),this},h.prototype.trigger=function(t,e){return this.handler.trigger(t,e),this},h.prototype.clear=function(){return this.storage.delRoot(),this.painter.clear(),this},h.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,c.delInstance(this.id)},c}),define("zrender",["zrender/zrender"],function(t){return t}),define("zrender/tool/math",[],function(){function t(t,e){return Math.sin(e?t*r:t)}function e(t,e){return Math.cos(e?t*r:t)}function i(t){return t*r}function n(t){return t/r}var r=Math.PI/180;return{sin:t,cos:e,degreeToRadian:i,radianToDegree:n}}),define("zrender/shape/Star",["require","../tool/math","./Base","../tool/util"],function(require){var t=require("../tool/math"),e=t.sin,i=t.cos,n=Math.PI,r=require("./Base"),o=function(t){r.call(this,t)};return o.prototype={type:"star",buildPath:function(t,r){var o=r.n;if(o&&!(2>o)){var s=r.x,a=r.y,l=r.r,c=r.r0;if(null==c)c=o>4?l*i(2*n/o)/i(n/o):l/3;var h=n/o,d=-n/2,u=s+l*i(d),f=a+l*e(d);d+=h;var p=r.pointList=[];p.push([u,f]);for(var m,g=0,v=2*o-1;v>g;g++)m=g%2===0?c:l,p.push([s+m*i(d),a+m*e(d)]),d+=h;p.push([u,f]),t.moveTo(p[0][0],p[0][1]);for(var g=0;g<p.length;g++)t.lineTo(p[g][0],p[g][1]);t.closePath()}},getRect:function(t){if(t.__rect)return t.__rect;var e;if("stroke"==t.brushType||"fill"==t.brushType)e=t.lineWidth||1;else e=0;return t.__rect={x:Math.round(t.x-t.r-e/2),y:Math.round(t.y-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}},require("../tool/util").inherits(o,r),o}),define("zrender/shape/util/PathProxy",["require","../../tool/vector"],function(require){var t=require("../../tool/vector"),e=function(t,e){this.command=t,this.points=e||null},i=function(){this.pathCommands=[],this._ctx=null,this._min=[],this._max=[]};return i.prototype.fastBoundingRect=function(){var e=this._min,i=this._max;e[0]=e[1]=1/0,i[0]=i[1]=-(1/0);for(var n=0;n<this.pathCommands.length;n++){var r=this.pathCommands[n],o=r.points;switch(r.command){case"M":t.min(e,e,o),t.max(i,i,o);break;case"L":t.min(e,e,o),t.max(i,i,o);break;case"C":for(var s=0;6>s;s+=2)e[0]=Math.min(e[0],e[0],o[s]),e[1]=Math.min(e[1],e[1],o[s+1]),i[0]=Math.max(i[0],i[0],o[s]),i[1]=Math.max(i[1],i[1],o[s+1]);break;case"Q":for(var s=0;4>s;s+=2)e[0]=Math.min(e[0],e[0],o[s]),e[1]=Math.min(e[1],e[1],o[s+1]),i[0]=Math.max(i[0],i[0],o[s]),i[1]=Math.max(i[1],i[1],o[s+1]);break;case"A":var a=o[0],l=o[1],c=o[2],h=o[3];e[0]=Math.min(e[0],e[0],a-c),e[1]=Math.min(e[1],e[1],l-h),i[0]=Math.max(i[0],i[0],a+c),i[1]=Math.max(i[1],i[1],l+h)}}return{x:e[0],y:e[1],width:i[0]-e[0],height:i[1]-e[1]}},i.prototype.begin=function(t){return this._ctx=t||null,this.pathCommands.length=0,this},i.prototype.moveTo=function(t,i){if(this.pathCommands.push(new e("M",[t,i])),this._ctx)this._ctx.moveTo(t,i);return this},i.prototype.lineTo=function(t,i){if(this.pathCommands.push(new e("L",[t,i])),this._ctx)this._ctx.lineTo(t,i);return this},i.prototype.bezierCurveTo=function(t,i,n,r,o,s){if(this.pathCommands.push(new e("C",[t,i,n,r,o,s])),this._ctx)this._ctx.bezierCurveTo(t,i,n,r,o,s);return this},i.prototype.quadraticCurveTo=function(t,i,n,r){if(this.pathCommands.push(new e("Q",[t,i,n,r])),this._ctx)this._ctx.quadraticCurveTo(t,i,n,r);return this},i.prototype.arc=function(t,i,n,r,o,s){if(this.pathCommands.push(new e("A",[t,i,n,n,r,o-r,0,s?0:1])),this._ctx)this._ctx.arc(t,i,n,r,o,s);return this},i.prototype.arcTo=function(t,e,i,n,r){if(this._ctx)this._ctx.arcTo(t,e,i,n,r);return this},i.prototype.rect=function(t,e,i,n){if(this._ctx)this._ctx.rect(t,e,i,n);return this},i.prototype.closePath=function(){if(this.pathCommands.push(new e("z")),this._ctx)this._ctx.closePath();return this},i.prototype.isEmpty=function(){return 0===this.pathCommands.length},i.PathSegment=e,i}),define("zrender/shape/Heart",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(require){"use strict";var t=require("./Base"),e=require("./util/PathProxy"),i=require("../tool/area"),n=function(i){t.call(this,i),this._pathProxy=new e};return n.prototype={type:"heart",buildPath:function(t,i){var n=this._pathProxy||new e;n.begin(t),n.moveTo(i.x,i.y),n.bezierCurveTo(i.x+i.a/2,i.y-2*i.b/3,i.x+2*i.a,i.y+i.b/3,i.x,i.y+i.b),n.bezierCurveTo(i.x-2*i.a,i.y+i.b/3,i.x-i.a/2,i.y-2*i.b/3,i.x,i.y),n.closePath()},getRect:function(t){if(t.__rect)return t.__rect;if(!this._pathProxy.isEmpty())this.buildPath(null,t);return this._pathProxy.fastBoundingRect()},isCover:function(t,e){var n=this.transformCoordToLocal(t,e);if(t=n[0],e=n[1],this.isCoverRect(t,e))return i.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,t,e);else return void 0}},require("../tool/util").inherits(n,t),n}),define("zrender/shape/Droplet",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(require){"use strict";var t=require("./Base"),e=require("./util/PathProxy"),i=require("../tool/area"),n=function(i){t.call(this,i),this._pathProxy=new e};return n.prototype={type:"droplet",buildPath:function(t,i){var n=this._pathProxy||new e;n.begin(t),n.moveTo(i.x,i.y+i.a),n.bezierCurveTo(i.x+i.a,i.y+i.a,i.x+3*i.a/2,i.y-i.a/3,i.x,i.y-i.b),n.bezierCurveTo(i.x-3*i.a/2,i.y-i.a/3,i.x-i.a,i.y+i.a,i.x,i.y+i.a),n.closePath()},getRect:function(t){if(t.__rect)return t.__rect;if(!this._pathProxy.isEmpty())this.buildPath(null,t);return this._pathProxy.fastBoundingRect()},isCover:function(t,e){var n=this.transformCoordToLocal(t,e);if(t=n[0],e=n[1],this.isCoverRect(t,e))return i.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,t,e);else return void 0}},require("../tool/util").inherits(n,t),n}),define("echarts/util/shape/Icon",["require","zrender/tool/util","zrender/shape/Star","zrender/shape/Heart","zrender/shape/Droplet","zrender/shape/Image","zrender/shape/Base"],function(require){function t(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n+e.height),t.lineTo(i+5*r,n+14*o),t.lineTo(i+e.width,n+3*o),t.lineTo(i+13*r,n),t.lineTo(i+2*r,n+11*o),t.lineTo(i,n+e.height),t.moveTo(i+6*r,n+10*o),t.lineTo(i+14*r,n+2*o),t.moveTo(i+10*r,n+13*o),t.lineTo(i+e.width,n+13*o),t.moveTo(i+13*r,n+10*o),t.lineTo(i+13*r,n+e.height)}function e(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n+e.height),t.lineTo(i+5*r,n+14*o),t.lineTo(i+e.width,n+3*o),t.lineTo(i+13*r,n),t.lineTo(i+2*r,n+11*o),t.lineTo(i,n+e.height),t.moveTo(i+6*r,n+10*o),t.lineTo(i+14*r,n+2*o),t.moveTo(i+10*r,n+13*o),t.lineTo(i+e.width,n+13*o)}function i(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i+4*r,n+15*o),t.lineTo(i+9*r,n+13*o),t.lineTo(i+14*r,n+8*o),t.lineTo(i+11*r,n+5*o),t.lineTo(i+6*r,n+10*o),t.lineTo(i+4*r,n+15*o),t.moveTo(i+5*r,n),t.lineTo(i+11*r,n),t.moveTo(i+5*r,n+o),t.lineTo(i+11*r,n+o),t.moveTo(i,n+2*o),t.lineTo(i+e.width,n+2*o),t.moveTo(i,n+5*o),t.lineTo(i+3*r,n+e.height),t.lineTo(i+13*r,n+e.height),t.lineTo(i+e.width,n+5*o)}function n(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n+3*o),t.lineTo(i+6*r,n+3*o),t.moveTo(i+3*r,n),t.lineTo(i+3*r,n+6*o),t.moveTo(i+3*r,n+8*o),t.lineTo(i+3*r,n+e.height),t.lineTo(i+e.width,n+e.height),t.lineTo(i+e.width,n+3*o),t.lineTo(i+8*r,n+3*o)}function r(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i+6*r,n),t.lineTo(i+2*r,n+3*o),t.lineTo(i+6*r,n+6*o),t.moveTo(i+2*r,n+3*o),t.lineTo(i+14*r,n+3*o),t.lineTo(i+14*r,n+11*o),t.moveTo(i+2*r,n+5*o),t.lineTo(i+2*r,n+13*o),t.lineTo(i+14*r,n+13*o),t.moveTo(i+10*r,n+10*o),t.lineTo(i+14*r,n+13*o),t.lineTo(i+10*r,n+e.height)}function o(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16,s=e.width/2;t.lineWidth=1.5,t.arc(i+s,n+s,s-r,0,2*Math.PI/3),t.moveTo(i+3*r,n+e.height),t.lineTo(i+0*r,n+12*o),t.lineTo(i+5*r,n+11*o),t.moveTo(i,n+8*o),t.arc(i+s,n+s,s-r,Math.PI,5*Math.PI/3),t.moveTo(i+13*r,n),t.lineTo(i+e.width,n+4*o),t.lineTo(i+11*r,n+5*o)}function s(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n),t.lineTo(i,n+e.height),t.lineTo(i+e.width,n+e.height),t.moveTo(i+2*r,n+14*o),t.lineTo(i+7*r,n+6*o),t.lineTo(i+11*r,n+11*o),t.lineTo(i+15*r,n+2*o)}function a(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n),t.lineTo(i,n+e.height),t.lineTo(i+e.width,n+e.height),t.moveTo(i+3*r,n+14*o),t.lineTo(i+3*r,n+6*o),t.lineTo(i+4*r,n+6*o),t.lineTo(i+4*r,n+14*o),t.moveTo(i+7*r,n+14*o),t.lineTo(i+7*r,n+2*o),t.lineTo(i+8*r,n+2*o),t.lineTo(i+8*r,n+14*o),t.moveTo(i+11*r,n+14*o),t.lineTo(i+11*r,n+9*o),t.lineTo(i+12*r,n+9*o),t.lineTo(i+12*r,n+14*o)}function l(t,e){var i=e.x,n=e.y,r=e.width-2,o=e.height-2,s=Math.min(r,o)/2;n+=2,t.moveTo(i+s+3,n+s-3),t.arc(i+s+3,n+s-3,s-1,0,-Math.PI/2,!0),t.lineTo(i+s+3,n+s-3),t.moveTo(i+s,n),t.lineTo(i+s,n+s),t.arc(i+s,n+s,s,-Math.PI/2,2*Math.PI,!0),t.lineTo(i+s,n+s),t.lineWidth=1.5}function c(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;n-=o,t.moveTo(i+1*r,n+2*o),t.lineTo(i+15*r,n+2*o),t.lineTo(i+14*r,n+3*o),t.lineTo(i+2*r,n+3*o),t.moveTo(i+3*r,n+6*o),t.lineTo(i+13*r,n+6*o),t.lineTo(i+12*r,n+7*o),t.lineTo(i+4*r,n+7*o),t.moveTo(i+5*r,n+10*o),t.lineTo(i+11*r,n+10*o),t.lineTo(i+10*r,n+11*o),t.lineTo(i+6*r,n+11*o),t.moveTo(i+7*r,n+14*o),t.lineTo(i+9*r,n+14*o),t.lineTo(i+8*r,n+15*o),t.lineTo(i+7*r,n+15*o)}function h(t,e){var i=e.x,n=e.y,r=e.width,o=e.height,s=r/16,a=o/16,l=2*Math.min(s,a);t.moveTo(i+s+l,n+a+l),t.arc(i+s,n+a,l,Math.PI/4,3*Math.PI),t.lineTo(i+7*s-l,n+6*a-l),t.arc(i+7*s,n+6*a,l,Math.PI/4*5,4*Math.PI),t.arc(i+7*s,n+6*a,l/2,Math.PI/4*5,4*Math.PI),t.moveTo(i+7*s-l/2,n+6*a+l),t.lineTo(i+s+l,n+14*a-l),t.arc(i+s,n+14*a,l,-Math.PI/4,2*Math.PI),t.moveTo(i+7*s+l/2,n+6*a),t.lineTo(i+14*s-l,n+10*a-l/2),t.moveTo(i+16*s,n+10*a),t.arc(i+14*s,n+10*a,l,0,3*Math.PI),t.lineWidth=1.5}function d(t,e){var i=e.x,n=e.y,r=e.width,o=e.height,s=Math.min(r,o)/2;t.moveTo(i+r,n+o/2),t.arc(i+s,n+s,s,0,2*Math.PI),t.arc(i+s,n,s,Math.PI/4,Math.PI/5*4),t.arc(i,n+s,s,-Math.PI/3,Math.PI/3),t.arc(i+r,n+o,s,Math.PI,Math.PI/2*3),t.lineWidth=1.5}function u(t,e){for(var i=e.x,n=e.y,r=e.width,o=e.height,s=Math.round(o/3),a=Math.round((s-2)/2),l=3;l--;)t.rect(i,n+s*l+a,r,2)}function f(t,e){for(var i=e.x,n=e.y,r=e.width,o=e.height,s=Math.round(r/3),a=Math.round((s-2)/2),l=3;l--;)t.rect(i+s*l+a,n,2,o)}function p(t,e){var i=e.x,n=e.y,r=e.width/16;t.moveTo(i+r,n),t.lineTo(i+r,n+e.height),t.lineTo(i+15*r,n+e.height),t.lineTo(i+15*r,n),t.lineTo(i+r,n),t.moveTo(i+3*r,n+3*r),t.lineTo(i+13*r,n+3*r),t.moveTo(i+3*r,n+6*r),t.lineTo(i+13*r,n+6*r),t.moveTo(i+3*r,n+9*r),t.lineTo(i+13*r,n+9*r),t.moveTo(i+3*r,n+12*r),t.lineTo(i+9*r,n+12*r)}function m(t,e){var i=e.x,n=e.y,r=e.width/16,o=e.height/16;t.moveTo(i,n),t.lineTo(i,n+e.height),t.lineTo(i+e.width,n+e.height),t.lineTo(i+e.width,n),
t.lineTo(i,n),t.moveTo(i+4*r,n),t.lineTo(i+4*r,n+8*o),t.lineTo(i+12*r,n+8*o),t.lineTo(i+12*r,n),t.moveTo(i+6*r,n+11*o),t.lineTo(i+6*r,n+13*o),t.lineTo(i+10*r,n+13*o),t.lineTo(i+10*r,n+11*o),t.lineTo(i+6*r,n+11*o)}function g(t,e){var i=e.x,n=e.y,r=e.width,o=e.height;t.moveTo(i,n+o/2),t.lineTo(i+r,n+o/2),t.moveTo(i+r/2,n),t.lineTo(i+r/2,n+o)}function v(t,e){var i=e.width/2,n=e.height/2,r=Math.min(i,n);t.moveTo(e.x+i+r,e.y+n),t.arc(e.x+i,e.y+n,r,0,2*Math.PI),t.closePath()}function y(t,e){t.rect(e.x,e.y,e.width,e.height),t.closePath()}function _(t,e){var i=e.width/2,n=e.height/2,r=e.x+i,o=e.y+n,s=Math.min(i,n);t.moveTo(r,o-s),t.lineTo(r+s,o+s),t.lineTo(r-s,o+s),t.lineTo(r,o-s),t.closePath()}function b(t,e){var i=e.width/2,n=e.height/2,r=e.x+i,o=e.y+n,s=Math.min(i,n);t.moveTo(r,o-s),t.lineTo(r+s,o),t.lineTo(r,o+s),t.lineTo(r-s,o),t.lineTo(r,o-s),t.closePath()}function x(t,e){var i=e.x,n=e.y,r=e.width/16;t.moveTo(i+8*r,n),t.lineTo(i+r,n+e.height),t.lineTo(i+8*r,n+e.height/4*3),t.lineTo(i+15*r,n+e.height),t.lineTo(i+8*r,n),t.closePath()}function w(t,e){var i=require("zrender/shape/Star"),n=e.width/2,r=e.height/2;i.prototype.buildPath(t,{x:e.x+n,y:e.y+r,r:Math.min(n,r),n:e.n||5})}function T(t,e){var i=require("zrender/shape/Heart");i.prototype.buildPath(t,{x:e.x+e.width/2,y:e.y+.2*e.height,a:e.width/2,b:.8*e.height})}function S(t,e){var i=require("zrender/shape/Droplet");i.prototype.buildPath(t,{x:e.x+.5*e.width,y:e.y+.5*e.height,a:.5*e.width,b:.8*e.height})}function C(t,e){var i=e.x,n=e.y-e.height/2*1.5,r=e.width/2,o=e.height/2,s=Math.min(r,o);t.arc(i+r,n+o,s,Math.PI/5*4,Math.PI/5),t.lineTo(i+r,n+o+1.5*s),t.closePath()}function k(t,e,i){var n=require("zrender/shape/Image");this._imageShape=this._imageShape||new n({style:{}});for(var r in e)this._imageShape.style[r]=e[r];this._imageShape.brush(t,!1,i)}function $(t){I.call(this,t)}var E=require("zrender/tool/util"),I=require("zrender/shape/Base");return $.prototype={type:"icon",iconLibrary:{mark:t,markUndo:e,markClear:i,dataZoom:n,dataZoomReset:r,restore:o,lineChart:s,barChart:a,pieChart:l,funnelChart:c,forceChart:h,chordChart:d,stackChart:u,tiledChart:f,dataView:p,saveAsImage:m,cross:g,circle:v,rectangle:y,triangle:_,diamond:b,arrow:x,star:w,heart:T,droplet:S,pin:C,image:k},brush:function(t,e,i){var n=e?this.highlightStyle:this.style;n=n||{};var r=n.iconType||this.style.iconType;if("image"===r){var o=require("zrender/shape/Image");o.prototype.brush.call(this,t,e,i)}else{var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n,i),n.brushType){case"both":t.fill();case"stroke":n.lineWidth>0&&t.stroke();break;default:t.fill()}this.drawText(t,n,this.style),this.afterBrush(t)}},buildPath:function(t,e,i){if(this.iconLibrary[e.iconType])this.iconLibrary[e.iconType].call(this,t,e,i);else t.moveTo(e.x,e.y),t.lineTo(e.x+e.width,e.y),t.lineTo(e.x+e.width,e.y+e.height),t.lineTo(e.x,e.y+e.height),t.lineTo(e.x,e.y),t.closePath()},getRect:function(t){if(t.__rect)return t.__rect;else return t.__rect={x:Math.round(t.x),y:Math.round(t.y-("pin"==t.iconType?t.height/2*1.5:0)),width:t.width,height:t.height*("pin"===t.iconType?1.25:1)},t.__rect},isCover:function(t,e){var i=this.transformCoordToLocal(t,e);t=i[0],e=i[1];var n=this.style.__rect;if(!n)n=this.style.__rect=this.getRect(this.style);var r=n.height<8||n.width<8?4:0;return t>=n.x-r&&t<=n.x+n.width+r&&e>=n.y-r&&e<=n.y+n.height+r}},E.inherits($,I),$}),define("zrender/shape/util/dashedLineTo",[],function(){var t=[5,5];return function(e,i,n,r,o,s){if(e.setLineDash)return t[0]=t[1]=s,e.setLineDash(t),e.moveTo(i,n),void e.lineTo(r,o);s="number"!=typeof s?5:s;var a=r-i,l=o-n,c=Math.floor(Math.sqrt(a*a+l*l)/s);a/=c,l/=c;for(var h=!0,d=0;c>d;++d){if(h)e.moveTo(i,n);else e.lineTo(i,n);h=!h,i+=a,n+=l}e.lineTo(r,o)}}),define("zrender/shape/Line",["require","./Base","./util/dashedLineTo","../tool/util"],function(require){var t=require("./Base"),e=require("./util/dashedLineTo"),i=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return i.prototype={type:"line",buildPath:function(t,i){if(!i.lineType||"solid"==i.lineType)t.moveTo(i.xStart,i.yStart),t.lineTo(i.xEnd,i.yEnd);else if("dashed"==i.lineType||"dotted"==i.lineType){var n=(i.lineWidth||1)*("dashed"==i.lineType?5:1);e(t,i.xStart,i.yStart,i.xEnd,i.yEnd,n)}},getRect:function(t){if(t.__rect)return t.__rect;var e=t.lineWidth||1;return t.__rect={x:Math.min(t.xStart,t.xEnd)-e,y:Math.min(t.yStart,t.yEnd)-e,width:Math.abs(t.xStart-t.xEnd)+e,height:Math.abs(t.yStart-t.yEnd)+e},t.__rect}},require("../tool/util").inherits(i,t),i}),define("zrender/shape/BezierCurve",["require","./Base","../tool/util"],function(require){"use strict";var t=require("./Base"),e=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return e.prototype={type:"bezier-curve",buildPath:function(t,e){if(t.moveTo(e.xStart,e.yStart),"undefined"!=typeof e.cpX2&&"undefined"!=typeof e.cpY2)t.bezierCurveTo(e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd);else t.quadraticCurveTo(e.cpX1,e.cpY1,e.xEnd,e.yEnd)},getRect:function(t){if(t.__rect)return t.__rect;var e=Math.min(t.xStart,t.xEnd,t.cpX1),i=Math.min(t.yStart,t.yEnd,t.cpY1),n=Math.max(t.xStart,t.xEnd,t.cpX1),r=Math.max(t.yStart,t.yEnd,t.cpY1),o=t.cpX2,s=t.cpY2;if("undefined"!=typeof o&&"undefined"!=typeof s)e=Math.min(e,o),i=Math.min(i,s),n=Math.max(n,o),r=Math.max(r,s);var a=t.lineWidth||1;return t.__rect={x:e-a,y:i-a,width:n-e+a,height:r-i+a},t.__rect}},require("../tool/util").inherits(e,t),e}),define("echarts/util/shape/MarkLine",["require","zrender/shape/Base","./Icon","zrender/shape/Line","zrender/shape/BezierCurve","zrender/tool/area","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/curve"],function(require){function t(t){if(e.call(this,t),this.style.curveness>0)this.updatePoints(this.style);if(this.highlightStyle.curveness>0)this.updatePoints(this.highlightStyle)}var e=require("zrender/shape/Base"),i=require("./Icon"),n=require("zrender/shape/Line"),r=new n({}),o=require("zrender/shape/BezierCurve"),s=new o({}),a=require("zrender/tool/area"),l=require("zrender/shape/util/dashedLineTo"),c=require("zrender/tool/util"),h=require("zrender/tool/curve");return t.prototype={type:"mark-line",brush:function(t,e){var i=this.style;if(e)i=this.getHighlightStyle(i,this.highlightStyle||{});t.save(),this.setContext(t,i),this.setTransform(t),t.save(),t.beginPath(),this.buildPath(t,i),t.stroke(),t.restore(),this.brushSymbol(t,i,0),this.brushSymbol(t,i,1),this.drawText(t,i,this.style),t.restore()},buildPath:function(t,e){var i=e.lineType||"solid";if(t.moveTo(e.xStart,e.yStart),e.curveness>0){var n=null;switch(i){case"dashed":n=[5,5];break;case"dotted":n=[1,1]}if(n&&t.setLineDash)t.setLineDash(n);t.quadraticCurveTo(e.cpX1,e.cpY1,e.xEnd,e.yEnd)}else if("solid"==i)t.lineTo(e.xEnd,e.yEnd);else{var r=(e.lineWidth||1)*("dashed"==e.lineType?5:1);l(t,e.xStart,e.yStart,e.xEnd,e.yEnd,r)}},updatePoints:function(t){var e=t.curveness||0,i=1,n=t.xStart,r=t.yStart,o=t.xEnd,s=t.yEnd,a=(n+o)/2-i*(r-s)*e,l=(r+s)/2-i*(o-n)*e;t.cpX1=a,t.cpY1=l},brushSymbol:function(t,e,n){if("none"!=e.symbol[n]){t.save(),t.beginPath(),t.lineWidth=e.symbolBorder,t.strokeStyle=e.symbolBorderColor;var r=e.symbol[n].replace("empty","").toLowerCase();if(e.symbol[n].match("empty"))t.fillStyle="#fff";var o=e.xStart,s=e.yStart,a=e.xEnd,l=e.yEnd,c=0===n?o:a,d=0===n?s:l,u=e.curveness||0,f=null!=e.symbolRotate[n]?e.symbolRotate[n]-0:0;if(f=f/180*Math.PI,"arrow"==r&&0===f)if(0===u){var p=0===n?-1:1;f=Math.PI/2+Math.atan2(p*(l-s),p*(a-o))}else{var m=e.cpX1,g=e.cpY1,v=h.quadraticDerivativeAt,y=v(o,m,a,n),_=v(s,g,l,n);f=Math.PI/2+Math.atan2(_,y)}if(t.translate(c,d),0!==f)t.rotate(f);var b=e.symbolSize[n];i.prototype.buildPath(t,{x:-b,y:-b,width:2*b,height:2*b,iconType:r}),t.closePath(),t.fill(),t.stroke(),t.restore()}},getRect:function(t){return t.curveness>0?s.getRect(t):r.getRect(t),t.__rect},isCover:function(t,e){var i=this.transformCoordToLocal(t,e);if(t=i[0],e=i[1],this.isCoverRect(t,e))return this.style.curveness>0?a.isInside(s,this.style,t,e):a.isInside(r,this.style,t,e);else return!1}},c.inherits(t,e),t}),define("zrender/shape/util/smoothSpline",["require","../../tool/vector"],function(require){function t(t,e,i,n,r,o,s){var a=.5*(i-t),l=.5*(n-e);return(2*(e-i)+a+l)*s+(-3*(e-i)-2*a-l)*o+a*r+e}var e=require("../../tool/vector");return function(i,n,r){for(var o=i.length,s=[],a=0,l=1;o>l;l++)a+=e.distance(i[l-1],i[l]);var c=a/5;c=o>c?o:c;for(var l=0;c>l;l++){var h,d,u,f=l/(c-1)*(n?o:o-1),p=Math.floor(f),m=f-p,g=i[p%o];if(!n)h=i[0===p?p:p-1],d=i[p>o-2?o-1:p+1],u=i[p>o-3?o-1:p+2];else h=i[(p-1+o)%o],d=i[(p+1)%o],u=i[(p+2)%o];var v=m*m,y=m*v;s.push([t(h[0],g[0],d[0],u[0],m,v,y),t(h[1],g[1],d[1],u[1],m,v,y)])}return s}}),define("zrender/shape/util/smoothBezier",["require","../../tool/vector"],function(require){var t=require("../../tool/vector");return function(e,i,n,r){var o,s,a,l,c=[],h=[],d=[],u=[],f=!!r;if(f){a=[1/0,1/0],l=[-(1/0),-(1/0)];for(var p=0,m=e.length;m>p;p++)t.min(a,a,e[p]),t.max(l,l,e[p]);t.min(a,a,r[0]),t.max(l,l,r[1])}for(var p=0,m=e.length;m>p;p++){var o,s,g=e[p];if(n)o=e[p?p-1:m-1],s=e[(p+1)%m];else if(0===p||p===m-1){c.push(t.clone(e[p]));continue}else o=e[p-1],s=e[p+1];t.sub(h,s,o),t.scale(h,h,i);var v=t.distance(g,o),y=t.distance(g,s),_=v+y;if(0!==_)v/=_,y/=_;t.scale(d,h,-v),t.scale(u,h,y);var b=t.add([],g,d),x=t.add([],g,u);if(f)t.max(b,b,a),t.min(b,b,l),t.max(x,x,a),t.min(x,x,l);c.push(b),c.push(x)}if(n)c.push(t.clone(c.shift()));return c}}),define("zrender/shape/Polygon",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","../tool/util"],function(require){var t=require("./Base"),e=require("./util/smoothSpline"),i=require("./util/smoothBezier"),n=require("./util/dashedLineTo"),r=function(e){t.call(this,e)};return r.prototype={type:"polygon",buildPath:function(t,r){var o=r.pointList;if(!(o.length<2)){if(r.smooth&&"spline"!==r.smooth){var s=i(o,r.smooth,!0,r.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var a,l,c,h=o.length,d=0;h>d;d++)a=s[2*d],l=s[2*d+1],c=o[(d+1)%h],t.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}else{if("spline"===r.smooth)o=e(o,!0);if(!r.lineType||"solid"==r.lineType){t.moveTo(o[0][0],o[0][1]);for(var d=1,u=o.length;u>d;d++)t.lineTo(o[d][0],o[d][1]);t.lineTo(o[0][0],o[0][1])}else if("dashed"==r.lineType||"dotted"==r.lineType){var f=r._dashLength||(r.lineWidth||1)*("dashed"==r.lineType?5:1);r._dashLength=f,t.moveTo(o[0][0],o[0][1]);for(var d=1,u=o.length;u>d;d++)n(t,o[d-1][0],o[d-1][1],o[d][0],o[d][1],f);n(t,o[o.length-1][0],o[o.length-1][1],o[0][0],o[0][1],f)}}t.closePath()}},getRect:function(t){if(t.__rect)return t.__rect;for(var e=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,o=t.pointList,s=0,a=o.length;a>s;s++){if(o[s][0]<e)e=o[s][0];if(o[s][0]>i)i=o[s][0];if(o[s][1]<n)n=o[s][1];if(o[s][1]>r)r=o[s][1]}var l;if("stroke"==t.brushType||"fill"==t.brushType)l=t.lineWidth||1;else l=0;return t.__rect={x:Math.round(e-l/2),y:Math.round(n-l/2),width:i-e+l,height:r-n+l},t.__rect}},require("../tool/util").inherits(r,t),r}),define("echarts/util/shape/normalIsCover",[],function(){return function(t,e){var i=this.transformCoordToLocal(t,e);return t=i[0],e=i[1],this.isCoverRect(t,e)}}),define("echarts/util/shape/Symbol",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util","./normalIsCover"],function(require){function t(t){e.call(this,t)}var e=require("zrender/shape/Base"),i=require("zrender/shape/Polygon"),n=new i({}),r=require("zrender/tool/util");return t.prototype={type:"symbol",buildPath:function(t,e){var i=e.pointList,n=i.length;if(0!==n)for(var r,o,s,a,l,c=1e4,h=Math.ceil(n/c),d=i[0]instanceof Array,u=e.size?e.size:2,f=u,p=u/2,m=2*Math.PI,g=0;h>g;g++){t.beginPath(),r=g*c,o=r+c,o=o>n?n:o;for(var v=r;o>v;v++){if(e.random)s=e["randomMap"+v%20]/100,f=u*s*s,p=f/2;if(d)a=i[v][0],l=i[v][1];else a=i[v].x,l=i[v].y;if(3>f)t.rect(a-p,l-p,f,f);else switch(e.iconType){case"circle":t.moveTo(a,l),t.arc(a,l,p,0,m,!0);break;case"diamond":t.moveTo(a,l-p),t.lineTo(a+p/3,l-p/3),t.lineTo(a+p,l),t.lineTo(a+p/3,l+p/3),t.lineTo(a,l+p),t.lineTo(a-p/3,l+p/3),t.lineTo(a-p,l),t.lineTo(a-p/3,l-p/3),t.lineTo(a,l-p);break;default:t.rect(a-p,l-p,f,f)}}if(t.closePath(),h-1>g)switch(e.brushType){case"both":t.fill(),e.lineWidth>0&&t.stroke();break;case"stroke":e.lineWidth>0&&t.stroke();break;default:t.fill()}}},getRect:function(t){return t.__rect||n.getRect(t)},isCover:require("./normalIsCover")},r.inherits(t,e),t}),define("zrender/shape/Polyline",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","./Polygon","../tool/util"],function(require){var t=require("./Base"),e=require("./util/smoothSpline"),i=require("./util/smoothBezier"),n=require("./util/dashedLineTo"),r=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return r.prototype={type:"polyline",buildPath:function(t,i){var r=i.pointList;if(!(r.length<2)){var o=Math.min(i.pointList.length,Math.round(i.pointListLength||i.pointList.length));if(i.smooth&&"spline"!==i.smooth){if(!i.controlPointList)this.updateControlPoints(i);var s=i.controlPointList;t.moveTo(r[0][0],r[0][1]);for(var a,l,c,h=0;o-1>h;h++)a=s[2*h],l=s[2*h+1],c=r[h+1],t.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}else{if("spline"===i.smooth)r=e(r),o=r.length;if(!i.lineType||"solid"==i.lineType){t.moveTo(r[0][0],r[0][1]);for(var h=1;o>h;h++)t.lineTo(r[h][0],r[h][1])}else if("dashed"==i.lineType||"dotted"==i.lineType){var d=(i.lineWidth||1)*("dashed"==i.lineType?5:1);t.moveTo(r[0][0],r[0][1]);for(var h=1;o>h;h++)n(t,r[h-1][0],r[h-1][1],r[h][0],r[h][1],d)}}}},updateControlPoints:function(t){t.controlPointList=i(t.pointList,t.smooth,!1,t.smoothConstraint)},getRect:function(t){return require("./Polygon").prototype.getRect(t)}},require("../tool/util").inherits(r,t),r}),define("zrender/shape/ShapeBundle",["require","./Base","../tool/util"],function(require){var t=require("./Base"),e=function(e){t.call(this,e)};return e.prototype={constructor:e,type:"shape-bundle",brush:function(t,e){var i=this.beforeBrush(t,e);t.beginPath();for(var n=0;n<i.shapeList.length;n++){var r=i.shapeList[n],o=r.style;if(e)o=r.getHighlightStyle(o,r.highlightStyle||{},r.brushTypeOnly);r.buildPath(t,o)}switch(i.brushType){case"both":t.fill();case"stroke":i.lineWidth>0&&t.stroke();break;default:t.fill()}this.drawText(t,i,this.style),this.afterBrush(t)},getRect:function(t){if(t.__rect)return t.__rect;for(var e=1/0,i=-(1/0),n=1/0,r=-(1/0),o=0;o<t.shapeList.length;o++)var s=t.shapeList[o],a=s.getRect(s.style),e=Math.min(a.x,e),n=Math.min(a.y,n),i=Math.max(a.x+a.width,i),r=Math.max(a.y+a.height,r);return t.__rect={x:e,y:n,width:i-e,height:r-n},t.__rect},isCover:function(t,e){var i=this.transformCoordToLocal(t,e);if(t=i[0],e=i[1],this.isCoverRect(t,e))for(var n=0;n<this.style.shapeList.length;n++){var r=this.style.shapeList[n];if(r.isCover(t,e))return!0}return!1}},require("../tool/util").inherits(e,t),e}),define("echarts/util/ecData",[],function(){function t(t,e,i,n,r,o,s,a){var l;if("undefined"!=typeof n)l=null==n.value?n:n.value;return t._echartsData={_series:e,_seriesIndex:i,_data:n,_dataIndex:r,_name:o,_value:l,_special:s,_special2:a},t._echartsData}function e(t,e){var i=t._echartsData;if(!e)return i;switch(e){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":return i&&i["_"+e]}return null}function i(t,e,i){switch(t._echartsData=t._echartsData||{},e){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":t._echartsData["_"+e]=i}}function n(t,e){e._echartsData={_series:t._echartsData._series,_seriesIndex:t._echartsData._seriesIndex,_data:t._echartsData._data,_dataIndex:t._echartsData._dataIndex,_name:t._echartsData._name,_value:t._echartsData._value,_special:t._echartsData._special,_special2:t._echartsData._special2}}return{pack:t,set:i,get:e,clone:n}}),define("echarts/util/ecAnimation",["require","zrender/tool/util","zrender/tool/curve","zrender/shape/Polygon"],function(require){function t(t,e,i,n,r){var o,s=i.style.pointList,a=s.length;if(!e){if(o=[],"vertical"!=i._orient)for(var l=s[0][1],c=0;a>c;c++)o[c]=[s[c][0],l];else for(var h=s[0][0],c=0;a>c;c++)o[c]=[h,s[c][1]];if("half-smooth-polygon"==i.type)o[a-1]=f.clone(s[a-1]),o[a-2]=f.clone(s[a-2]);e={style:{pointList:o}}}o=e.style.pointList;var d=o.length;if(d==a)i.style.pointList=o;else if(a>d)i.style.pointList=o.concat(s.slice(d));else i.style.pointList=o.slice(0,a);t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(n,{pointList:s}).during(function(){if(i.updateControlPoints)i.updateControlPoints(i.style)}).done(function(){i.__animating=!1}).start(r)}function e(t,e){for(var i=arguments.length,n=2;i>n;n++){var r=arguments[n];t.style[r]=e.style[r]}}function i(t,i,n,r,o){var s=n.style;if(!i)i={position:n.position,style:{x:s.x,y:"vertical"==n._orient?s.y+s.height:s.y,width:"vertical"==n._orient?s.width:0,height:"vertical"!=n._orient?s.height:0}};var a=s.x,l=s.y,c=s.width,h=s.height,d=[n.position[0],n.position[1]];if(e(n,i,"x","y","width","height"),n.position=i.position,t.addShape(n),d[0]!=i.position[0]||d[1]!=i.position[1])t.animate(n.id,"").when(r,{position:d}).start(o);n.__animating=!0,t.animate(n.id,"style").when(r,{x:a,y:l,width:c,height:h}).done(function(){n.__animating=!1}).start(o)}function n(t,e,i,n,r){if(!e){var o=i.style.y;e={style:{y:[o[0],o[0],o[0],o[0]]}}}var s=i.style.y;i.style.y=e.style.y,t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(n,{y:s}).done(function(){i.__animating=!1}).start(r)}function r(t,e,i,n,r){var o=i.style.x,s=i.style.y,a=i.style.r0,l=i.style.r;if(i.__animating=!0,"r"!=i._animationAdd)i.style.r0=0,i.style.r=0,i.rotation=[2*Math.PI,o,s],t.addShape(i),t.animate(i.id,"style").when(n,{r0:a,r:l}).done(function(){i.__animating=!1}).start(r),t.animate(i.id,"").when(n,{rotation:[0,o,s]}).start(r);else i.style.r0=i.style.r,t.addShape(i),t.animate(i.id,"style").when(n,{r0:a}).done(function(){i.__animating=!1}).start(r)}function o(t,i,n,r,o){if(!i)if("r"!=n._animationAdd)i={style:{startAngle:n.style.startAngle,endAngle:n.style.startAngle}};else i={style:{r0:n.style.r}};var s=n.style.startAngle,a=n.style.endAngle;e(n,i,"startAngle","endAngle"),t.addShape(n),n.__animating=!0,t.animate(n.id,"style").when(r,{startAngle:s,endAngle:a}).done(function(){n.__animating=!1}).start(o)}function s(t,i,n,r,o){if(!i)i={style:{x:"left"==n.style.textAlign?n.style.x+100:n.style.x-100,y:n.style.y}};var s=n.style.x,a=n.style.y;e(n,i,"x","y"),t.addShape(n),n.__animating=!0,t.animate(n.id,"style").when(r,{x:s,y:a}).done(function(){n.__animating=!1}).start(o)}function a(t,e,i,n,r){var o=require("zrender/shape/Polygon").prototype.getRect(i.style),s=o.x+o.width/2,a=o.y+o.height/2;i.scale=[.1,.1,s,a],t.addShape(i),i.__animating=!0,t.animate(i.id,"").when(n,{scale:[1,1,s,a]}).done(function(){i.__animating=!1}).start(r)}function l(t,i,n,r,o){if(!i)i={style:{source0:0,source1:n.style.source1>0?360:-360,target0:0,target1:n.style.target1>0?360:-360}};var s=n.style.source0,a=n.style.source1,l=n.style.target0,c=n.style.target1;if(i.style)e(n,i,"source0","source1","target0","target1");t.addShape(n),n.__animating=!0,t.animate(n.id,"style").when(r,{source0:s,source1:a,target0:l,target1:c}).done(function(){n.__animating=!1}).start(o)}function c(t,e,i,n,r){if(!e)e={style:{angle:i.style.startAngle}};var o=i.style.angle;i.style.angle=e.style.angle,t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(n,{angle:o}).done(function(){i.__animating=!1}).start(r)}function h(t,e,n,r,o,s){if(n.style._x=n.style.x,n.style._y=n.style.y,n.style._width=n.style.width,n.style._height=n.style.height,!e){var a=n._x||0,l=n._y||0;n.scale=[.01,.01,a,l],t.addShape(n),n.__animating=!0,t.animate(n.id,"").delay(s).when(r,{scale:[1,1,a,l]}).done(function(){n.__animating=!1}).start(o||"QuinticOut")}else i(t,e,n,r,o)}function d(t,i,n,r,o){if(!i)i={style:{xStart:n.style.xStart,yStart:n.style.yStart,xEnd:n.style.xStart,yEnd:n.style.yStart}};var s=n.style.xStart,a=n.style.xEnd,l=n.style.yStart,c=n.style.yEnd;e(n,i,"xStart","xEnd","yStart","yEnd"),t.addShape(n),n.__animating=!0,t.animate(n.id,"style").when(r,{xStart:s,xEnd:a,yStart:l,yEnd:c}).done(function(){n.__animating=!1}).start(o)}function u(t,e,i,n,r){r=r||"QuinticOut",i.__animating=!0,t.addShape(i);var o=i.style,s=function(){i.__animating=!1},a=o.xStart,l=o.yStart,c=o.xEnd,h=o.yEnd;if(o.curveness>0){i.updatePoints(o);var d={p:0},u=o.cpX1,f=o.cpY1,m=[],g=[],v=p.quadraticSubdivide;t.animation.animate(d).when(n,{p:1}).during(function(){v(a,u,c,d.p,m),v(l,f,h,d.p,g),o.cpX1=m[1],o.cpY1=g[1],o.xEnd=m[2],o.yEnd=g[2],t.modShape(i)}).done(s).start(r)}else t.animate(i.id,"style").when(0,{xEnd:a,yEnd:l}).when(n,{xEnd:c,yEnd:h}).done(s).start(r)}var f=require("zrender/tool/util"),p=require("zrender/tool/curve");return{pointList:t,rectangle:i,candle:n,ring:r,sector:o,text:s,polygon:a,ribbon:l,gaugePointer:c,icon:h,line:d,markline:u}}),define("zrender/shape/Circle",["require","./Base","../tool/util"],function(require){"use strict";var t=require("./Base"),e=function(e){t.call(this,e)};return e.prototype={type:"circle",buildPath:function(t,e){t.moveTo(e.x+e.r,e.y),t.arc(e.x,e.y,e.r,0,2*Math.PI,!0)},getRect:function(t){if(t.__rect)return t.__rect;var e;if("stroke"==t.brushType||"fill"==t.brushType)e=t.lineWidth||1;else e=0;return t.__rect={x:Math.round(t.x-t.r-e/2),y:Math.round(t.y-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}},require("../tool/util").inherits(e,t),e}),define("echarts/util/ecEffect",["require","../util/ecData","zrender/shape/Circle","zrender/shape/Image","zrender/tool/curve","../util/shape/Icon","../util/shape/Symbol","zrender/shape/ShapeBundle","zrender/shape/Polyline","zrender/tool/vector","zrender/tool/env"],function(require){function t(t,e,i,n){var o,a=i.effect,c=a.color||i.style.strokeColor||i.style.color,h=a.shadowColor||c,d=a.scaleSize,u=a.bounceDistance,p="undefined"!=typeof a.shadowBlur?a.shadowBlur:d;if("image"!==i.type){if(o=new l({zlevel:n,style:{brushType:"stroke",iconType:"droplet"!=i.style.iconType?i.style.iconType:"circle",x:p+1,y:p+1,n:i.style.n,width:i.style._width*d,height:i.style._height*d,lineWidth:1,strokeColor:c,shadowColor:h,shadowBlur:p},draggable:!1,hoverable:!1}),"pin"==i.style.iconType)o.style.y+=o.style.height/2*1.5;if(f)o.style.image=t.shapeToImage(o,o.style.width+2*p+2,o.style.height+2*p+2).style.image,o=new s({zlevel:o.zlevel,style:o.style,draggable:!1,hoverable:!1})}else o=new s({zlevel:n,style:i.style,draggable:!1,hoverable:!1});r.clone(i,o),o.position=i.position,e.push(o),t.addShape(o);var m="image"!==i.type?window.devicePixelRatio||1:1,g=(o.style.width/m-i.style._width)/2;if(o.style.x=i.style._x-g,o.style.y=i.style._y-g,"pin"==i.style.iconType)o.style.y-=i.style.height/2*1.5;var v=100*(a.period+10*Math.random());t.modShape(i.id,{invisible:!0});var y=o.style.x+o.style.width/2/m,_=o.style.y+o.style.height/2/m;if("scale"===a.type)t.modShape(o.id,{scale:[.1,.1,y,_]}),t.animate(o.id,"",a.loop).when(v,{scale:[1,1,y,_]}).done(function(){i.effect.show=!1,t.delShape(o.id)}).start();else t.animate(o.id,"style",a.loop).when(v,{y:o.style.y-u}).when(2*v,{y:o.style.y}).done(function(){i.effect.show=!1,t.delShape(o.id)}).start()}function e(t,e,i,n){var r=i.effect,o=r.color||i.style.strokeColor||i.style.color,s=r.scaleSize,a=r.shadowColor||o,l="undefined"!=typeof r.shadowBlur?r.shadowBlur:2*s,h=window.devicePixelRatio||1,d=new c({zlevel:n,position:i.position,scale:i.scale,style:{pointList:i.style.pointList,iconType:i.style.iconType,color:o,strokeColor:o,shadowColor:a,shadowBlur:l*h,random:!0,brushType:"fill",lineWidth:1,size:i.style.size},draggable:!1,hoverable:!1});e.push(d),t.addShape(d),t.modShape(i.id,{invisible:!0});for(var u=Math.round(100*r.period),f={},p={},m=0;20>m;m++)d.style["randomMap"+m]=0,f={},f["randomMap"+m]=100,p={},p["randomMap"+m]=0,d.style["randomMap"+m]=100*Math.random(),t.animate(d.id,"style",!0).when(u,f).when(2*u,p).when(3*u,f).when(4*u,f).delay(Math.random()*u*m).start()}function i(t,e,i,n,s){var l=i.effect,c=i.style,h=l.color||c.strokeColor||c.color,p=l.shadowColor||c.strokeColor||h,m=c.lineWidth*l.scaleSize,g="undefined"!=typeof l.shadowBlur?l.shadowBlur:m,v=new o({zlevel:n,style:{x:g,y:g,r:m,color:h,shadowColor:p,shadowBlur:g},hoverable:!1}),y=0;if(f&&!s){var n=v.zlevel;v=t.shapeToImage(v,2*(m+g),2*(m+g)),v.zlevel=n,v.hoverable=!1,y=g}if(!s)r.clone(i,v),v.position=i.position,e.push(v),t.addShape(v);var _=function(){if(!s)i.effect.show=!1,t.delShape(v.id);v.effectAnimator=null};if(i instanceof d){for(var b=[0],x=0,w=c.pointList,T=c.controlPointList,S=1;S<w.length;S++){if(T){var C=T[2*(S-1)],k=T[2*(S-1)+1];x+=u.dist(w[S-1],C)+u.dist(C,k)+u.dist(k,w[S])}else x+=u.dist(w[S-1],w[S]);b.push(x)}for(var $={p:0},E=t.animation.animate($,{loop:l.loop}),S=0;S<b.length;S++)E.when(b[S]*l.period,{p:S});E.during(function(){var e,i,n=Math.floor($.p);if(n==w.length-1)e=w[n][0],i=w[n][1];else{var r=$.p-n,o=w[n],l=w[n+1];if(T){var c=T[2*n],h=T[2*n+1];e=a.cubicAt(o[0],c[0],h[0],l[0],r),i=a.cubicAt(o[1],c[1],h[1],l[1],r)}else e=(l[0]-o[0])*r+o[0],i=(l[1]-o[1])*r+o[1]}if(v.style.x=e,v.style.y=i,!s)t.modShape(v)}).done(_).start(),E.duration=x*l.period,v.effectAnimator=E}else{var I=c.xStart-y,L=c.yStart-y,A=c.xEnd-y,M=c.yEnd-y;v.style.x=I,v.style.y=L;var P=(A-I)*(A-I)+(M-L)*(M-L),z=Math.round(Math.sqrt(Math.round(P*l.period*l.period)));if(i.style.curveness>0){var D=c.cpX1-y,O=c.cpY1-y;v.effectAnimator=t.animation.animate(v,{loop:l.loop}).when(z,{p:1}).during(function(e,i){if(v.style.x=a.quadraticAt(I,D,A,i),v.style.y=a.quadraticAt(L,O,M,i),!s)t.modShape(v)}).done(_).start()}else v.effectAnimator=t.animation.animate(v.style,{loop:l.loop}).when(z,{x:A,y:M}).during(function(){if(!s)t.modShape(v)}).done(_).start();v.effectAnimator.duration=z}return v}function n(t,e,n,r){var o=new h({style:{shapeList:[]},zlevel:r,hoverable:!1}),s=n.style.shapeList,a=n.effect;o.position=n.position;for(var l=0,c=[],d=0;d<s.length;d++){s[d].effect=a;var u=i(t,null,s[d],r,!0),f=u.effectAnimator;if(o.style.shapeList.push(u),f.duration>l)l=f.duration;if(0===d)o.style.color=u.style.color,o.style.shadowBlur=u.style.shadowBlur,o.style.shadowColor=u.style.shadowColor;c.push(f)}e.push(o),t.addShape(o);var p=function(){for(var t=0;t<c.length;t++)c[t].stop()};if(l){o.__dummy=0;var m=t.animate(o.id,"",a.loop).when(l,{__dummy:1}).during(function(){t.modShape(o)}).done(function(){n.effect.show=!1,t.delShape(o.id)}).start(),g=m.stop;m.stop=function(){p(),g.call(this)}}}var r=require("../util/ecData"),o=require("zrender/shape/Circle"),s=require("zrender/shape/Image"),a=require("zrender/tool/curve"),l=require("../util/shape/Icon"),c=require("../util/shape/Symbol"),h=require("zrender/shape/ShapeBundle"),d=require("zrender/shape/Polyline"),u=require("zrender/tool/vector"),f=require("zrender/tool/env").canvasSupported;return{point:t,largePoint:e,line:i,largeLine:n}}),define("echarts/util/accMath",[],function(){function t(t,e){var i=t.toString(),n=e.toString(),r=0;try{r=n.split(".")[1].length}catch(o){}try{r-=i.split(".")[1].length}catch(o){}return(i.replace(".","")-0)/(n.replace(".","")-0)*Math.pow(10,r)}function e(t,e){var i=t.toString(),n=e.toString(),r=0;try{r+=i.split(".")[1].length}catch(o){}try{r+=n.split(".")[1].length}catch(o){}return(i.replace(".","")-0)*(n.replace(".","")-0)/Math.pow(10,r)}function i(t,e){var i=0,n=0;try{i=t.toString().split(".")[1].length}catch(r){}try{n=e.toString().split(".")[1].length}catch(r){}var o=Math.pow(10,Math.max(i,n));return(Math.round(t*o)+Math.round(e*o))/o}function n(t,e){return i(t,-e)}return{accDiv:t,accMul:e,accAdd:i,accSub:n}}),define("echarts/util/ecQuery",["require","zrender/tool/util"],function(require){function t(t,e){if("undefined"!=typeof t){if(!e)return t;e=e.split(".");for(var i=e.length,n=0;i>n;){if(t=t[e[n]],"undefined"==typeof t)return;n++}return t}}function e(e,i){for(var n,r=0,o=e.length;o>r;r++)if(n=t(e[r],i),"undefined"!=typeof n)return n}function i(e,i){for(var r,o=e.length;o--;){var s=t(e[o],i);if("undefined"!=typeof s)if("undefined"==typeof r)r=n.clone(s);else n.merge(r,s,!0)}return r}var n=require("zrender/tool/util");return{query:t,deepQuery:e,deepMerge:i}}),define("echarts/util/number",[],function(){function t(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function e(e,i){if("string"==typeof e)if(t(e).match(/%$/))return parseFloat(e)/100*i;else return parseFloat(e);return e}function i(t,i){return[e(i[0],t.getWidth()),e(i[1],t.getHeight())]}function n(t,i){if(!(i instanceof Array))i=[0,i];var n=Math.min(t.getWidth(),t.getHeight())/2;return[e(i[0],n),e(i[1],n)]}function r(t){if(isNaN(t))return"-";else return t=(t+"").split("."),t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function o(t){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}return{parsePercent:e,parseCenter:i,parseRadius:n,addCommas:r,getPrecision:o}}),define("echarts/component/base",["require","../config","../util/ecData","../util/ecQuery","../util/number","zrender/tool/util","zrender/tool/env"],function(require){function t(t,n,r,o,s){this.ecTheme=t,this.messageCenter=n,this.zr=r,this.option=o,this.series=o.series,this.myChart=s,this.component=s.component,this.shapeList=[],this.effectList=[];var a=this;a._onlegendhoverlink=function(t){if(a.legendHoverLink)for(var n,r=t.target,o=a.shapeList.length-1;o>=0;o--)if(n=a.type==e.CHART_TYPE_PIE||a.type==e.CHART_TYPE_FUNNEL?i.get(a.shapeList[o],"name"):(i.get(a.shapeList[o],"series")||{}).name,n==r&&!a.shapeList[o].invisible&&!a.shapeList[o].__animating)a.zr.addHoverShape(a.shapeList[o])},n&&n.bind(e.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink)}var e=require("../config"),i=require("../util/ecData"),n=require("../util/ecQuery"),r=require("../util/number"),o=require("zrender/tool/util");return t.prototype={canvasSupported:require("zrender/tool/env").canvasSupported,_getZ:function(t){if(null!=this[t])return this[t];var i=this.ecTheme[this.type];if(i&&null!=i[t])return i[t];if(i=e[this.type],i&&null!=i[t])return i[t];else return 0},getZlevelBase:function(){return this._getZ("zlevel")},getZBase:function(){return this._getZ("z")},reformOption:function(t){return t=o.merge(o.merge(t||{},o.clone(this.ecTheme[this.type]||{})),o.clone(e[this.type]||{})),this.z=t.z,this.zlevel=t.zlevel,t},reformCssArray:function(t){if(t instanceof Array)switch(t.length+""){case"4":return t;case"3":return[t[0],t[1],t[2],t[1]];case"2":return[t[0],t[1],t[0],t[1]];case"1":return[t[0],t[0],t[0],t[0]];case"0":return[0,0,0,0]}else return[t,t,t,t]},getShapeById:function(t){for(var e=0,i=this.shapeList.length;i>e;e++)if(this.shapeList[e].id===t)return this.shapeList[e];return null},getFont:function(t){var e=this.getTextStyle(o.clone(t));return e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"px "+e.fontFamily},getTextStyle:function(t){return o.merge(o.merge(t||{},this.ecTheme.textStyle),e.textStyle)},getItemStyleColor:function(t,e,i,n){return"function"==typeof t?t.call(this.myChart,{seriesIndex:e,series:this.series[e],dataIndex:i,data:n}):t},getDataFromOption:function(t,e){return null!=t?null!=t.value?t.value:t:e},subPixelOptimize:function(t,e){if(e%2===1)t=Math.floor(t)+.5;else t=Math.round(t);return t},resize:function(){this.refresh&&this.refresh(),this.clearEffectShape&&this.clearEffectShape(!0);var t=this;setTimeout(function(){t.animationEffect&&t.animationEffect()},200)},clear:function(){this.clearEffectShape&&this.clearEffectShape(),this.zr&&this.zr.delShape(this.shapeList),this.shapeList=[]},dispose:function(){this.onbeforDispose&&this.onbeforDispose(),this.clear(),this.shapeList=null,this.effectList=null,this.messageCenter&&this.messageCenter.unbind(e.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink),this.onafterDispose&&this.onafterDispose()},query:n.query,deepQuery:n.deepQuery,deepMerge:n.deepMerge,parsePercent:r.parsePercent,parseCenter:r.parseCenter,parseRadius:r.parseRadius,numAddCommas:r.addCommas,getPrecision:r.getPrecision},t}),define("echarts/data/quickSelect",["require"],function(require){
function t(t,e){return t-e}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,i,n,r,o){for(var s=i;n>i;){var s=Math.round((n+i)/2),a=t[s];e(t,s,n),s=i;for(var l=i;n-1>=l;l++)if(o(a,t[l])>=0)e(t,l,s),s++;if(e(t,n,s),s===r)return s;else if(r>s)i=s+1;else n=s-1}return i}function n(e,n,r,o,s){if(arguments.length<=3){if(o=n,2==arguments.length)s=t;else s=r;n=0,r=e.length-1}return i(e,n,r,o,s)}return n}),define("echarts/data/KDTree",["require","./quickSelect"],function(require){function t(t,e){this.left=null,this.right=null,this.axis=t,this.data=e}var e=require("./quickSelect"),i=function(t,e){if(t.length){if(!e)e=t[0].array.length;this.dimension=e,this.root=this._buildTree(t,0,t.length-1,0),this._stack=[],this._nearstNList=[]}};return i.prototype._buildTree=function(i,n,r,o){if(n>r)return null;var s=Math.floor((n+r)/2);s=e(i,n,r,s,function(t,e){return t.array[o]-e.array[o]});var a=i[s],l=new t(o,a);if(o=(o+1)%this.dimension,r>n)l.left=this._buildTree(i,n,s-1,o),l.right=this._buildTree(i,s+1,r,o);return l},i.prototype.nearest=function(t,e){var i=this.root,n=this._stack,r=0,o=1/0,s=null;if(i.data!==t)o=e(i.data,t),s=i;if(t.array[i.axis]<i.data.array[i.axis])i.right&&(n[r++]=i.right),i.left&&(n[r++]=i.left);else i.left&&(n[r++]=i.left),i.right&&(n[r++]=i.right);for(;r--;){i=n[r];var a=t.array[i.axis]-i.data.array[i.axis],l=0>a,c=!1;if(a*=a,o>a){if(a=e(i.data,t),o>a&&i.data!==t)o=a,s=i;c=!0}if(l){if(c)i.right&&(n[r++]=i.right);i.left&&(n[r++]=i.left)}else{if(c)i.left&&(n[r++]=i.left);i.right&&(n[r++]=i.right)}}return s.data},i.prototype._addNearest=function(t,e,i){for(var n=this._nearstNList,r=t-1;r>0&&!(e>=n[r-1].dist);r--)n[r].dist=n[r-1].dist,n[r].node=n[r-1].node;n[r].dist=e,n[r].node=i},i.prototype.nearestN=function(t,e,i,n){if(0>=e)return n.length=0,n;for(var r=this.root,o=this._stack,s=0,a=this._nearstNList,l=0;e>l;l++){if(!a[l])a[l]={};a[l].dist=0,a[l].node=null}var c=i(r.data,t),h=0;if(r.data!==t)h++,this._addNearest(h,c,r);if(t.array[r.axis]<r.data.array[r.axis])r.right&&(o[s++]=r.right),r.left&&(o[s++]=r.left);else r.left&&(o[s++]=r.left),r.right&&(o[s++]=r.right);for(;s--;){r=o[s];var c=t.array[r.axis]-r.data.array[r.axis],d=0>c,u=!1;if(c*=c,e>h||c<a[h-1].dist){if(c=i(r.data,t),(e>h||c<a[h-1].dist)&&r.data!==t){if(e>h)h++;this._addNearest(h,c,r)}u=!0}if(d){if(u)r.right&&(o[s++]=r.right);r.left&&(o[s++]=r.left)}else{if(u)r.left&&(o[s++]=r.left);r.right&&(o[s++]=r.right)}}for(var l=0;h>l;l++)n[l]=a[l].node.data;return n.length=h,n},i}),define("echarts/layout/EdgeBundling",["require","../data/KDTree","zrender/tool/vector"],function(require){function t(t,e){t=t.array,e=e.array;var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return i*i+n*n+r*r+o*o}function e(t){this.points=[t.mp0,t.mp1],this.group=t}function i(t){var i=t.points;if(i[0][1]<i[1][1]||t instanceof e)this.array=[i[0][0],i[0][1],i[1][0],i[1][1]],this._startPoint=i[0],this._endPoint=i[1];else this.array=[i[1][0],i[1][1],i[0][0],i[0][1]],this._startPoint=i[1],this._endPoint=i[0];this.ink=c(i[0],i[1]),this.edge=t,this.group=null}function n(){this.edgeList=[],this.mp0=a(),this.mp1=a(),this.ink=0}function r(){this.maxNearestEdge=6,this.maxTurningAngle=Math.PI/4,this.maxIteration=20}var o=require("../data/KDTree"),s=require("zrender/tool/vector"),a=s.create,l=s.distSquare,c=s.dist,h=s.copy,d=s.clone;return i.prototype.getStartPoint=function(){return this._startPoint},i.prototype.getEndPoint=function(){return this._endPoint},n.prototype.addEdge=function(t){t.group=this,this.edgeList.push(t)},n.prototype.removeEdge=function(t){t.group=null,this.edgeList.splice(this.edgeList.indexOf(t),1)},r.prototype={constructor:r,run:function(t){function i(t,e){return l(t,e)<1e-10}function n(t,e){for(var n=[],r=0,o=0;o<t.length;o++)if(!(r>0&&i(t[o],n[r-1])))n[r++]=d(t[o]);if(e[0]&&!i(n[0],e[0]))n=n.reverse();return n}for(var r=this._iterate(t),o=0;o++<this.maxIteration;){for(var s=[],a=0;a<r.groups.length;a++)s.push(new e(r.groups[a]));var c=this._iterate(s);if(c.savedInk<=0)break;else r=c}var h=[],u=function(t,i){for(var r,o=0;o<t.length;o++){var s=t[o];if(s.edgeList[0]&&s.edgeList[0].edge instanceof e){for(var a=[],l=0;l<s.edgeList.length;l++)a.push(s.edgeList[l].edge.group);if(!i)r=[];else r=i.slice();r.unshift(s.mp0),r.push(s.mp1),u(a,r)}else for(var l=0;l<s.edgeList.length;l++){var c=s.edgeList[l];if(!i)r=[];else r=i.slice();r.unshift(s.mp0),r.push(s.mp1),r.unshift(c.getStartPoint()),r.push(c.getEndPoint()),h.push({points:n(r,c.edge.points),rawEdge:c.edge})}}};return u(r.groups),h},_iterate:function(e){for(var r=[],s=[],l=0,c=0;c<e.length;c++){var d=new i(e[c]);r.push(d)}for(var u=new o(r,4),f=[],p=a(),m=a(),g=0,v=a(),y=a(),_=0,c=0;c<r.length;c++){var d=r[c];if(!d.group){u.nearestN(d,this.maxNearestEdge,t,f);for(var b=0,x=null,w=null,T=0;T<f.length;T++){var S=f[T],C=0;if(S.group){if(S.group!==w)w=S.group,g=this._calculateGroupEdgeInk(S.group,d,p,m),C=S.group.ink+d.ink-g}else g=this._calculateEdgeEdgeInk(d,S,p,m),C=S.ink+d.ink-g;if(C>b)b=C,x=S,h(y,m),h(v,p),_=g}if(x){l+=b;var k;if(!x.group)k=new n,s.push(k),k.addEdge(x);k=x.group,h(k.mp0,v),h(k.mp1,y),k.ink=_,x.group.addEdge(d)}else{var k=new n;s.push(k),h(k.mp0,d.getStartPoint()),h(k.mp1,d.getEndPoint()),k.ink=d.ink,k.addEdge(d)}}else;}return{groups:s,edges:r,savedInk:l}},_calculateEdgeEdgeInk:function(){var t=[],e=[];return function(i,n,r,o){t[0]=i.getStartPoint(),t[1]=n.getStartPoint(),e[0]=i.getEndPoint(),e[1]=n.getEndPoint(),this._calculateMeetPoints(t,e,r,o);var s=c(t[0],r)+c(r,o)+c(o,e[0])+c(t[1],r)+c(o,e[1]);return s}}(),_calculateGroupEdgeInk:function(t,e,i,n){for(var r=[],o=[],s=0;s<t.edgeList.length;s++){var a=t.edgeList[s];r.push(a.getStartPoint()),o.push(a.getEndPoint())}r.push(e.getStartPoint()),o.push(e.getEndPoint()),this._calculateMeetPoints(r,o,i,n);for(var l=c(i,n),s=0;s<r.length;s++)l+=c(r[s],i)+c(o[s],n);return l},_calculateMeetPoints:function(){var t=a(),e=a();return function(i,n,r,o){s.set(t,0,0),s.set(e,0,0);for(var a=i.length,l=0;a>l;l++)s.add(t,t,i[l]);s.scale(t,t,1/a),a=n.length;for(var l=0;a>l;l++)s.add(e,e,n[l]);s.scale(e,e,1/a),this._limitTurningAngle(i,t,e,r),this._limitTurningAngle(n,e,t,o)}}(),_limitTurningAngle:function(){var t=a(),e=a(),i=a(),n=a();return function(r,o,a,h){var d=Math.cos(this.maxTurningAngle),u=Math.tan(this.maxTurningAngle);s.sub(t,o,a),s.normalize(t,t),s.copy(h,o);for(var f=0,p=0;p<r.length;p++){var m=r[p];s.sub(e,m,o);var g=s.len(e);s.scale(e,e,1/g);var v=s.dot(e,t);if(d>v){s.scaleAndAdd(i,o,t,g*v);var y=c(i,m),_=y/u;s.scaleAndAdd(n,i,t,-_);var b=l(n,o);if(b>f)f=b,s.copy(h,n)}}}}()},r}),define("echarts/chart/base",["require","zrender/shape/Image","../util/shape/Icon","../util/shape/MarkLine","../util/shape/Symbol","zrender/shape/Polyline","zrender/shape/ShapeBundle","../config","../util/ecData","../util/ecAnimation","../util/ecEffect","../util/accMath","../component/base","../layout/EdgeBundling","zrender/tool/util","zrender/tool/area"],function(require){function t(t){return null!=t.x&&null!=t.y}function e(t,e,i,n,r){f.call(this,t,e,i,n,r);var o=this;this.selectedMap={},this.lastShapeList=[],this.shapeHandler={onclick:function(){o.isClick=!0},ondragover:function(t){var e=t.target;e.highlightStyle=e.highlightStyle||{};var i=e.highlightStyle,n=i.brushTyep,r=i.strokeColor,s=i.lineWidth;i.brushType="stroke",i.strokeColor=o.ecTheme.calculableColor||l.calculableColor,i.lineWidth="icon"===e.type?30:10,o.zr.addHoverShape(e),setTimeout(function(){if(i)i.brushType=n,i.strokeColor=r,i.lineWidth=s},20)},ondrop:function(t){if(null!=c.get(t.dragged,"data"))o.isDrop=!0},ondragend:function(){o.isDragend=!0}}}var i=require("zrender/shape/Image"),n=require("../util/shape/Icon"),r=require("../util/shape/MarkLine"),o=require("../util/shape/Symbol"),s=require("zrender/shape/Polyline"),a=require("zrender/shape/ShapeBundle"),l=require("../config"),c=require("../util/ecData"),h=require("../util/ecAnimation"),d=require("../util/ecEffect"),u=require("../util/accMath"),f=require("../component/base"),p=require("../layout/EdgeBundling"),m=require("zrender/tool/util"),g=require("zrender/tool/area");return e.prototype={setCalculable:function(t){return t.dragEnableTime=this.ecTheme.DRAG_ENABLE_TIME||l.DRAG_ENABLE_TIME,t.ondragover=this.shapeHandler.ondragover,t.ondragend=this.shapeHandler.ondragend,t.ondrop=this.shapeHandler.ondrop,t},ondrop:function(t,e){if(this.isDrop&&t.target&&!e.dragIn){var i,n=t.target,r=t.dragged,o=c.get(n,"seriesIndex"),s=c.get(n,"dataIndex"),a=this.series,h=this.component.legend;if(-1===s){if(c.get(r,"seriesIndex")==o)return e.dragOut=e.dragIn=e.needRefresh=!0,void(this.isDrop=!1);if(i={value:c.get(r,"value"),name:c.get(r,"name")},this.type===l.CHART_TYPE_PIE&&i.value<0)i.value=0;for(var d=!1,f=a[o].data,p=0,m=f.length;m>p;p++)if(f[p].name===i.name&&"-"===f[p].value)a[o].data[p].value=i.value,d=!0;!d&&a[o].data.push(i),h&&h.add(i.name,r.style.color||r.style.strokeColor)}else if(i=a[o].data[s]||"-",null!=i.value){if("-"!=i.value)a[o].data[s].value=u.accAdd(a[o].data[s].value,c.get(r,"value"));else a[o].data[s].value=c.get(r,"value");if(this.type===l.CHART_TYPE_FUNNEL||this.type===l.CHART_TYPE_PIE)h&&1===h.getRelatedAmount(i.name)&&this.component.legend.del(i.name),i.name+=this.option.nameConnector+c.get(r,"name"),h&&h.add(i.name,r.style.color||r.style.strokeColor)}else if("-"!=i)a[o].data[s]=u.accAdd(a[o].data[s],c.get(r,"value"));else a[o].data[s]=c.get(r,"value");e.dragIn=e.dragIn||!0,this.isDrop=!1;var g=this;setTimeout(function(){g.zr.trigger("mousemove",t.event)},300)}},ondragend:function(t,e){if(this.isDragend&&t.target&&!e.dragOut){var i=t.target,n=c.get(i,"seriesIndex"),r=c.get(i,"dataIndex"),o=this.series;if(null!=o[n].data[r].value){o[n].data[r].value="-";var s=o[n].data[r].name,a=this.component.legend;if(a&&0===a.getRelatedAmount(s))a.del(s)}else o[n].data[r]="-";e.dragOut=!0,e.needRefresh=!0,this.isDragend=!1}},onlegendSelected:function(t,e){var i=t.selected;for(var n in this.selectedMap){if(this.selectedMap[n]!=i[n])e.needRefresh=!0;this.selectedMap[n]=i[n]}},_buildPosition:function(){this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this._sIndex2ColorMap={},this.selectedMap={},this.xMarkMap={};for(var t,e,i,n,r=this.series,o={top:[],bottom:[],left:[],right:[],other:[]},s=0,a=r.length;a>s;s++)if(r[s].type===this.type)if(r[s]=this.reformOption(r[s]),this.legendHoverLink=r[s].legendHoverLink||this.legendHoverLink,t=r[s].xAxisIndex,e=r[s].yAxisIndex,i=this.component.xAxis.getAxis(t),n=this.component.yAxis.getAxis(e),i.type===l.COMPONENT_TYPE_AXIS_CATEGORY)o[i.getPosition()].push(s);else if(n.type===l.COMPONENT_TYPE_AXIS_CATEGORY)o[n.getPosition()].push(s);else o.other.push(s);for(var c in o)if(o[c].length>0)this._buildSinglePosition(c,o[c]);this.addShapeList()},_buildSinglePosition:function(t,e){var i=this._mapData(e),n=i.locationMap,r=i.maxDataLength;if(0!==r&&0!==n.length){switch(t){case"bottom":case"top":this._buildHorizontal(e,r,n,this.xMarkMap);break;case"left":case"right":this._buildVertical(e,r,n,this.xMarkMap);break;case"other":this._buildOther(e,r,n,this.xMarkMap)}for(var o=0,s=e.length;s>o;o++)this.buildMark(e[o])}},_mapData:function(t){for(var e,i,n,r,o=this.series,s=0,a={},c="__kener__stack__",h=this.component.legend,d=[],u=0,f=0,p=t.length;p>f;f++){if(e=o[t[f]],n=e.name,this._sIndex2ShapeMap[t[f]]=this._sIndex2ShapeMap[t[f]]||this.query(e,"symbol")||this._symbol[f%this._symbol.length],h){if(this.selectedMap[n]=h.isSelected(n),this._sIndex2ColorMap[t[f]]=h.getColor(n),r=h.getItemShape(n)){var m=r.style;if(this.type==l.CHART_TYPE_LINE)m.iconType="legendLineIcon",m.symbol=this._sIndex2ShapeMap[t[f]];else if(e.itemStyle.normal.barBorderWidth>0){var g=r.highlightStyle;m.brushType="both",m.x+=1,m.y+=1,m.width-=2,m.height-=2,m.strokeColor=g.strokeColor=e.itemStyle.normal.barBorderColor,g.lineWidth=3}h.setItemShape(n,r)}}else this.selectedMap[n]=!0,this._sIndex2ColorMap[t[f]]=this.zr.getColor(t[f]);if(this.selectedMap[n])if(i=e.stack||c+t[f],null==a[i])a[i]=s,d[s]=[t[f]],s++;else d[a[i]].push(t[f]);u=Math.max(u,e.data.length)}return{locationMap:d,maxDataLength:u}},_calculMarkMapXY:function(t,e,i){for(var n=this.series,r=0,o=e.length;o>r;r++)for(var s=0,a=e[r].length;a>s;s++){var l=e[r][s],c="xy"==i?0:"",h=this.component.grid,d=t[l];if("-1"!=i.indexOf("x")){if(d["counter"+c]>0)d["average"+c]=d["sum"+c]/d["counter"+c];var u=this.component.xAxis.getAxis(n[l].xAxisIndex||0).getCoord(d["average"+c]);d["averageLine"+c]=[[u,h.getYend()],[u,h.getY()]],d["minLine"+c]=[[d["minX"+c],h.getYend()],[d["minX"+c],h.getY()]],d["maxLine"+c]=[[d["maxX"+c],h.getYend()],[d["maxX"+c],h.getY()]],d.isHorizontal=!1}if(c="xy"==i?1:"","-1"!=i.indexOf("y")){if(d["counter"+c]>0)d["average"+c]=d["sum"+c]/d["counter"+c];var f=this.component.yAxis.getAxis(n[l].yAxisIndex||0).getCoord(d["average"+c]);d["averageLine"+c]=[[h.getX(),f],[h.getXend(),f]],d["minLine"+c]=[[h.getX(),d["minY"+c]],[h.getXend(),d["minY"+c]]],d["maxLine"+c]=[[h.getX(),d["maxY"+c]],[h.getXend(),d["maxY"+c]]],d.isHorizontal=!0}}},addLabel:function(t,e,i,n,r){var o=[i,e],s=this.deepMerge(o,"itemStyle.normal.label"),a=this.deepMerge(o,"itemStyle.emphasis.label"),l=s.textStyle||{},c=a.textStyle||{};if(s.show){var h=t.style;h.text=this._getLabelText(e,i,n,"normal"),h.textPosition=null==s.position?"horizontal"===r?"right":"top":s.position,h.textColor=l.color,h.textFont=this.getFont(l),h.textAlign=l.align,h.textBaseline=l.baseline}if(a.show){var d=t.highlightStyle;d.text=this._getLabelText(e,i,n,"emphasis"),d.textPosition=s.show?t.style.textPosition:null==a.position?"horizontal"===r?"right":"top":a.position,d.textColor=c.color,d.textFont=this.getFont(c),d.textAlign=c.align,d.textBaseline=c.baseline}return t},_getLabelText:function(t,e,i,n){var r=this.deepQuery([e,t],"itemStyle."+n+".label.formatter");if(!r&&"emphasis"===n)r=this.deepQuery([e,t],"itemStyle.normal.label.formatter");var o=this.getDataFromOption(e,"-");if(r){if("function"==typeof r)return r.call(this.myChart,{seriesName:t.name,series:t,name:i,value:o,data:e,status:n});else if("string"==typeof r)return r=r.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{a0}",t.name).replace("{b0}",i).replace("{c0}",this.numAddCommas(o))}else if(o instanceof Array)return null!=o[2]?this.numAddCommas(o[2]):o[0]+" , "+o[1];else return this.numAddCommas(o)},buildMark:function(t){var e=this.series[t];if(this.selectedMap[e.name])e.markLine&&this._buildMarkLine(t),e.markPoint&&this._buildMarkPoint(t)},_buildMarkPoint:function(t){for(var e,i,n=(this.markAttachStyle||{})[t],r=this.series[t],o=m.clone(r.markPoint),s=0,a=o.data.length;a>s;s++)if(e=o.data[s],i=this.getMarkCoord(t,e),e.x=null!=e.x?e.x:i[0],e.y=null!=e.y?e.y:i[1],e.type&&("max"===e.type||"min"===e.type))e.value=i[3],e.name=e.name||e.type,e.symbolSize=e.symbolSize||g.getTextWidth(i[3],this.getFont())/2+5;for(var c=this._markPoint(t,o),s=0,a=c.length;a>s;s++){var h=c[s];h.zlevel=r.zlevel,h.z=r.z+1;for(var d in n)h[d]=m.clone(n[d]);this.shapeList.push(h)}if(this.type===l.CHART_TYPE_FORCE||this.type===l.CHART_TYPE_CHORD)for(var s=0,a=c.length;a>s;s++)this.zr.addShape(c[s])},_buildMarkLine:function(t){for(var e,i=(this.markAttachStyle||{})[t],n=this.series[t],r=m.clone(n.markLine),o=0,s=r.data.length;s>o;o++){var c=r.data[o];if(c.type&&("max"===c.type||"min"===c.type||"average"===c.type))e=this.getMarkCoord(t,c),r.data[o]=[m.clone(c),{}],r.data[o][0].name=c.name||c.type,r.data[o][0].value="average"!==c.type?e[3]:+e[3].toFixed(null!=r.precision?r.precision:this.deepQuery([this.ecTheme,l],"markLine.precision")),e=e[2],c=[{},{}];else e=[this.getMarkCoord(t,c[0]),this.getMarkCoord(t,c[1])];if(null!=e&&null!=e[0]&&null!=e[1])r.data[o][0].x=null!=c[0].x?c[0].x:e[0][0],r.data[o][0].y=null!=c[0].y?c[0].y:e[0][1],r.data[o][1].x=null!=c[1].x?c[1].x:e[1][0],r.data[o][1].y=null!=c[1].y?c[1].y:e[1][1];else;}var h=this._markLine(t,r),d=r.large;if(d){var u=new a({style:{shapeList:h}}),f=h[0];if(f){m.merge(u.style,f.style),m.merge(u.highlightStyle={},f.highlightStyle),u.style.brushType="stroke",u.zlevel=n.zlevel,u.z=n.z+1,u.hoverable=!1;for(var p in i)u[p]=m.clone(i[p])}this.shapeList.push(u),this.zr.addShape(u),u._mark="largeLine";var g=r.effect;if(g.show)u.effect=g}else{for(var o=0,s=h.length;s>o;o++){var v=h[o];v.zlevel=n.zlevel,v.z=n.z+1;for(var p in i)v[p]=m.clone(i[p]);this.shapeList.push(v)}if(this.type===l.CHART_TYPE_FORCE||this.type===l.CHART_TYPE_CHORD)for(var o=0,s=h.length;s>o;o++)this.zr.addShape(h[o])}},_markPoint:function(t,e){var i=this.series[t],n=this.component;m.merge(m.merge(e,m.clone(this.ecTheme.markPoint||{})),m.clone(l.markPoint)),e.name=i.name;var r,o,s,a,h,d,u,f=[],p=e.data,g=n.dataRange,v=n.legend,y=this.zr.getWidth(),_=this.zr.getHeight();if(!e.large)for(var b=0,x=p.length;x>b;b++)if(null!=p[b].x&&null!=p[b].y){if(s=null!=p[b].value?p[b].value:"",v)o=v.getColor(i.name);if(g)if(o=isNaN(s)?o:g.getColor(s),a=[p[b],e],h=this.deepQuery(a,"itemStyle.normal.color")||o,d=this.deepQuery(a,"itemStyle.emphasis.color")||h,null==h&&null==d)continue;if(o=null==o?this.zr.getColor(t):o,p[b].tooltip=p[b].tooltip||e.tooltip||{trigger:"item"},p[b].name=null!=p[b].name?p[b].name:"",p[b].value=s,r=this.getSymbolShape(e,t,p[b],b,p[b].name,this.parsePercent(p[b].x,y),this.parsePercent(p[b].y,_),"pin",o,"rgba(0,0,0,0)","horizontal"),r._mark="point",u=this.deepMerge([p[b],e],"effect"),u.show)r.effect=u;if(i.type===l.CHART_TYPE_MAP)r._geo=this.getMarkGeo(p[b]);c.pack(r,i,t,p[b],b,p[b].name,s),f.push(r)}else;else r=this.getLargeMarkPointShape(t,e),r._mark="largePoint",r&&f.push(r);return f},_markLine:function(){function e(t,e){t[e]=t[e]instanceof Array?t[e].length>1?t[e]:[t[e][0],t[e][0]]:[t[e],t[e]]}return function(i,n){var r=this.series[i],o=this.component,s=o.dataRange,a=o.legend;m.merge(m.merge(n,m.clone(this.ecTheme.markLine||{})),m.clone(l.markLine));var h=a?a.getColor(r.name):this.zr.getColor(i);e(n,"symbol"),e(n,"symbolSize"),e(n,"symbolRotate");for(var d=n.data,u=[],f=this.zr.getWidth(),g=this.zr.getHeight(),v=0;v<d.length;v++){var y=d[v];if(t(y[0])&&t(y[1])){var _=this.deepMerge(y),b=[_,n],x=h,w=null!=_.value?_.value:"";if(s){x=isNaN(w)?x:s.getColor(w);var T=this.deepQuery(b,"itemStyle.normal.color")||x,S=this.deepQuery(b,"itemStyle.emphasis.color")||T;if(null==T&&null==S)continue}y[0].tooltip=_.tooltip||n.tooltip||{trigger:"item"},y[0].name=y[0].name||"",y[1].name=y[1].name||"",y[0].value=w,u.push({points:[[this.parsePercent(y[0].x,f),this.parsePercent(y[0].y,g)],[this.parsePercent(y[1].x,f),this.parsePercent(y[1].y,g)]],rawData:y,color:x})}}var C=this.query(n,"bundling.enable");if(C){var k=new p;k.maxTurningAngle=this.query(n,"bundling.maxTurningAngle")/180*Math.PI,u=k.run(u)}n.name=r.name;for(var $=[],v=0,E=u.length;E>v;v++){var I=u[v],L=I.rawEdge||I,y=L.rawData,w=null!=y.value?y.value:"",A=this.getMarkLineShape(n,i,y,v,I.points,C,L.color);A._mark="line";var M=this.deepMerge([y[0],y[1],n],"effect");if(M.show)A.effect=M,A.effect.large=n.large;if(r.type===l.CHART_TYPE_MAP)A._geo=[this.getMarkGeo(y[0]),this.getMarkGeo(y[1])];c.pack(A,r,i,y[0],v,y[0].name+(""!==y[1].name?" > "+y[1].name:""),w),$.push(A)}return $}}(),getMarkCoord:function(){return[0,0]},getSymbolShape:function(t,e,r,o,s,a,l,h,d,u,f){var p=[r,t],m=this.getDataFromOption(r,"-");h=this.deepQuery(p,"symbol")||h;var g=this.deepQuery(p,"symbolSize");if(g="function"==typeof g?g(m):g,"number"==typeof g)g=[g,g];var v=this.deepQuery(p,"symbolRotate"),y=this.deepMerge(p,"itemStyle.normal"),_=this.deepMerge(p,"itemStyle.emphasis"),b=null!=y.borderWidth?y.borderWidth:y.lineStyle&&y.lineStyle.width;if(null==b)b=h.match("empty")?2:0;var x=null!=_.borderWidth?_.borderWidth:_.lineStyle&&_.lineStyle.width;if(null==x)x=b+2;var w=this.getItemStyleColor(y.color,e,o,r),T=this.getItemStyleColor(_.color,e,o,r),S=g[0],C=g[1],k=new n({style:{iconType:h.replace("empty","").toLowerCase(),x:a-S,y:l-C,width:2*S,height:2*C,brushType:"both",color:h.match("empty")?u:w||d,strokeColor:y.borderColor||w||d,lineWidth:b},highlightStyle:{color:h.match("empty")?u:T||w||d,strokeColor:_.borderColor||y.borderColor||T||w||d,lineWidth:x},clickable:this.deepQuery(p,"clickable")});if(h.match("image"))k.style.image=h.replace(new RegExp("^image:\\/\\/"),""),k=new i({style:k.style,highlightStyle:k.highlightStyle,clickable:this.deepQuery(p,"clickable")});if(null!=v)k.rotation=[v*Math.PI/180,a,l];if(h.match("star"))k.style.iconType="star",k.style.n=h.replace("empty","").replace("star","")-0||5;if("none"===h)k.invisible=!0,k.hoverable=!1;if(k=this.addLabel(k,t,r,s,f),h.match("empty")){if(null==k.style.textColor)k.style.textColor=k.style.strokeColor;if(null==k.highlightStyle.textColor)k.highlightStyle.textColor=k.highlightStyle.strokeColor}return c.pack(k,t,e,r,o,s),k._x=a,k._y=l,k._dataIndex=o,k._seriesIndex=e,k},getMarkLineShape:function(t,e,i,n,o,a,l){var c=null!=i[0].value?i[0].value:"-",h=null!=i[1].value?i[1].value:"-",d=[i[0].symbol||t.symbol[0],i[1].symbol||t.symbol[1]],u=[i[0].symbolSize||t.symbolSize[0],i[1].symbolSize||t.symbolSize[1]];u[0]="function"==typeof u[0]?u[0](c):u[0],u[1]="function"==typeof u[1]?u[1](h):u[1];var f=[this.query(i[0],"symbolRotate")||t.symbolRotate[0],this.query(i[1],"symbolRotate")||t.symbolRotate[1]],p=[i[0],i[1],t],m=this.deepMerge(p,"itemStyle.normal");m.color=this.getItemStyleColor(m.color,e,n,i);var g=this.deepMerge(p,"itemStyle.emphasis");g.color=this.getItemStyleColor(g.color,e,n,i);var v=m.lineStyle,y=g.lineStyle,_=v.width;if(null==_)_=m.borderWidth;var b=y.width;if(null==b)b=null!=g.borderWidth?g.borderWidth:_+2;var x=this.deepQuery(p,"smoothness");if(!this.deepQuery(p,"smooth"))x=0;var w=a?s:r,T=new w({style:{symbol:d,symbolSize:u,symbolRotate:f,brushType:"both",lineType:v.type,shadowColor:v.shadowColor||v.color||m.borderColor||m.color||l,shadowBlur:v.shadowBlur,shadowOffsetX:v.shadowOffsetX,shadowOffsetY:v.shadowOffsetY,color:m.color||l,strokeColor:v.color||m.borderColor||m.color||l,lineWidth:_,symbolBorderColor:m.borderColor||m.color||l,symbolBorder:m.borderWidth},highlightStyle:{shadowColor:y.shadowColor,shadowBlur:y.shadowBlur,shadowOffsetX:y.shadowOffsetX,shadowOffsetY:y.shadowOffsetY,color:g.color||m.color||l,strokeColor:y.color||v.color||g.borderColor||m.borderColor||g.color||m.color||l,lineWidth:b,symbolBorderColor:g.borderColor||m.borderColor||g.color||m.color||l,symbolBorder:null==g.borderWidth?m.borderWidth+2:g.borderWidth},clickable:this.deepQuery(p,"clickable")}),S=T.style;if(a)S.pointList=o,S.smooth=x;else S.xStart=o[0][0],S.yStart=o[0][1],S.xEnd=o[1][0],S.yEnd=o[1][1],S.curveness=x,T.updatePoints(T.style);return T=this.addLabel(T,t,i[0],i[0].name+" : "+i[1].name)},getLargeMarkPointShape:function(t,e){var i,n,r,s,a,l,c=this.series[t],h=this.component,d=e.data,u=h.dataRange,f=h.legend,p=[d[0],e];if(f)n=f.getColor(c.name);if(u)if(r=null!=d[0].value?d[0].value:"",n=isNaN(r)?n:u.getColor(r),s=this.deepQuery(p,"itemStyle.normal.color")||n,a=this.deepQuery(p,"itemStyle.emphasis.color")||s,null==s&&null==a)return;n=this.deepMerge(p,"itemStyle.normal").color||n;var m=this.deepQuery(p,"symbol")||"circle";m=m.replace("empty","").replace(/\d/g,""),l=this.deepMerge([d[0],e],"effect");var g=window.devicePixelRatio||1;if(i=new o({style:{pointList:d,color:n,strokeColor:n,shadowColor:l.shadowColor||n,shadowBlur:(null!=l.shadowBlur?l.shadowBlur:8)*g,size:this.deepQuery(p,"symbolSize"),iconType:m,brushType:"fill",lineWidth:1},draggable:!1,hoverable:!1}),l.show)i.effect=l;return i},backupShapeList:function(){if(this.shapeList&&this.shapeList.length>0)this.lastShapeList=this.shapeList,this.shapeList=[];else this.lastShapeList=[]},addShapeList:function(){var t,e,i=this.option.animationThreshold/(this.canvasSupported?2:4),n=this.lastShapeList,r=this.shapeList,o=n.length>0,s=o?this.query(this.option,"animationDurationUpdate"):this.query(this.option,"animationDuration"),a=this.query(this.option,"animationEasing"),c={},h={};if(this.option.animation&&!this.option.renderAsImage&&r.length<i&&!this.motionlessOnce){for(var d=0,u=n.length;u>d;d++)if(e=this._getAnimationKey(n[d]),e.match("undefined"))this.zr.delShape(n[d].id);else if(e+=n[d].type,c[e])this.zr.delShape(n[d].id);else c[e]=n[d];for(var d=0,u=r.length;u>d;d++)if(e=this._getAnimationKey(r[d]),e.match("undefined"))this.zr.addShape(r[d]);else e+=r[d].type,h[e]=r[d];for(e in c)if(!h[e])this.zr.delShape(c[e].id);for(e in h)if(c[e])this.zr.delShape(c[e].id),this._animateMod(c[e],h[e],s,a,0,o);else t=(this.type==l.CHART_TYPE_LINE||this.type==l.CHART_TYPE_RADAR)&&0!==e.indexOf("icon")?s/2:0,this._animateMod(!1,h[e],s,a,t,o);this.zr.refresh(),this.animationEffect()}else{this.motionlessOnce=!1,this.zr.delShape(n);for(var d=0,u=r.length;u>d;d++)this.zr.addShape(r[d])}},_getAnimationKey:function(t){if(this.type!=l.CHART_TYPE_MAP&&this.type!=l.CHART_TYPE_TREEMAP&&this.type!=l.CHART_TYPE_VENN&&this.type!=l.CHART_TYPE_TREE)return c.get(t,"seriesIndex")+"_"+c.get(t,"dataIndex")+(t._mark?t._mark:"")+(this.type===l.CHART_TYPE_RADAR?c.get(t,"special"):"");else return c.get(t,"seriesIndex")+"_"+c.get(t,"dataIndex")+(t._mark?t._mark:"undefined")},_animateMod:function(t,e,i,n,r,o){switch(e.type){case"polyline":case"half-smooth-polygon":h.pointList(this.zr,t,e,i,n);break;case"rectangle":h.rectangle(this.zr,t,e,i,n);break;case"image":case"icon":h.icon(this.zr,t,e,i,n,r);break;case"candle":if(!o)h.candle(this.zr,t,e,i,n);else this.zr.addShape(e);break;case"ring":case"sector":case"circle":if(!o)h.ring(this.zr,t,e,i+(c.get(e,"dataIndex")||0)%20*100,n);else if("sector"===e.type)h.sector(this.zr,t,e,i,n);else this.zr.addShape(e);break;case"text":h.text(this.zr,t,e,i,n);break;case"polygon":if(!o)h.polygon(this.zr,t,e,i,n);else h.pointList(this.zr,t,e,i,n);break;case"ribbon":h.ribbon(this.zr,t,e,i,n);break;case"gauge-pointer":h.gaugePointer(this.zr,t,e,i,n);break;case"mark-line":h.markline(this.zr,t,e,i,n);break;case"bezier-curve":case"line":h.line(this.zr,t,e,i,n);break;default:this.zr.addShape(e)}},animationMark:function(t,e,i){for(var i=i||this.shapeList,n=0,r=i.length;r>n;n++)if(i[n]._mark)this._animateMod(!1,i[n],t,e,0,!0);else;this.animationEffect(i)},animationEffect:function(t){if(!t&&this.clearEffectShape(),t=t||this.shapeList,null!=t){var e=l.EFFECT_ZLEVEL;if(this.canvasSupported)this.zr.modLayer(e,{motionBlur:!0,lastFrameAlpha:this.option.effectBlendAlpha||l.effectBlendAlpha});for(var i,n=0,r=t.length;r>n;n++)if(i=t[n],i._mark&&i.effect&&i.effect.show&&d[i._mark])d[i._mark](this.zr,this.effectList,i,e),this.effectList[this.effectList.length-1]._mark=i._mark;else;}},clearEffectShape:function(t){var e=this.effectList;if(this.zr&&e&&e.length>0){t&&this.zr.modLayer(l.EFFECT_ZLEVEL,{motionBlur:!1}),this.zr.delShape(e);for(var i=0;i<e.length;i++)if(e[i].effectAnimator)e[i].effectAnimator.stop()}this.effectList=[]},addMark:function(t,e,i){var n=this.series[t];if(this.selectedMap[n.name]){var r=this.query(this.option,"animationDurationUpdate"),o=this.query(this.option,"animationEasing"),s=n[i].data,a=this.shapeList.length;if(n[i].data=e.data,this["_build"+i.replace("m","M")](t),this.option.animation&&!this.option.renderAsImage)this.animationMark(r,o,this.shapeList.slice(a));else{for(var l=a,c=this.shapeList.length;c>l;l++)this.zr.addShape(this.shapeList[l]);this.zr.refreshNextFrame()}n[i].data=s}},delMark:function(t,e,i){i=i.replace("mark","").replace("large","").toLowerCase();var n=this.series[t];if(this.selectedMap[n.name]){for(var r=!1,o=[this.shapeList,this.effectList],s=2;s--;)for(var a=0,l=o[s].length;l>a;a++)if(o[s][a]._mark==i&&c.get(o[s][a],"seriesIndex")==t&&c.get(o[s][a],"name")==e){this.zr.delShape(o[s][a].id),o[s].splice(a,1),r=!0;break}r&&this.zr.refreshNextFrame()}}},m.inherits(e,f),e}),define("echarts/chart",[],function(){var t={},e={};return t.define=function(i,n){return e[i]=n,t},t.get=function(t){return e[t]},t}),define("echarts/chart/island",["require","./base","zrender/shape/Circle","../config","../util/ecData","zrender/tool/util","zrender/tool/event","zrender/tool/color","../util/accMath","../chart"],function(require){function t(t,i,n,o,a){e.call(this,t,i,n,o,a),this._nameConnector,this._valueConnector,this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth();var l=this;l.shapeHandler.onmousewheel=function(t){var e=t.target,i=t.event,n=s.getDelta(i);n=n>0?-1:1,e.style.r-=n,e.style.r=e.style.r<5?5:e.style.r;var o=r.get(e,"value"),a=o*l.option.island.calculateStep;o=a>1?Math.round(o-a*n):+(o-a*n).toFixed(2);var c=r.get(e,"name");e.style.text=c+":"+o,r.set(e,"value",o),r.set(e,"name",c),l.zr.modShape(e.id),l.zr.refreshNextFrame(),s.stop(i)}}var e=require("./base"),i=require("zrender/shape/Circle"),n=require("../config");n.island={zlevel:0,z:5,r:15,calculateStep:.1};var r=require("../util/ecData"),o=require("zrender/tool/util"),s=require("zrender/tool/event");return t.prototype={type:n.CHART_TYPE_ISLAND,_combine:function(t,e){var i=require("zrender/tool/color"),n=require("../util/accMath"),o=n.accAdd(r.get(t,"value"),r.get(e,"value")),s=r.get(t,"name")+this._nameConnector+r.get(e,"name");t.style.text=s+this._valueConnector+o,r.set(t,"value",o),r.set(t,"name",s),t.style.r=this.option.island.r,t.style.color=i.mix(t.style.color,e.style.color)},refresh:function(t){if(t)t.island=this.reformOption(t.island),this.option=t,this._nameConnector=this.option.nameConnector,this._valueConnector=this.option.valueConnector},getOption:function(){return this.option},resize:function(){var t=this.zr.getWidth(),e=this.zr.getHeight(),i=t/(this._zrWidth||t),n=e/(this._zrHeight||e);if(1!==i||1!==n){this._zrWidth=t,this._zrHeight=e;for(var r=0,o=this.shapeList.length;o>r;r++)this.zr.modShape(this.shapeList[r].id,{style:{x:Math.round(this.shapeList[r].style.x*i),y:Math.round(this.shapeList[r].style.y*n)}})}},add:function(t){var e=r.get(t,"name"),n=r.get(t,"value"),o=null!=r.get(t,"series")?r.get(t,"series").name:"",s=this.getFont(this.option.island.textStyle),a=this.option.island,l={zlevel:a.zlevel,z:a.z,style:{x:t.style.x,y:t.style.y,r:this.option.island.r,color:t.style.color||t.style.strokeColor,text:e+this._valueConnector+n,textFont:s},draggable:!0,hoverable:!0,onmousewheel:this.shapeHandler.onmousewheel,_type:"island"};if("#fff"===l.style.color)l.style.color=t.style.strokeColor;this.setCalculable(l),l.dragEnableTime=0,r.pack(l,{name:o},-1,n,-1,e),l=new i(l),this.shapeList.push(l),this.zr.addShape(l)},del:function(t){this.zr.delShape(t.id);for(var e=[],i=0,n=this.shapeList.length;n>i;i++)if(this.shapeList[i].id!=t.id)e.push(this.shapeList[i]);this.shapeList=e},ondrop:function(t,e){if(this.isDrop&&t.target){var i=t.target,n=t.dragged;this._combine(i,n),this.zr.modShape(i.id),e.dragIn=!0,this.isDrop=!1}},ondragend:function(t,e){var i=t.target;if(!this.isDragend){if(!e.dragIn)i.style.x=s.getX(t.event),i.style.y=s.getY(t.event),this.add(i),e.needRefresh=!0}else if(e.dragIn)this.del(i),e.needRefresh=!0;this.isDragend=!1}},o.inherits(t,e),require("../chart").define("island",t),t}),define("echarts/component",[],function(){var t={},e={};return t.define=function(i,n){return e[i]=n,t},t.get=function(t){return e[t]},t}),define("echarts/component/dataView",["require","./base","../config","zrender/tool/util","../component"],function(require){function t(t,i,n,r,o){if(e.call(this,t,i,n,r,o),this.dom=o.dom,this._tDom=document.createElement("div"),this._textArea=document.createElement("textArea"),this._buttonRefresh=document.createElement("button"),this._buttonRefresh.setAttribute("type","button"),this._buttonClose=document.createElement("button"),this._buttonClose.setAttribute("type","button"),this._hasShow=!1,this._zrHeight=n.getHeight(),this._zrWidth=n.getWidth(),this._tDom.className="echarts-dataview",this.hide(),this.dom.firstChild.appendChild(this._tDom),window.addEventListener)this._tDom.addEventListener("click",this._stop),this._tDom.addEventListener("mousewheel",this._stop),this._tDom.addEventListener("mousemove",this._stop),this._tDom.addEventListener("mousedown",this._stop),this._tDom.addEventListener("mouseup",this._stop),this._tDom.addEventListener("touchstart",this._stop),this._tDom.addEventListener("touchmove",this._stop),
this._tDom.addEventListener("touchend",this._stop);else this._tDom.attachEvent("onclick",this._stop),this._tDom.attachEvent("onmousewheel",this._stop),this._tDom.attachEvent("onmousemove",this._stop),this._tDom.attachEvent("onmousedown",this._stop),this._tDom.attachEvent("onmouseup",this._stop)}var e=require("./base"),i=require("../config"),n=require("zrender/tool/util");return t.prototype={type:i.COMPONENT_TYPE_DATAVIEW,_lang:["Data View","close","refresh"],_gCssText:"position:absolute;display:block;overflow:hidden;transition:height 0.8s,background-color 1s;-moz-transition:height 0.8s,background-color 1s;-webkit-transition:height 0.8s,background-color 1s;-o-transition:height 0.8s,background-color 1s;z-index:1;left:0;top:0;",hide:function(){this._sizeCssText="width:"+this._zrWidth+"px;height:0px;background-color:#f0ffff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},show:function(t){this._hasShow=!0;var e=this.query(this.option,"toolbox.feature.dataView.lang")||this._lang;this.option=t,this._tDom.innerHTML='<p style="padding:8px 0;margin:0 0 10px 0;border-bottom:1px solid #eee">'+(e[0]||this._lang[0])+"</p>";var i=this.query(this.option,"toolbox.feature.dataView.optionToContent");if("function"!=typeof i)this._textArea.value=this._optionToContent();else this._textArea=document.createElement("div"),this._textArea.innerHTML=i(this.option);this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;",this._tDom.appendChild(this._textArea),this._buttonClose.style.cssText="float:right;padding:1px 6px;",this._buttonClose.innerHTML=e[1]||this._lang[1];var n=this;if(this._buttonClose.onclick=function(){n.hide()},this._tDom.appendChild(this._buttonClose),this.query(this.option,"toolbox.feature.dataView.readOnly")===!1)this._buttonRefresh.style.cssText="float:right;margin-right:10px;padding:1px 6px;",this._buttonRefresh.innerHTML=e[2]||this._lang[2],this._buttonRefresh.onclick=function(){n._save()},this._textArea.readOnly=!1,this._textArea.style.cursor="default";else this._buttonRefresh.style.cssText="display:none",this._textArea.readOnly=!0,this._textArea.style.cursor="text";this._tDom.appendChild(this._buttonRefresh),this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},_optionToContent:function(){var t,e,n,r,o,s,a=[],l="";if(this.option.xAxis){if(this.option.xAxis instanceof Array)a=this.option.xAxis;else a=[this.option.xAxis];for(t=0,r=a.length;r>t;t++)if("category"==(a[t].type||"category")){for(s=[],e=0,n=a[t].data.length;n>e;e++)s.push(this.getDataFromOption(a[t].data[e]));l+=s.join(", ")+"\n\n"}}if(this.option.yAxis){if(this.option.yAxis instanceof Array)a=this.option.yAxis;else a=[this.option.yAxis];for(t=0,r=a.length;r>t;t++)if("category"==a[t].type){for(s=[],e=0,n=a[t].data.length;n>e;e++)s.push(this.getDataFromOption(a[t].data[e]));l+=s.join(", ")+"\n\n"}}var c,h=this.option.series;for(t=0,r=h.length;r>t;t++){for(s=[],e=0,n=h[t].data.length;n>e;e++){if(o=h[t].data[e],h[t].type==i.CHART_TYPE_PIE||h[t].type==i.CHART_TYPE_MAP)c=(o.name||"-")+":";else c="";if(h[t].type==i.CHART_TYPE_SCATTER)o=this.getDataFromOption(o).join(", ");s.push(c+this.getDataFromOption(o))}l+=(h[t].name||"-")+" : \n",l+=s.join(h[t].type==i.CHART_TYPE_SCATTER?"\n":", "),l+="\n\n"}return l},_save:function(){var t=this.query(this.option,"toolbox.feature.dataView.contentToOption");if("function"!=typeof t){for(var e=this._textArea.value.split("\n"),n=[],r=0,o=e.length;o>r;r++)if(e[r]=this._trim(e[r]),""!==e[r])n.push(e[r]);this._contentToOption(n)}else t(this._textArea,this.option);this.hide();var s=this;setTimeout(function(){s.messageCenter&&s.messageCenter.dispatch(i.EVENT.DATA_VIEW_CHANGED,null,{option:s.option},s.myChart)},s.canvasSupported?800:100)},_contentToOption:function(t){var e,n,r,o,s,a,l,c=[],h=0;if(this.option.xAxis){if(this.option.xAxis instanceof Array)c=this.option.xAxis;else c=[this.option.xAxis];for(e=0,o=c.length;o>e;e++)if("category"==(c[e].type||"category")){for(a=t[h].split(","),n=0,r=c[e].data.length;r>n;n++)if(l=this._trim(a[n]||""),s=c[e].data[n],"undefined"!=typeof c[e].data[n].value)c[e].data[n].value=l;else c[e].data[n]=l;h++}}if(this.option.yAxis){if(this.option.yAxis instanceof Array)c=this.option.yAxis;else c=[this.option.yAxis];for(e=0,o=c.length;o>e;e++)if("category"==c[e].type){for(a=t[h].split(","),n=0,r=c[e].data.length;r>n;n++)if(l=this._trim(a[n]||""),s=c[e].data[n],"undefined"!=typeof c[e].data[n].value)c[e].data[n].value=l;else c[e].data[n]=l;h++}}var d=this.option.series;for(e=0,o=d.length;o>e;e++)if(h++,d[e].type==i.CHART_TYPE_SCATTER)for(var n=0,r=d[e].data.length;r>n;n++){if(a=t[h],l=a.replace(" ","").split(","),"undefined"!=typeof d[e].data[n].value)d[e].data[n].value=l;else d[e].data[n]=l;h++}else{a=t[h].split(",");for(var n=0,r=d[e].data.length;r>n;n++)if(l=(a[n]||"").replace(/.*:/,""),l=this._trim(l),l="-"!=l&&""!==l?l-0:"-","undefined"!=typeof d[e].data[n].value)d[e].data[n].value=l;else d[e].data[n]=l;h++}},_trim:function(t){var e=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return t.replace(e,"")},_stop:function(t){if(t=t||window.event,t.stopPropagation)t.stopPropagation();else t.cancelBubble=!0},resize:function(){if(this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._tDom.offsetHeight>10)this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText,this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;"},dispose:function(){if(window.removeEventListener)this._tDom.removeEventListener("click",this._stop),this._tDom.removeEventListener("mousewheel",this._stop),this._tDom.removeEventListener("mousemove",this._stop),this._tDom.removeEventListener("mousedown",this._stop),this._tDom.removeEventListener("mouseup",this._stop),this._tDom.removeEventListener("touchstart",this._stop),this._tDom.removeEventListener("touchmove",this._stop),this._tDom.removeEventListener("touchend",this._stop);else this._tDom.detachEvent("onclick",this._stop),this._tDom.detachEvent("onmousewheel",this._stop),this._tDom.detachEvent("onmousemove",this._stop),this._tDom.detachEvent("onmousedown",this._stop),this._tDom.detachEvent("onmouseup",this._stop);if(this._buttonRefresh.onclick=null,this._buttonClose.onclick=null,this._hasShow)this._tDom.removeChild(this._textArea),this._tDom.removeChild(this._buttonRefresh),this._tDom.removeChild(this._buttonClose);this._textArea=null,this._buttonRefresh=null,this._buttonClose=null,this.dom.firstChild.removeChild(this._tDom),this._tDom=null}},n.inherits(t,e),require("../component").define("dataView",t),t}),define("echarts/component/toolbox",["require","./base","zrender/shape/Line","zrender/shape/Image","zrender/shape/Rectangle","../util/shape/Icon","../config","zrender/tool/util","zrender/config","zrender/tool/event","./dataView","../component"],function(require){function t(t,i,n,r,o){e.call(this,t,i,n,r,o),this.dom=o.dom,this._magicType={},this._magicMap={},this._isSilence=!1,this._iconList,this._iconShapeMap={},this._featureTitle={},this._featureIcon={},this._featureColor={},this._featureOption={},this._enableColor="red",this._disableColor="#ccc",this._markShapeList=[];var s=this;s._onMark=function(t){s.__onMark(t)},s._onMarkUndo=function(t){s.__onMarkUndo(t)},s._onMarkClear=function(t){s.__onMarkClear(t)},s._onDataZoom=function(t){s.__onDataZoom(t)},s._onDataZoomReset=function(t){s.__onDataZoomReset(t)},s._onDataView=function(t){s.__onDataView(t)},s._onRestore=function(t){s.__onRestore(t)},s._onSaveAsImage=function(t){s.__onSaveAsImage(t)},s._onMagicType=function(t){s.__onMagicType(t)},s._onCustomHandler=function(t){s.__onCustomHandler(t)},s._onmousemove=function(t){return s.__onmousemove(t)},s._onmousedown=function(t){return s.__onmousedown(t)},s._onmouseup=function(t){return s.__onmouseup(t)},s._onclick=function(t){return s.__onclick(t)}}var e=require("./base"),i=require("zrender/shape/Line"),n=require("zrender/shape/Image"),r=require("zrender/shape/Rectangle"),o=require("../util/shape/Icon"),s=require("../config");s.toolbox={zlevel:0,z:6,show:!1,orient:"horizontal",x:"right",y:"top",color:["#1e90ff","#22bb22","#4b0082","#d2691e"],disableColor:"#ddd",effectiveColor:"red",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemSize:16,showTitle:!0,feature:{mark:{show:!1,title:{mark:"辅助线开关",markUndo:"删除辅助线",markClear:"清空辅助线"},lineStyle:{width:1,color:"#1e90ff",type:"dashed"}},dataZoom:{show:!1,title:{dataZoom:"区域缩放",dataZoomReset:"区域缩放后退"}},dataView:{show:!1,title:"数据视图",readOnly:!1,lang:["数据视图","关闭","刷新"]},magicType:{show:!1,title:{line:"折线图切换",bar:"柱形图切换",stack:"堆积",tiled:"平铺",force:"力导向布局图切换",chord:"和弦图切换",pie:"饼图切换",funnel:"漏斗图切换"},type:[]},restore:{show:!1,title:"还原"},saveAsImage:{show:!1,title:"保存为图片",type:"png",lang:["点击保存"]}}};var a=require("zrender/tool/util"),l=require("zrender/config"),c=require("zrender/tool/event"),h="stack",d="tiled";return t.prototype={type:s.COMPONENT_TYPE_TOOLBOX,_buildShape:function(){this._iconList=[];var t=this.option.toolbox;this._enableColor=t.effectiveColor,this._disableColor=t.disableColor;var e=t.feature,i=[];for(var n in e)if(e[n].show)switch(n){case"mark":i.push({key:n,name:"mark"}),i.push({key:n,name:"markUndo"}),i.push({key:n,name:"markClear"});break;case"magicType":for(var r=0,o=e[n].type.length;o>r;r++){if(e[n].title[e[n].type[r]+"Chart"]=e[n].title[e[n].type[r]],e[n].option)e[n].option[e[n].type[r]+"Chart"]=e[n].option[e[n].type[r]];i.push({key:n,name:e[n].type[r]+"Chart"})}break;case"dataZoom":i.push({key:n,name:"dataZoom"}),i.push({key:n,name:"dataZoomReset"});break;case"saveAsImage":if(this.canvasSupported)i.push({key:n,name:"saveAsImage"});break;default:i.push({key:n,name:n})}if(i.length>0){for(var s,n,r=0,o=i.length;o>r;r++){if(s=i[r].name,n=i[r].key,this._iconList.push(s),this._featureTitle[s]=e[n].title[s]||e[n].title,e[n].icon)this._featureIcon[s]=e[n].icon[s]||e[n].icon;if(e[n].color)this._featureColor[s]=e[n].color[s]||e[n].color;if(e[n].option)this._featureOption[s]=e[n].option[s]||e[n].option}this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var r=0,o=this.shapeList.length;o>r;r++)this.zr.addShape(this.shapeList[r]);if(this._iconShapeMap.mark)this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear);if(this._iconShapeMap.dataZoomReset&&0===this._zoomQueue.length)this._iconDisable(this._iconShapeMap.dataZoomReset)}},_buildItem:function(){var t,e,i,r,s=this.option.toolbox,a=this._iconList.length,l=this._itemGroupLocation.x,c=this._itemGroupLocation.y,h=s.itemSize,d=s.itemGap,u=s.color instanceof Array?s.color:[s.color],f=this.getFont(s.textStyle);if("horizontal"===s.orient)e=this._itemGroupLocation.y/this.zr.getHeight()<.5?"bottom":"top",i=this._itemGroupLocation.x/this.zr.getWidth()<.5?"left":"right",r=this._itemGroupLocation.y/this.zr.getHeight()<.5?"top":"bottom";else e=this._itemGroupLocation.x/this.zr.getWidth()<.5?"right":"left";this._iconShapeMap={};for(var p=this,m=0;a>m;m++){if(t={type:"icon",zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:l,y:c,width:h,height:h,iconType:this._iconList[m],lineWidth:1,strokeColor:this._featureColor[this._iconList[m]]||u[m%u.length],brushType:"stroke"},highlightStyle:{lineWidth:1,text:s.showTitle?this._featureTitle[this._iconList[m]]:void 0,textFont:f,textPosition:e,strokeColor:this._featureColor[this._iconList[m]]||u[m%u.length]},hoverable:!0,clickable:!0},this._featureIcon[this._iconList[m]])t.style.image=this._featureIcon[this._iconList[m]].replace(new RegExp("^image:\\/\\/"),""),t.style.opacity=.8,t.highlightStyle.opacity=1,t.type="image";if("horizontal"===s.orient){if(0===m&&"left"===i)t.highlightStyle.textPosition="specific",t.highlightStyle.textAlign=i,t.highlightStyle.textBaseline=r,t.highlightStyle.textX=l,t.highlightStyle.textY="top"===r?c+h+10:c-10;if(m===a-1&&"right"===i)t.highlightStyle.textPosition="specific",t.highlightStyle.textAlign=i,t.highlightStyle.textBaseline=r,t.highlightStyle.textX=l+h,t.highlightStyle.textY="top"===r?c+h+10:c-10}switch(this._iconList[m]){case"mark":t.onclick=p._onMark;break;case"markUndo":t.onclick=p._onMarkUndo;break;case"markClear":t.onclick=p._onMarkClear;break;case"dataZoom":t.onclick=p._onDataZoom;break;case"dataZoomReset":t.onclick=p._onDataZoomReset;break;case"dataView":if(!this._dataView){var g=require("./dataView");this._dataView=new g(this.ecTheme,this.messageCenter,this.zr,this.option,this.myChart)}t.onclick=p._onDataView;break;case"restore":t.onclick=p._onRestore;break;case"saveAsImage":t.onclick=p._onSaveAsImage;break;default:if(this._iconList[m].match("Chart"))t._name=this._iconList[m].replace("Chart",""),t.onclick=p._onMagicType;else t.onclick=p._onCustomHandler}if("icon"===t.type)t=new o(t);else if("image"===t.type)t=new n(t);if(this.shapeList.push(t),this._iconShapeMap[this._iconList[m]]=t,"horizontal"===s.orient)l+=h+d;else c+=h+d}},_buildBackground:function(){var t=this.option.toolbox,e=this.reformCssArray(this.option.toolbox.padding);this.shapeList.push(new r({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-e[3],y:this._itemGroupLocation.y-e[0],width:this._itemGroupLocation.width+e[3]+e[1],height:this._itemGroupLocation.height+e[0]+e[2],brushType:0===t.borderWidth?"fill":"both",color:t.backgroundColor,strokeColor:t.borderColor,lineWidth:t.borderWidth}}))},_getItemGroupLocation:function(){var t=this.option.toolbox,e=this.reformCssArray(this.option.toolbox.padding),i=this._iconList.length,n=t.itemGap,r=t.itemSize,o=0,s=0;if("horizontal"===t.orient)o=(r+n)*i-n,s=r;else s=(r+n)*i-n,o=r;var a,l=this.zr.getWidth();switch(t.x){case"center":a=Math.floor((l-o)/2);break;case"left":a=e[3]+t.borderWidth;break;case"right":a=l-o-e[1]-t.borderWidth;break;default:a=t.x-0,a=isNaN(a)?0:a}var c,h=this.zr.getHeight();switch(t.y){case"top":c=e[0]+t.borderWidth;break;case"bottom":c=h-s-e[2]-t.borderWidth;break;case"center":c=Math.floor((h-s)/2);break;default:c=t.y-0,c=isNaN(c)?0:c}return{x:a,y:c,width:o,height:s}},__onmousemove:function(t){if(this._marking)this._markShape.style.xEnd=c.getX(t.event),this._markShape.style.yEnd=c.getY(t.event),this.zr.addHoverShape(this._markShape);if(this._zooming)this._zoomShape.style.width=c.getX(t.event)-this._zoomShape.style.x,this._zoomShape.style.height=c.getY(t.event)-this._zoomShape.style.y,this.zr.addHoverShape(this._zoomShape),this.dom.style.cursor="crosshair",c.stop(t.event);if(this._zoomStart&&"pointer"!=this.dom.style.cursor&&"move"!=this.dom.style.cursor)this.dom.style.cursor="crosshair"},__onmousedown:function(t){if(!t.target){this._zooming=!0;var e=c.getX(t.event),i=c.getY(t.event),n=this.option.dataZoom||{};return this._zoomShape=new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:e,y:i,width:1,height:1,brushType:"both"},highlightStyle:{lineWidth:2,color:n.fillerColor||s.dataZoom.fillerColor,strokeColor:n.handleColor||s.dataZoom.handleColor,brushType:"both"}}),this.zr.addHoverShape(this._zoomShape),!0}},__onmouseup:function(){if(!this._zoomShape||Math.abs(this._zoomShape.style.width)<10||Math.abs(this._zoomShape.style.height)<10)return this._zooming=!1,!0;if(this._zooming&&this.component.dataZoom){this._zooming=!1;var t=this.component.dataZoom.rectZoom(this._zoomShape.style);if(t)this._zoomQueue.push({start:t.start,end:t.end,start2:t.start2,end2:t.end2}),this._iconEnable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame()}return!0},__onclick:function(t){if(!t.target)if(this._marking)this._marking=!1,this._markShapeList.push(this._markShape),this._iconEnable(this._iconShapeMap.markUndo),this._iconEnable(this._iconShapeMap.markClear),this.zr.addShape(this._markShape),this.zr.refreshNextFrame();else if(this._markStart){this._marking=!0;var e=c.getX(t.event),n=c.getY(t.event);this._markShape=new i({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:e,yStart:n,xEnd:e,yEnd:n,lineWidth:this.query(this.option,"toolbox.feature.mark.lineStyle.width"),strokeColor:this.query(this.option,"toolbox.feature.mark.lineStyle.color"),lineType:this.query(this.option,"toolbox.feature.mark.lineStyle.type")}}),this.zr.addHoverShape(this._markShape)}},__onMark:function(t){var e=t.target;if(this._marking||this._markStart)this._resetMark(),this.zr.refreshNextFrame();else{this._resetZoom(),this.zr.modShape(e.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._markStart=!0;var i=this;setTimeout(function(){i.zr&&i.zr.on(l.EVENT.CLICK,i._onclick)&&i.zr.on(l.EVENT.MOUSEMOVE,i._onmousemove)},10)}return!0},__onMarkUndo:function(){if(this._marking)this._marking=!1;else{var t=this._markShapeList.length;if(t>=1){var e=this._markShapeList[t-1];if(this.zr.delShape(e.id),this.zr.refreshNextFrame(),this._markShapeList.pop(),1===t)this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear)}}return!0},__onMarkClear:function(){if(this._marking)this._marking=!1;var t=this._markShapeList.length;if(t>0){for(;t--;)this.zr.delShape(this._markShapeList.pop().id);this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear),this.zr.refreshNextFrame()}return!0},__onDataZoom:function(t){var e=t.target;if(this._zooming||this._zoomStart)this._resetZoom(),this.zr.refreshNextFrame(),this.dom.style.cursor="default";else{this._resetMark(),this.zr.modShape(e.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._zoomStart=!0;var i=this;setTimeout(function(){i.zr&&i.zr.on(l.EVENT.MOUSEDOWN,i._onmousedown)&&i.zr.on(l.EVENT.MOUSEUP,i._onmouseup)&&i.zr.on(l.EVENT.MOUSEMOVE,i._onmousemove)},10),this.dom.style.cursor="crosshair"}return!0},__onDataZoomReset:function(){if(this._zooming)this._zooming=!1;if(this._zoomQueue.pop(),this._zoomQueue.length>0)this.component.dataZoom.absoluteZoom(this._zoomQueue[this._zoomQueue.length-1]);else this.component.dataZoom.rectZoom(),this._iconDisable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame();return!0},_resetMark:function(){if(this._marking=!1,this._markStart){if(this._markStart=!1,this._iconShapeMap.mark)this.zr.modShape(this._iconShapeMap.mark.id,{style:{strokeColor:this._iconShapeMap.mark.highlightStyle.strokeColor}});this.zr.un(l.EVENT.CLICK,this._onclick),this.zr.un(l.EVENT.MOUSEMOVE,this._onmousemove)}},_resetZoom:function(){if(this._zooming=!1,this._zoomStart){if(this._zoomStart=!1,this._iconShapeMap.dataZoom)this.zr.modShape(this._iconShapeMap.dataZoom.id,{style:{strokeColor:this._iconShapeMap.dataZoom.highlightStyle.strokeColor}});this.zr.un(l.EVENT.MOUSEDOWN,this._onmousedown),this.zr.un(l.EVENT.MOUSEUP,this._onmouseup),this.zr.un(l.EVENT.MOUSEMOVE,this._onmousemove)}},_iconDisable:function(t){if("image"!=t.type)this.zr.modShape(t.id,{hoverable:!1,clickable:!1,style:{strokeColor:this._disableColor}});else this.zr.modShape(t.id,{hoverable:!1,clickable:!1,style:{opacity:.3}})},_iconEnable:function(t){if("image"!=t.type)this.zr.modShape(t.id,{hoverable:!0,clickable:!0,style:{strokeColor:t.highlightStyle.strokeColor}});else this.zr.modShape(t.id,{hoverable:!0,clickable:!0,style:{opacity:.8}})},__onDataView:function(){return this._dataView.show(this.option),!0},__onRestore:function(){return this._resetMark(),this._resetZoom(),this.messageCenter.dispatch(s.EVENT.RESTORE,null,null,this.myChart),!0},__onSaveAsImage:function(){var t=this.option.toolbox.feature.saveAsImage,e=t.type||"png";if("png"!=e&&"jpeg"!=e)e="png";var i;if(!this.myChart.isConnected())i=this.zr.toDataURL("image/"+e,this.option.backgroundColor&&"rgba(0,0,0,0)"===this.option.backgroundColor.replace(" ","")?"#fff":this.option.backgroundColor);else i=this.myChart.getConnectedDataURL(e);var n=document.createElement("div");n.id="__echarts_download_wrap__",n.style.cssText="position:fixed;z-index:99999;display:block;top:0;left:0;background-color:rgba(33,33,33,0.5);text-align:center;width:100%;height:100%;line-height:"+document.documentElement.clientHeight+"px;";var r=document.createElement("a");r.href=i,r.setAttribute("download",(t.name?t.name:this.option.title&&(this.option.title.text||this.option.title.subtext)?this.option.title.text||this.option.title.subtext:"ECharts")+"."+e),r.innerHTML='<img style="vertical-align:middle" src="'+i+'" title="'+(window.ActiveXObject||"ActiveXObject"in window?"右键->图片另存为":t.lang?t.lang[0]:"点击保存")+'"/>',n.appendChild(r),document.body.appendChild(n),r=null,n=null,setTimeout(function(){var t=document.getElementById("__echarts_download_wrap__");if(t)t.onclick=function(){var t=document.getElementById("__echarts_download_wrap__");t.onclick=null,t.innerHTML="",document.body.removeChild(t),t=null},t=null},500)},__onMagicType:function(t){this._resetMark();var e=t.target._name;if(!this._magicType[e]){if(this._magicType[e]=!0,e===s.CHART_TYPE_LINE)this._magicType[s.CHART_TYPE_BAR]=!1;else if(e===s.CHART_TYPE_BAR)this._magicType[s.CHART_TYPE_LINE]=!1;if(e===s.CHART_TYPE_PIE)this._magicType[s.CHART_TYPE_FUNNEL]=!1;else if(e===s.CHART_TYPE_FUNNEL)this._magicType[s.CHART_TYPE_PIE]=!1;if(e===s.CHART_TYPE_FORCE)this._magicType[s.CHART_TYPE_CHORD]=!1;else if(e===s.CHART_TYPE_CHORD)this._magicType[s.CHART_TYPE_FORCE]=!1;if(e===h)this._magicType[d]=!1;else if(e===d)this._magicType[h]=!1;this.messageCenter.dispatch(s.EVENT.MAGIC_TYPE_CHANGED,t.event,{magicType:this._magicType},this.myChart)}return!0},setMagicType:function(t){this._resetMark(),this._magicType=t,!this._isSilence&&this.messageCenter.dispatch(s.EVENT.MAGIC_TYPE_CHANGED,null,{magicType:this._magicType},this.myChart)},__onCustomHandler:function(t){var e=t.target.style.iconType,i=this.option.toolbox.feature[e].onclick;if("function"==typeof i)i.call(this,this.option)},reset:function(t,e){if(e&&this.clear(),this.query(t,"toolbox.show")&&this.query(t,"toolbox.feature.magicType.show")){var i=t.toolbox.feature.magicType.type,n=i.length;for(this._magicMap={};n--;)this._magicMap[i[n]]=!0;n=t.series.length;for(var r,o;n--;){if(r=t.series[n].type,this._magicMap[r]){if(o=t.xAxis instanceof Array?t.xAxis[t.series[n].xAxisIndex||0]:t.xAxis,o&&"category"===(o.type||"category"))o.__boundaryGap=null!=o.boundaryGap?o.boundaryGap:!0;if(o=t.yAxis instanceof Array?t.yAxis[t.series[n].yAxisIndex||0]:t.yAxis,o&&"category"===o.type)o.__boundaryGap=null!=o.boundaryGap?o.boundaryGap:!0;t.series[n].__type=r,t.series[n].__itemStyle=a.clone(t.series[n].itemStyle||{})}if(this._magicMap[h]||this._magicMap[d])t.series[n].__stack=t.series[n].stack}}this._magicType=e?{}:this._magicType||{};for(var s in this._magicType)if(this._magicType[s]){this.option=t,this.getMagicOption();break}var l=t.dataZoom;if(l&&l.show){var c=null!=l.start&&l.start>=0&&l.start<=100?l.start:0,u=null!=l.end&&l.end>=0&&l.end<=100?l.end:100;if(c>u)c+=u,u=c-u,c-=u;this._zoomQueue=[{start:c,end:u,start2:0,end2:100}]}else this._zoomQueue=[]},getMagicOption:function(){var t,e;if(this._magicType[s.CHART_TYPE_LINE]||this._magicType[s.CHART_TYPE_BAR]){for(var i=this._magicType[s.CHART_TYPE_LINE]?!1:!0,n=0,r=this.option.series.length;r>n;n++)if(e=this.option.series[n].type,e==s.CHART_TYPE_LINE||e==s.CHART_TYPE_BAR){if(t=this.option.xAxis instanceof Array?this.option.xAxis[this.option.series[n].xAxisIndex||0]:this.option.xAxis,t&&"category"===(t.type||"category"))t.boundaryGap=i?!0:t.__boundaryGap;if(t=this.option.yAxis instanceof Array?this.option.yAxis[this.option.series[n].yAxisIndex||0]:this.option.yAxis,t&&"category"===t.type)t.boundaryGap=i?!0:t.__boundaryGap}this._defaultMagic(s.CHART_TYPE_LINE,s.CHART_TYPE_BAR)}if(this._defaultMagic(s.CHART_TYPE_CHORD,s.CHART_TYPE_FORCE),this._defaultMagic(s.CHART_TYPE_PIE,s.CHART_TYPE_FUNNEL),this._magicType[h]||this._magicType[d])for(var n=0,r=this.option.series.length;r>n;n++){if(this._magicType[h])this.option.series[n].stack="_ECHARTS_STACK_KENER_2014_",e=h;else if(this._magicType[d])this.option.series[n].stack=null,e=d;if(this._featureOption[e+"Chart"])a.merge(this.option.series[n],this._featureOption[e+"Chart"]||{},!0)}return this.option},_defaultMagic:function(t,e){if(this._magicType[t]||this._magicType[e])for(var i=0,n=this.option.series.length;n>i;i++){var r=this.option.series[i].type;if(r==t||r==e)if(this.option.series[i].type=this._magicType[t]?t:e,this.option.series[i].itemStyle=a.clone(this.option.series[i].__itemStyle),r=this.option.series[i].type,this._featureOption[r+"Chart"])a.merge(this.option.series[i],this._featureOption[r+"Chart"]||{},!0)}},silence:function(t){this._isSilence=t},resize:function(){if(this._resetMark(),this.clear(),this.option&&this.option.toolbox&&this.option.toolbox.show)this._buildShape();if(this._dataView)this._dataView.resize()},hideDataView:function(){if(this._dataView)this._dataView.hide()},clear:function(t){if(this.zr)if(this.zr.delShape(this.shapeList),this.shapeList=[],!t)this.zr.delShape(this._markShapeList),this._markShapeList=[]},onbeforDispose:function(){if(this._dataView)this._dataView.dispose(),this._dataView=null;this._markShapeList=null},refresh:function(t){if(t){if(this._resetMark(),this._resetZoom(),t.toolbox=this.reformOption(t.toolbox),this.option=t,this.clear(!0),t.toolbox.show)this._buildShape();this.hideDataView()}}},a.inherits(t,e),require("../component").define("toolbox",t),t}),define("echarts/component/title",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","zrender/tool/color","../component"],function(require){function t(t,i,n,r,o){e.call(this,t,i,n,r,o),this.refresh(r)}var e=require("./base"),i=require("zrender/shape/Text"),n=require("zrender/shape/Rectangle"),r=require("../config");r.title={zlevel:0,z:6,show:!0,text:"",subtext:"",x:"left",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:5,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}};var o=require("zrender/tool/util"),s=require("zrender/tool/area"),a=require("zrender/tool/color");return t.prototype={type:r.COMPONENT_TYPE_TITLE,_buildShape:function(){if(this.titleOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildItem:function(){var t=this.titleOption.text,e=this.titleOption.link,n=this.titleOption.target,r=this.titleOption.subtext,o=this.titleOption.sublink,s=this.titleOption.subtarget,l=this.getFont(this.titleOption.textStyle),c=this.getFont(this.titleOption.subtextStyle),h=this._itemGroupLocation.x,d=this._itemGroupLocation.y,u=this._itemGroupLocation.width,f=this._itemGroupLocation.height,p={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:d,color:this.titleOption.textStyle.color,text:t,textFont:l,textBaseline:"top"},highlightStyle:{color:a.lift(this.titleOption.textStyle.color,1),brushType:"fill"},hoverable:!1};if(e)p.hoverable=!0,p.clickable=!0,p.onclick=function(){if(!n||"self"!=n)window.open(e);else window.location=e};var m={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:d+f,color:this.titleOption.subtextStyle.color,text:r,textFont:c,textBaseline:"bottom"},highlightStyle:{color:a.lift(this.titleOption.subtextStyle.color,1),brushType:"fill"},hoverable:!1};if(o)m.hoverable=!0,m.clickable=!0,m.onclick=function(){if(!s||"self"!=s)window.open(o);else window.location=o};switch(this.titleOption.x){case"center":p.style.x=m.style.x=h+u/2,p.style.textAlign=m.style.textAlign="center";break;case"left":p.style.x=m.style.x=h,p.style.textAlign=m.style.textAlign="left";break;case"right":p.style.x=m.style.x=h+u,p.style.textAlign=m.style.textAlign="right";break;default:h=this.titleOption.x-0,h=isNaN(h)?0:h,p.style.x=m.style.x=h}if(this.titleOption.textAlign)p.style.textAlign=m.style.textAlign=this.titleOption.textAlign;this.shapeList.push(new i(p)),""!==r&&this.shapeList.push(new i(m))},_buildBackground:function(){var t=this.reformCssArray(this.titleOption.padding);this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-t[3],y:this._itemGroupLocation.y-t[0],width:this._itemGroupLocation.width+t[3]+t[1],height:this._itemGroupLocation.height+t[0]+t[2],brushType:0===this.titleOption.borderWidth?"fill":"both",color:this.titleOption.backgroundColor,strokeColor:this.titleOption.borderColor,lineWidth:this.titleOption.borderWidth}}))},_getItemGroupLocation:function(){var t,e=this.reformCssArray(this.titleOption.padding),i=this.titleOption.text,n=this.titleOption.subtext,r=this.getFont(this.titleOption.textStyle),o=this.getFont(this.titleOption.subtextStyle),a=Math.max(s.getTextWidth(i,r),s.getTextWidth(n,o)),l=s.getTextHeight(i,r)+(""===n?0:this.titleOption.itemGap+s.getTextHeight(n,o)),c=this.zr.getWidth();switch(this.titleOption.x){case"center":t=Math.floor((c-a)/2);break;case"left":t=e[3]+this.titleOption.borderWidth;break;case"right":t=c-a-e[1]-this.titleOption.borderWidth;break;default:t=this.titleOption.x-0,t=isNaN(t)?0:t}var h,d=this.zr.getHeight();switch(this.titleOption.y){case"top":h=e[0]+this.titleOption.borderWidth;break;case"bottom":h=d-l-e[2]-this.titleOption.borderWidth;break;case"center":h=Math.floor((d-l)/2);break;default:h=this.titleOption.y-0,h=isNaN(h)?0:h}return{x:t,y:h,width:a,height:l}},refresh:function(t){if(t)this.option=t,this.option.title=this.reformOption(this.option.title),this.titleOption=this.option.title,this.titleOption.textStyle=this.getTextStyle(this.titleOption.textStyle),this.titleOption.subtextStyle=this.getTextStyle(this.titleOption.subtextStyle);this.clear(),this._buildShape()}},o.inherits(t,e),require("../component").define("title",t),t}),define("echarts/util/shape/Cross",["require","zrender/shape/Base","zrender/shape/Line","zrender/tool/util","./normalIsCover"],function(require){function t(t){e.call(this,t)}var e=require("zrender/shape/Base"),i=require("zrender/shape/Line"),n=require("zrender/tool/util");return t.prototype={type:"cross",buildPath:function(t,e){var n=e.rect;e.xStart=n.x,e.xEnd=n.x+n.width,e.yStart=e.yEnd=e.y,i.prototype.buildPath(t,e),e.xStart=e.xEnd=e.x,e.yStart=n.y,e.yEnd=n.y+n.height,i.prototype.buildPath(t,e)},getRect:function(t){return t.rect},isCover:require("./normalIsCover")},n.inherits(t,e),t}),define("echarts/component/tooltip",["require","./base","../util/shape/Cross","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/ecData","zrender/config","zrender/tool/event","zrender/tool/area","zrender/tool/color","zrender/tool/util","zrender/shape/Base","../component"],function(require){function t(t,r,o,s,a){e.call(this,t,r,o,s,a),this.dom=a.dom;var c=this;c._onmousemove=function(t){return c.__onmousemove(t)},c._onglobalout=function(t){return c.__onglobalout(t)},this.zr.on(l.EVENT.MOUSEMOVE,c._onmousemove),this.zr.on(l.EVENT.GLOBALOUT,c._onglobalout),c._hide=function(t){return c.__hide(t)},c._tryShow=function(t){return c.__tryShow(t)},c._refixed=function(t){return c.__refixed(t)},c._setContent=function(t,e){return c.__setContent(t,e)},this._tDom=this._tDom||document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.onmouseover=function(){c._mousein=!0},this._tDom.onmouseout=function(){c._mousein=!1},this._tDom.className="echarts-tooltip",this._tDom.style.position="absolute",this.hasAppend=!1,this._axisLineShape&&this.zr.delShape(this._axisLineShape.id),this._axisLineShape=new n({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisLineShape),this.zr.addShape(this._axisLineShape),this._axisShadowShape&&this.zr.delShape(this._axisShadowShape.id),this._axisShadowShape=new n({zlevel:this.getZlevelBase(),z:1,invisible:!0,hoverable:!1}),this.shapeList.push(this._axisShadowShape),this.zr.addShape(this._axisShadowShape),this._axisCrossShape&&this.zr.delShape(this._axisCrossShape.id),
this._axisCrossShape=new i({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisCrossShape),this.zr.addShape(this._axisCrossShape),this.showing=!1,this.refresh(s)}var e=require("./base"),i=require("../util/shape/Cross"),n=require("zrender/shape/Line"),r=require("zrender/shape/Rectangle"),o=new r({}),s=require("../config");s.tooltip={zlevel:1,z:8,show:!0,showContent:!0,trigger:"item",islandFormatter:"{a} <br/>{b} : {c}",showDelay:20,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(0,0,0,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,axisPointer:{type:"line",lineStyle:{color:"#48b",width:2,type:"solid"},crossStyle:{color:"#1e90ff",width:1,type:"dashed"},shadowStyle:{color:"rgba(150,150,150,0.3)",width:"auto",type:"default"}},textStyle:{color:"#fff"}};var a=require("../util/ecData"),l=require("zrender/config"),c=require("zrender/tool/event"),h=require("zrender/tool/area"),d=require("zrender/tool/color"),u=require("zrender/tool/util"),f=require("zrender/shape/Base");return t.prototype={type:s.COMPONENT_TYPE_TOOLTIP,_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;",_style:function(t){if(!t)return"";var e=[];if(t.transitionDuration){var i="left "+t.transitionDuration+"s,top "+t.transitionDuration+"s";e.push("transition:"+i),e.push("-moz-transition:"+i),e.push("-webkit-transition:"+i),e.push("-o-transition:"+i)}if(t.backgroundColor)e.push("background-Color:"+d.toHex(t.backgroundColor)),e.push("filter:alpha(opacity=70)"),e.push("background-Color:"+t.backgroundColor);if(null!=t.borderWidth)e.push("border-width:"+t.borderWidth+"px");if(null!=t.borderColor)e.push("border-color:"+t.borderColor);if(null!=t.borderRadius)e.push("border-radius:"+t.borderRadius+"px"),e.push("-moz-border-radius:"+t.borderRadius+"px"),e.push("-webkit-border-radius:"+t.borderRadius+"px"),e.push("-o-border-radius:"+t.borderRadius+"px");var n=t.textStyle;if(n)n.color&&e.push("color:"+n.color),n.decoration&&e.push("text-decoration:"+n.decoration),n.align&&e.push("text-align:"+n.align),n.fontFamily&&e.push("font-family:"+n.fontFamily),n.fontSize&&e.push("font-size:"+n.fontSize+"px"),n.fontSize&&e.push("line-height:"+Math.round(3*n.fontSize/2)+"px"),n.fontStyle&&e.push("font-style:"+n.fontStyle),n.fontWeight&&e.push("font-weight:"+n.fontWeight);var r=t.padding;if(null!=r)r=this.reformCssArray(r),e.push("padding:"+r[0]+"px "+r[1]+"px "+r[2]+"px "+r[3]+"px");return e=e.join(";")+";"},__hide:function(){if(this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,this._tDom)this._tDom.style.display="none";var t=!1;if(!this._axisLineShape.invisible)this._axisLineShape.invisible=!0,this.zr.modShape(this._axisLineShape.id),t=!0;if(!this._axisShadowShape.invisible)this._axisShadowShape.invisible=!0,this.zr.modShape(this._axisShadowShape.id),t=!0;if(!this._axisCrossShape.invisible)this._axisCrossShape.invisible=!0,this.zr.modShape(this._axisCrossShape.id),t=!0;if(this._lastTipShape&&this._lastTipShape.tipShape.length>0)this.zr.delShape(this._lastTipShape.tipShape),this._lastTipShape=!1,this.shapeList.length=2;t&&this.zr.refreshNextFrame(),this.showing=!1},_show:function(t,e,i,n){var r=this._tDom.offsetHeight,o=this._tDom.offsetWidth;if(t){if("function"==typeof t)t=t([e,i]);if(t instanceof Array)e=t[0],i=t[1]}if(e+o>this._zrWidth)e-=o+40;if(i+r>this._zrHeight)i-=r-20;if(20>i)i=0;if(this._tDom.style.cssText=this._gCssText+this._defaultCssText+(n?n:"")+"left:"+e+"px;top:"+i+"px;",10>r||10>o)setTimeout(this._refixed,20);this.showing=!0},__refixed:function(){if(this._tDom){var t="",e=this._tDom.offsetHeight,i=this._tDom.offsetWidth;if(this._tDom.offsetLeft+i>this._zrWidth)t+="left:"+(this._zrWidth-i-20)+"px;";if(this._tDom.offsetTop+e>this._zrHeight)t+="top:"+(this._zrHeight-e-10)+"px;";if(""!==t)this._tDom.style.cssText+=t}},__tryShow:function(){var t,e;if(!this._curTarget)this._findPolarTrigger()||this._findAxisTrigger();else{if("island"===this._curTarget._type&&this.option.tooltip.show)return void this._showItemTrigger();var i=a.get(this._curTarget,"series"),n=a.get(this._curTarget,"data");if(t=this.deepQuery([n,i,this.option],"tooltip.show"),null==i||null==n||!t)clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay);else e=this.deepQuery([n,i,this.option],"tooltip.trigger"),"axis"===e?this._showAxisTrigger(i.xAxisIndex,i.yAxisIndex,a.get(this._curTarget,"dataIndex")):this._showItemTrigger()}},_findAxisTrigger:function(){if(!this.component.xAxis||!this.component.yAxis)return void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));for(var t,e,i=this.option.series,n=0,r=i.length;r>n;n++)if("axis"===this.deepQuery([i[n],this.option],"tooltip.trigger"))if(t=i[n].xAxisIndex||0,e=i[n].yAxisIndex||0,this.component.xAxis.getAxis(t)&&this.component.xAxis.getAxis(t).type===s.COMPONENT_TYPE_AXIS_CATEGORY)return void this._showAxisTrigger(t,e,this._getNearestDataIndex("x",this.component.xAxis.getAxis(t)));else if(this.component.yAxis.getAxis(e)&&this.component.yAxis.getAxis(e).type===s.COMPONENT_TYPE_AXIS_CATEGORY)return void this._showAxisTrigger(t,e,this._getNearestDataIndex("y",this.component.yAxis.getAxis(e)));else return void this._showAxisTrigger(t,e,-1);if("cross"===this.option.tooltip.axisPointer.type)this._showAxisTrigger(-1,-1,-1)},_findPolarTrigger:function(){if(!this.component.polar)return!1;var t,e=c.getX(this._event),i=c.getY(this._event),n=this.component.polar.getNearestIndex([e,i]);if(n)t=n.valueIndex,n=n.polarIndex;else n=-1;if(-1!=n)return this._showPolarTrigger(n,t);else return!1},_getNearestDataIndex:function(t,e){var i=-1,n=c.getX(this._event),r=c.getY(this._event);if("x"===t){for(var o,s,a=this.component.grid.getXend(),l=e.getCoordByIndex(i);a>l&&(s=l,n>=l);)o=l,l=e.getCoordByIndex(++i);if(0>=i)i=0;else if(s-n>=n-o)i-=1;else if(null==e.getNameByIndex(i))i-=1;return i}else{for(var h,d,u=this.component.grid.getY(),l=e.getCoordByIndex(i);l>u&&(h=l,l>=r);)d=l,l=e.getCoordByIndex(++i);if(0>=i)i=0;else if(r-h>=d-r)i-=1;else if(null==e.getNameByIndex(i))i-=1;return i}},_showAxisTrigger:function(t,e,i){if(!this._event.connectTrigger&&this.messageCenter.dispatch(s.EVENT.TOOLTIP_IN_GRID,this._event,null,this.myChart),null==this.component.xAxis||null==this.component.yAxis||null==t||null==e)return clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));var n,r,o,a,l=this.option.series,h=[],d=[],u="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return;r=this.option.tooltip.formatter,o=this.option.tooltip.position}var f,p,m=-1!=t&&this.component.xAxis.getAxis(t).type===s.COMPONENT_TYPE_AXIS_CATEGORY?"xAxis":-1!=e&&this.component.yAxis.getAxis(e).type===s.COMPONENT_TYPE_AXIS_CATEGORY?"yAxis":!1;if(m){var g="xAxis"==m?t:e;n=this.component[m].getAxis(g);for(var v=0,y=l.length;y>v;v++)if(this._isSelected(l[v].name)){if(l[v][m+"Index"]===g&&"axis"===this.deepQuery([l[v],this.option],"tooltip.trigger"))if(a=this.query(l[v],"tooltip.showContent")||a,r=this.query(l[v],"tooltip.formatter")||r,o=this.query(l[v],"tooltip.position")||o,u+=this._style(this.query(l[v],"tooltip")),null!=l[v].stack&&"xAxis"==m)h.unshift(l[v]),d.unshift(v);else h.push(l[v]),d.push(v)}else;this.messageCenter.dispatch(s.EVENT.TOOLTIP_HOVER,this._event,{seriesIndex:d,dataIndex:i},this.myChart);var _;if("xAxis"==m)f=this.subPixelOptimize(n.getCoordByIndex(i),this._axisLineWidth),p=c.getY(this._event),_=[f,this.component.grid.getY(),f,this.component.grid.getYend()];else f=c.getX(this._event),p=this.subPixelOptimize(n.getCoordByIndex(i),this._axisLineWidth),_=[this.component.grid.getX(),p,this.component.grid.getXend(),p];this._styleAxisPointer(h,_[0],_[1],_[2],_[3],n.getGap(),f,p)}else if(f=c.getX(this._event),p=c.getY(this._event),this._styleAxisPointer(l,this.component.grid.getX(),p,this.component.grid.getXend(),p,0,f,p),i>=0)this._showItemTrigger(!0);else clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._tDom.style.display="none";if(h.length>0){if(this._lastItemTriggerId=-1,this._lastDataIndex!=i||this._lastSeriesIndex!=d[0]){this._lastDataIndex=i,this._lastSeriesIndex=d[0];var b,x;if("function"==typeof r){for(var w=[],v=0,y=h.length;y>v;v++)b=h[v].data[i],x=this.getDataFromOption(b,"-"),w.push({seriesIndex:d[v],seriesName:h[v].name||"",series:h[v],dataIndex:i,data:b,name:n.getNameByIndex(i),value:x,0:h[v].name||"",1:n.getNameByIndex(i),2:x,3:b});this._curTicket="axis:"+i,this._tDom.innerHTML=r.call(this.myChart,w,this._curTicket,this._setContent)}else if("string"==typeof r){this._curTicket=NaN,r=r.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}");for(var v=0,y=h.length;y>v;v++)r=r.replace("{a"+v+"}",this._encodeHTML(h[v].name||"")),r=r.replace("{b"+v+"}",this._encodeHTML(n.getNameByIndex(i))),b=h[v].data[i],b=this.getDataFromOption(b,"-"),r=r.replace("{c"+v+"}",b instanceof Array?b:this.numAddCommas(b));this._tDom.innerHTML=r}else{this._curTicket=NaN,r=this._encodeHTML(n.getNameByIndex(i));for(var v=0,y=h.length;y>v;v++)r+="<br/>"+this._encodeHTML(h[v].name||"")+" : ",b=h[v].data[i],b=this.getDataFromOption(b,"-"),r+=b instanceof Array?b:this.numAddCommas(b);this._tDom.innerHTML=r}}if(a===!1||!this.option.tooltip.showContent)return;if(!this.hasAppend)this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0;this._show(o,f+10,p+10,u)}},_showPolarTrigger:function(t,e){if(null==this.component.polar||null==t||null==e||0>e)return!1;var i,n,r,o=this.option.series,s=[],a=[],l="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return!1;i=this.option.tooltip.formatter,n=this.option.tooltip.position}for(var h=this.option.polar[t].indicator[e].text,d=0,u=o.length;u>d;d++)if(this._isSelected(o[d].name)){if(o[d].polarIndex===t&&"axis"===this.deepQuery([o[d],this.option],"tooltip.trigger"))r=this.query(o[d],"tooltip.showContent")||r,i=this.query(o[d],"tooltip.formatter")||i,n=this.query(o[d],"tooltip.position")||n,l+=this._style(this.query(o[d],"tooltip")),s.push(o[d]),a.push(d)}else;if(s.length>0){for(var f,p,m,g=[],d=0,u=s.length;u>d;d++){f=s[d].data;for(var v=0,y=f.length;y>v;v++)if(p=f[v],this._isSelected(p.name))p=null!=p?p:{name:"",value:{dataIndex:"-"}},m=this.getDataFromOption(p.value[e]),g.push({seriesIndex:a[d],seriesName:s[d].name||"",series:s[d],dataIndex:e,data:p,name:p.name,indicator:h,value:m,0:s[d].name||"",1:p.name,2:m,3:h});else;}if(g.length<=0)return;if(this._lastItemTriggerId=-1,this._lastDataIndex!=e||this._lastSeriesIndex!=a[0])if(this._lastDataIndex=e,this._lastSeriesIndex=a[0],"function"==typeof i)this._curTicket="axis:"+e,this._tDom.innerHTML=i.call(this.myChart,g,this._curTicket,this._setContent);else if("string"==typeof i){i=i.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{d}","{d0}");for(var d=0,u=g.length;u>d;d++)i=i.replace("{a"+d+"}",this._encodeHTML(g[d].seriesName)),i=i.replace("{b"+d+"}",this._encodeHTML(g[d].name)),i=i.replace("{c"+d+"}",this.numAddCommas(g[d].value)),i=i.replace("{d"+d+"}",this._encodeHTML(g[d].indicator));this._tDom.innerHTML=i}else{i=this._encodeHTML(g[0].name)+"<br/>"+this._encodeHTML(g[0].indicator)+" : "+this.numAddCommas(g[0].value);for(var d=1,u=g.length;u>d;d++)i+="<br/>"+this._encodeHTML(g[d].name)+"<br/>",i+=this._encodeHTML(g[d].indicator)+" : "+this.numAddCommas(g[d].value);this._tDom.innerHTML=i}if(r===!1||!this.option.tooltip.showContent)return;if(!this.hasAppend)this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0;return this._show(n,c.getX(this._event),c.getY(this._event),l),!0}},_showItemTrigger:function(t){if(this._curTarget){var e,i,n,r=a.get(this._curTarget,"series"),o=a.get(this._curTarget,"seriesIndex"),l=a.get(this._curTarget,"data"),h=a.get(this._curTarget,"dataIndex"),d=a.get(this._curTarget,"name"),u=a.get(this._curTarget,"value"),f=a.get(this._curTarget,"special"),p=a.get(this._curTarget,"special2"),m=[l,r,this.option],g="";if("island"!=this._curTarget._type){var v=t?"axis":"item";if(this.option.tooltip.trigger===v)e=this.option.tooltip.formatter,i=this.option.tooltip.position;if(this.query(r,"tooltip.trigger")===v)n=this.query(r,"tooltip.showContent")||n,e=this.query(r,"tooltip.formatter")||e,i=this.query(r,"tooltip.position")||i,g+=this._style(this.query(r,"tooltip"));n=this.query(l,"tooltip.showContent")||n,e=this.query(l,"tooltip.formatter")||e,i=this.query(l,"tooltip.position")||i,g+=this._style(this.query(l,"tooltip"))}else this._lastItemTriggerId=NaN,n=this.deepQuery(m,"tooltip.showContent"),e=this.deepQuery(m,"tooltip.islandFormatter"),i=this.deepQuery(m,"tooltip.islandPosition");if(this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId!==this._curTarget.id)if(this._lastItemTriggerId=this._curTarget.id,"function"==typeof e)this._curTicket=(r.name||"")+":"+h,this._tDom.innerHTML=e.call(this.myChart,{seriesIndex:o,seriesName:r.name||"",series:r,dataIndex:h,data:l,name:d,value:u,percent:f,indicator:f,value2:p,indicator2:p,0:r.name||"",1:d,2:u,3:f,4:p,5:l,6:o,7:h},this._curTicket,this._setContent);else if("string"==typeof e)this._curTicket=NaN,e=e.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}"),e=e.replace("{a0}",this._encodeHTML(r.name||"")).replace("{b0}",this._encodeHTML(d)).replace("{c0}",u instanceof Array?u:this.numAddCommas(u)),e=e.replace("{d}","{d0}").replace("{d0}",f||""),e=e.replace("{e}","{e0}").replace("{e0}",a.get(this._curTarget,"special2")||""),this._tDom.innerHTML=e;else if(this._curTicket=NaN,r.type===s.CHART_TYPE_RADAR&&f)this._tDom.innerHTML=this._itemFormatter.radar.call(this,r,d,u,f);else if(r.type===s.CHART_TYPE_EVENTRIVER)this._tDom.innerHTML=this._itemFormatter.eventRiver.call(this,r,d,u,l);else this._tDom.innerHTML=""+(null!=r.name?this._encodeHTML(r.name)+"<br/>":"")+(""===d?"":this._encodeHTML(d)+" : ")+(u instanceof Array?u:this.numAddCommas(u));var y=c.getX(this._event),_=c.getY(this._event);if(this.deepQuery(m,"tooltip.axisPointer.show")&&this.component.grid)this._styleAxisPointer([r],this.component.grid.getX(),_,this.component.grid.getXend(),_,0,y,_);else this._hide();if(n!==!1&&this.option.tooltip.showContent){if(!this.hasAppend)this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0;this._show(i,y+20,_-20,g)}}},_itemFormatter:{radar:function(t,e,i,n){var r="";r+=this._encodeHTML(""===e?t.name||"":e),r+=""===r?"":"<br />";for(var o=0;o<n.length;o++)r+=this._encodeHTML(n[o].text)+" : "+this.numAddCommas(i[o])+"<br />";return r},chord:function(t,e,i,n,r){if(null==r)return this._encodeHTML(e)+" ("+this.numAddCommas(i)+")";else{var o=this._encodeHTML(e),s=this._encodeHTML(n);return""+(null!=t.name?this._encodeHTML(t.name)+"<br/>":"")+o+" -> "+s+" ("+this.numAddCommas(i)+")<br />"+s+" -> "+o+" ("+this.numAddCommas(r)+")"}},eventRiver:function(t,e,i,n){var r="";r+=this._encodeHTML(""===t.name?"":t.name+" : "),r+=this._encodeHTML(e),r+=""===r?"":"<br />",n=n.evolution;for(var o=0,s=n.length;s>o;o++)if(r+='<div style="padding-top:5px;">',n[o].detail){if(n[o].detail.img)r+='<img src="'+n[o].detail.img+'" style="float:left;width:40px;height:40px;">';r+='<div style="margin-left:45px;">'+n[o].time+"<br/>",r+='<a href="'+n[o].detail.link+'" target="_blank">',r+=n[o].detail.text+"</a></div>",r+="</div>"}else;return r}},_styleAxisPointer:function(t,e,i,n,r,o,s,a){if(t.length>0){var l,c,h=this.option.tooltip.axisPointer,d=h.type,u={line:{},cross:{},shadow:{}};for(var f in u)u[f].color=h[f+"Style"].color,u[f].width=h[f+"Style"].width,u[f].type=h[f+"Style"].type;for(var p=0,m=t.length;m>p;p++)if(l=t[p],c=this.query(l,"tooltip.axisPointer.type"),d=c||d,c)u[c].color=this.query(l,"tooltip.axisPointer."+c+"Style.color")||u[c].color,u[c].width=this.query(l,"tooltip.axisPointer."+c+"Style.width")||u[c].width,u[c].type=this.query(l,"tooltip.axisPointer."+c+"Style.type")||u[c].type;if("line"===d){var g=u.line.width,v=e==n;this._axisLineShape.style={xStart:v?this.subPixelOptimize(e,g):e,yStart:v?i:this.subPixelOptimize(i,g),xEnd:v?this.subPixelOptimize(n,g):n,yEnd:v?r:this.subPixelOptimize(r,g),strokeColor:u.line.color,lineWidth:g,lineType:u.line.type},this._axisLineShape.invisible=!1,this.zr.modShape(this._axisLineShape.id)}else if("cross"===d){var y=u.cross.width;if(this._axisCrossShape.style={brushType:"stroke",rect:this.component.grid.getArea(),x:this.subPixelOptimize(s,y),y:this.subPixelOptimize(a,y),text:("( "+this.component.xAxis.getAxis(0).getValueFromCoord(s)+" , "+this.component.yAxis.getAxis(0).getValueFromCoord(a)+" )").replace("  , "," ").replace(" ,  "," "),textPosition:"specific",strokeColor:u.cross.color,lineWidth:y,lineType:u.cross.type},this.component.grid.getXend()-s>100)this._axisCrossShape.style.textAlign="left",this._axisCrossShape.style.textX=s+10;else this._axisCrossShape.style.textAlign="right",this._axisCrossShape.style.textX=s-10;if(a-this.component.grid.getY()>50)this._axisCrossShape.style.textBaseline="bottom",this._axisCrossShape.style.textY=a-10;else this._axisCrossShape.style.textBaseline="top",this._axisCrossShape.style.textY=a+10;this._axisCrossShape.invisible=!1,this.zr.modShape(this._axisCrossShape.id)}else if("shadow"===d){if(null==u.shadow.width||"auto"===u.shadow.width||isNaN(u.shadow.width))u.shadow.width=o;if(e===n){if(Math.abs(this.component.grid.getX()-e)<2)u.shadow.width/=2,e=n+=u.shadow.width/2;else if(Math.abs(this.component.grid.getXend()-e)<2)u.shadow.width/=2,e=n-=u.shadow.width/2}else if(i===r)if(Math.abs(this.component.grid.getY()-i)<2)u.shadow.width/=2,i=r+=u.shadow.width/2;else if(Math.abs(this.component.grid.getYend()-i)<2)u.shadow.width/=2,i=r-=u.shadow.width/2;this._axisShadowShape.style={xStart:e,yStart:i,xEnd:n,yEnd:r,strokeColor:u.shadow.color,lineWidth:u.shadow.width},this._axisShadowShape.invisible=!1,this.zr.modShape(this._axisShadowShape.id)}this.zr.refreshNextFrame()}},__onmousemove:function(t){if(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),!this._mousein||!this._enterable){var e=t.target,i=c.getX(t.event),n=c.getY(t.event);if(!e)if(this._curTarget=!1,this._event=t.event,this._event.zrenderX=i,this._event.zrenderY=n,this._needAxisTrigger&&this.component.grid&&h.isInside(o,this.component.grid.getArea(),i,n))this._showingTicket=setTimeout(this._tryShow,this._showDelay);else if(this._needAxisTrigger&&this.component.polar&&-1!=this.component.polar.isInside([i,n]))this._showingTicket=setTimeout(this._tryShow,this._showDelay);else!this._event.connectTrigger&&this.messageCenter.dispatch(s.EVENT.TOOLTIP_OUT_GRID,this._event,null,this.myChart),this._hidingTicket=setTimeout(this._hide,this._hideDelay);else{this._curTarget=e,this._event=t.event,this._event.zrenderX=i,this._event.zrenderY=n;var r;if(this._needAxisTrigger&&this.component.polar&&-1!=(r=this.component.polar.isInside([i,n])))for(var a=this.option.series,l=0,d=a.length;d>l;l++)if(a[l].polarIndex===r&&"axis"===this.deepQuery([a[l],this.option],"tooltip.trigger")){this._curTarget=null;break}this._showingTicket=setTimeout(this._tryShow,this._showDelay)}}},__onglobalout:function(){clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay)},__setContent:function(t,e){if(this._tDom){if(t===this._curTicket)this._tDom.innerHTML=e;setTimeout(this._refixed,20)}},ontooltipHover:function(t,e){if(!this._lastTipShape||this._lastTipShape&&this._lastTipShape.dataIndex!=t.dataIndex){if(this._lastTipShape&&this._lastTipShape.tipShape.length>0)this.zr.delShape(this._lastTipShape.tipShape),this.shapeList.length=2;for(var i=0,n=e.length;n>i;i++)e[i].zlevel=this.getZlevelBase(),e[i].z=this.getZBase(),e[i].style=f.prototype.getHighlightStyle(e[i].style,e[i].highlightStyle),e[i].draggable=!1,e[i].hoverable=!1,e[i].clickable=!1,e[i].ondragend=null,e[i].ondragover=null,e[i].ondrop=null,this.shapeList.push(e[i]),this.zr.addShape(e[i]);this._lastTipShape={dataIndex:t.dataIndex,tipShape:e}}},ondragend:function(){this._hide()},onlegendSelected:function(t){this._selectedMap=t.selected},_setSelectedMap:function(){if(this.component.legend)this._selectedMap=u.clone(this.component.legend.getSelectedMap());else this._selectedMap={}},_isSelected:function(t){if(null!=this._selectedMap[t])return this._selectedMap[t];else return!0},showTip:function(t){if(t){var e,i=this.option.series;if(null!=t.seriesIndex)e=t.seriesIndex;else for(var n=t.seriesName,r=0,o=i.length;o>r;r++)if(i[r].name===n){e=r;break}var c=i[e];if(null!=c){var h=this.myChart.chart[c.type],d="axis"===this.deepQuery([c,this.option],"tooltip.trigger");if(h)if(d){var u=t.dataIndex;switch(h.type){case s.CHART_TYPE_LINE:case s.CHART_TYPE_BAR:case s.CHART_TYPE_K:case s.CHART_TYPE_RADAR:if(null==this.component.polar||c.data[0].value.length<=u)return;var f=c.polarIndex||0,p=this.component.polar.getVector(f,u,"max");this._event={zrenderX:p[0],zrenderY:p[1]},this._showPolarTrigger(f,u)}}else{var m,g,v=h.shapeList;switch(h.type){case s.CHART_TYPE_LINE:case s.CHART_TYPE_BAR:case s.CHART_TYPE_K:case s.CHART_TYPE_TREEMAP:case s.CHART_TYPE_SCATTER:for(var u=t.dataIndex,r=0,o=v.length;o>r;r++)if(null==v[r]._mark&&a.get(v[r],"seriesIndex")==e&&a.get(v[r],"dataIndex")==u){this._curTarget=v[r],m=v[r].style.x,g=h.type!=s.CHART_TYPE_K?v[r].style.y:v[r].style.y[0];break}break;case s.CHART_TYPE_RADAR:for(var u=t.dataIndex,r=0,o=v.length;o>r;r++)if("polygon"===v[r].type&&a.get(v[r],"seriesIndex")==e&&a.get(v[r],"dataIndex")==u){this._curTarget=v[r];var p=this.component.polar.getCenter(c.polarIndex||0);m=p[0],g=p[1];break}break;case s.CHART_TYPE_PIE:for(var y=t.name,r=0,o=v.length;o>r;r++)if("sector"===v[r].type&&a.get(v[r],"seriesIndex")==e&&a.get(v[r],"name")==y){this._curTarget=v[r];var _=this._curTarget.style,b=(_.startAngle+_.endAngle)/2*Math.PI/180;m=this._curTarget.style.x+Math.cos(b)*_.r/1.5,g=this._curTarget.style.y-Math.sin(b)*_.r/1.5;break}break;case s.CHART_TYPE_MAP:for(var y=t.name,x=c.mapType,r=0,o=v.length;o>r;r++)if("text"===v[r].type&&v[r]._mapType===x&&v[r].style._name===y){this._curTarget=v[r],m=this._curTarget.style.x+this._curTarget.position[0],g=this._curTarget.style.y+this._curTarget.position[1];break}break;case s.CHART_TYPE_CHORD:for(var y=t.name,r=0,o=v.length;o>r;r++)if("sector"===v[r].type&&a.get(v[r],"name")==y){this._curTarget=v[r];var _=this._curTarget.style,b=(_.startAngle+_.endAngle)/2*Math.PI/180;return m=this._curTarget.style.x+Math.cos(b)*(_.r-2),g=this._curTarget.style.y-Math.sin(b)*(_.r-2),void this.zr.trigger(l.EVENT.MOUSEMOVE,{zrenderX:m,zrenderY:g})}break;case s.CHART_TYPE_FORCE:for(var y=t.name,r=0,o=v.length;o>r;r++)if("circle"===v[r].type&&a.get(v[r],"name")==y){this._curTarget=v[r],m=this._curTarget.position[0],g=this._curTarget.position[1];break}}if(null!=m&&null!=g)this._event={zrenderX:m,zrenderY:g},this.zr.addHoverShape(this._curTarget),this.zr.refreshHover(),this._showItemTrigger()}}}},hideTip:function(){this._hide()},refresh:function(t){if(this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._lastTipShape&&this._lastTipShape.tipShape.length>0)this.zr.delShape(this._lastTipShape.tipShape);if(this._lastTipShape=!1,this.shapeList.length=2,this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,t){if(this.option=t,this.option.tooltip=this.reformOption(this.option.tooltip),this.option.tooltip.textStyle=u.merge(this.option.tooltip.textStyle,this.ecTheme.textStyle),this._needAxisTrigger=!1,"axis"===this.option.tooltip.trigger)this._needAxisTrigger=!0;for(var e=this.option.series,i=0,n=e.length;n>i;i++)if("axis"===this.query(e[i],"tooltip.trigger")){this._needAxisTrigger=!0;break}if(this._showDelay=this.option.tooltip.showDelay,this._hideDelay=this.option.tooltip.hideDelay,this._defaultCssText=this._style(this.option.tooltip),this._setSelectedMap(),this._axisLineWidth=this.option.tooltip.axisPointer.lineStyle.width,this._enterable=this.option.tooltip.enterable,!this._enterable&&this._tDom.className.indexOf(l.elementClassName)<0)this._tDom.className+=" "+l.elementClassName}if(this.showing){var r=this;setTimeout(function(){r.zr.trigger(l.EVENT.MOUSEMOVE,r.zr.handler._event)},50)}},onbeforDispose:function(){if(this._lastTipShape&&this._lastTipShape.tipShape.length>0)this.zr.delShape(this._lastTipShape.tipShape);if(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this.zr.un(l.EVENT.MOUSEMOVE,this._onmousemove),this.zr.un(l.EVENT.GLOBALOUT,this._onglobalout),this.hasAppend&&this.dom.firstChild)this.dom.firstChild.removeChild(this._tDom);this._tDom=null},_encodeHTML:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},u.inherits(t,e),require("../component").define("tooltip",t),t}),define("zrender/tool/computeBoundingBox",["require","./vector","./curve"],function(require){function t(t,e,i){if(0!==t.length){for(var n=t[0][0],r=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var l=t[a];if(l[0]<n)n=l[0];if(l[0]>r)r=l[0];if(l[1]<o)o=l[1];if(l[1]>s)s=l[1]}e[0]=n,e[1]=o,i[0]=r,i[1]=s}}function e(t,e,i,n,o,s){var a=[];r.cubicExtrema(t[0],e[0],i[0],n[0],a);for(var l=0;l<a.length;l++)a[l]=r.cubicAt(t[0],e[0],i[0],n[0],a[l]);var c=[];r.cubicExtrema(t[1],e[1],i[1],n[1],c);for(var l=0;l<c.length;l++)c[l]=r.cubicAt(t[1],e[1],i[1],n[1],c[l]);a.push(t[0],n[0]),c.push(t[1],n[1]);var h=Math.min.apply(null,a),d=Math.max.apply(null,a),u=Math.min.apply(null,c),f=Math.max.apply(null,c);o[0]=h,o[1]=u,s[0]=d,s[1]=f}function i(t,e,i,n,o){var s=r.quadraticExtremum(t[0],e[0],i[0]),a=r.quadraticExtremum(t[1],e[1],i[1]);s=Math.max(Math.min(s,1),0),a=Math.max(Math.min(a,1),0);var l=1-s,c=1-a,h=l*l*t[0]+2*l*s*e[0]+s*s*i[0],d=l*l*t[1]+2*l*s*e[1]+s*s*i[1],u=c*c*t[0]+2*c*a*e[0]+a*a*i[0],f=c*c*t[1]+2*c*a*e[1]+a*a*i[1];n[0]=Math.min(t[0],i[0],h,u),n[1]=Math.min(t[1],i[1],d,f),o[0]=Math.max(t[0],i[0],h,u),o[1]=Math.max(t[1],i[1],d,f)}var n=require("./vector"),r=require("./curve"),o=n.create(),s=n.create(),a=n.create(),l=function(t,e,i,r,l,c,h,d){if(Math.abs(r-l)>=2*Math.PI)return h[0]=t-i,h[1]=e-i,d[0]=t+i,void(d[1]=e+i);if(o[0]=Math.cos(r)*i+t,o[1]=Math.sin(r)*i+e,s[0]=Math.cos(l)*i+t,s[1]=Math.sin(l)*i+e,n.min(h,o,s),n.max(d,o,s),r%=2*Math.PI,0>r)r+=2*Math.PI;if(l%=2*Math.PI,0>l)l+=2*Math.PI;if(r>l&&!c)l+=2*Math.PI;else if(l>r&&c)r+=2*Math.PI;if(c){var u=l;l=r,r=u}for(var f=0;l>f;f+=Math.PI/2)if(f>r)a[0]=Math.cos(f)*i+t,a[1]=Math.sin(f)*i+e,n.min(h,a,h),n.max(d,a,d)};return t.cubeBezier=e,t.quadraticBezier=i,t.arc=l,t}),define("zrender/shape/Sector",["require","../tool/math","../tool/computeBoundingBox","../tool/vector","./Base","../tool/util"],function(require){var t=require("../tool/math"),e=require("../tool/computeBoundingBox"),i=require("../tool/vector"),n=require("./Base"),r=i.create(),o=i.create(),s=i.create(),a=i.create(),l=function(t){n.call(this,t)};return l.prototype={type:"sector",buildPath:function(e,i){var n=i.x,r=i.y,o=i.r0||0,s=i.r,a=i.startAngle,l=i.endAngle,c=i.clockWise||!1;if(a=t.degreeToRadian(a),l=t.degreeToRadian(l),!c)a=-a,l=-l;var h=t.cos(a),d=t.sin(a);if(e.moveTo(h*o+n,d*o+r),e.lineTo(h*s+n,d*s+r),e.arc(n,r,s,a,l,!c),e.lineTo(t.cos(l)*o+n,t.sin(l)*o+r),0!==o)e.arc(n,r,o,l,a,c);e.closePath()},getRect:function(n){if(n.__rect)return n.__rect;var l=n.x,c=n.y,h=n.r0||0,d=n.r,u=t.degreeToRadian(n.startAngle),f=t.degreeToRadian(n.endAngle),p=n.clockWise;if(!p)u=-u,f=-f;if(h>1)e.arc(l,c,h,u,f,!p,r,s);else r[0]=s[0]=l,r[1]=s[1]=c;return e.arc(l,c,d,u,f,!p,o,a),i.min(r,r,o),i.max(s,s,a),n.__rect={x:r[0],y:r[1],width:s[0]-r[0],height:s[1]-r[1]},n.__rect}},require("../tool/util").inherits(l,n),l}),define("echarts/util/shape/Candle",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(require){function t(t){e.call(this,t)}var e=require("zrender/shape/Base"),i=require("zrender/tool/util");return t.prototype={type:"candle",_numberOrder:function(t,e){return e-t},buildPath:function(t,e){var n=i.clone(e.y).sort(this._numberOrder);t.moveTo(e.x,n[3]),t.lineTo(e.x,n[2]),t.moveTo(e.x-e.width/2,n[2]),t.rect(e.x-e.width/2,n[2],e.width,n[1]-n[2]),t.moveTo(e.x,n[1]),t.lineTo(e.x,n[0])},getRect:function(t){if(!t.__rect){var e=0;if("stroke"==t.brushType||"fill"==t.brushType)e=t.lineWidth||1;var n=i.clone(t.y).sort(this._numberOrder);t.__rect={x:Math.round(t.x-t.width/2-e/2),y:Math.round(n[3]-e/2),width:t.width+e,height:n[0]-n[3]+e}}return t.__rect},isCover:require("./normalIsCover")},i.inherits(t,e),t}),define("echarts/component/legend",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","zrender/shape/Sector","../util/shape/Icon","../util/shape/Candle","../config","zrender/tool/util","zrender/tool/area","../component"],function(require){function t(t,i,n,r,o){if(!this.query(r,"legend.data"))return void console.error("option.legend.data has not been defined.");e.call(this,t,i,n,r,o);var s=this;s._legendSelected=function(t){s.__legendSelected(t)},s._dispatchHoverLink=function(t){return s.__dispatchHoverLink(t)},this._colorIndex=0,this._colorMap={},this._selectedMap={},this._hasDataMap={},this.refresh(r)}var e=require("./base"),i=require("zrender/shape/Text"),n=require("zrender/shape/Rectangle"),r=require("zrender/shape/Sector"),o=require("../util/shape/Icon"),s=require("../util/shape/Candle"),a=require("../config");a.legend={zlevel:0,z:4,show:!0,orient:"horizontal",x:"center",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,textStyle:{color:"#333"},selectedMode:!0};var l=require("zrender/tool/util"),c=require("zrender/tool/area");t.prototype={type:a.COMPONENT_TYPE_LEGEND,_buildShape:function(){if(this.legendOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildItem:function(){var t,e,n,r,s,a,h,d,u=this.legendOption.data,f=u.length,p=this.legendOption.textStyle,m=this.zr.getWidth(),g=this.zr.getHeight(),v=this._itemGroupLocation.x,y=this._itemGroupLocation.y,_=this.legendOption.itemWidth,b=this.legendOption.itemHeight,x=this.legendOption.itemGap;if("vertical"===this.legendOption.orient&&"right"===this.legendOption.x)v=this._itemGroupLocation.x+this._itemGroupLocation.width-_;for(var w=0;f>w;w++)if(s=l.merge(u[w].textStyle||{},p),a=this.getFont(s),t=this._getName(u[w]),h=this._getFormatterName(t),""!==t){if(e=u[w].icon||this._getSomethingByName(t).type,d=this.getColor(t),"horizontal"===this.legendOption.orient){if(200>m-v&&_+5+c.getTextWidth(h,a)+(w===f-1||""===u[w+1]?0:x)>=m-v)v=this._itemGroupLocation.x,y+=b+x}else if(200>g-y&&b+(w===f-1||""===u[w+1]?0:x)>=g-y)"right"===this.legendOption.x?v-=this._itemGroupLocation.maxWidth+x:v+=this._itemGroupLocation.maxWidth+x,y=this._itemGroupLocation.y;if(n=this._getItemShapeByType(v,y,_,b,this._selectedMap[t]&&this._hasDataMap[t]?d:"#ccc",e,d),n._name=t,n=new o(n),r={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:v+_+5,y:y+b/2,color:this._selectedMap[t]?"auto"===s.color?d:s.color:"#ccc",text:h,textFont:a,textBaseline:"middle"},highlightStyle:{color:d,brushType:"fill"},hoverable:!!this.legendOption.selectedMode,clickable:!!this.legendOption.selectedMode},"vertical"===this.legendOption.orient&&"right"===this.legendOption.x)r.style.x-=_+10,r.style.textAlign="right";if(r._name=t,r=new i(r),this.legendOption.selectedMode)n.onclick=r.onclick=this._legendSelected,n.onmouseover=r.onmouseover=this._dispatchHoverLink,n.hoverConnect=r.id,r.hoverConnect=n.id;if(this.shapeList.push(n),this.shapeList.push(r),"horizontal"===this.legendOption.orient)v+=_+5+c.getTextWidth(h,a)+x;else y+=b+x}else if("horizontal"===this.legendOption.orient)v=this._itemGroupLocation.x,y+=b+x;else"right"===this.legendOption.x?v-=this._itemGroupLocation.maxWidth+x:v+=this._itemGroupLocation.maxWidth+x,
y=this._itemGroupLocation.y;if("horizontal"===this.legendOption.orient&&"center"===this.legendOption.x&&y!=this._itemGroupLocation.y)this._mLineOptimize()},_getName:function(t){return"undefined"!=typeof t.name?t.name:t},_getFormatterName:function(t){var e,i=this.legendOption.formatter;if("function"==typeof i)e=i.call(this.myChart,t);else if("string"==typeof i)e=i.replace("{name}",t);else e=t;return e},_getFormatterNameFromData:function(t){var e=this._getName(t);return this._getFormatterName(e)},_mLineOptimize:function(){for(var t=[],e=this._itemGroupLocation.x,i=2,n=this.shapeList.length;n>i;i++)if(this.shapeList[i].style.x===e)t.push((this._itemGroupLocation.width-(this.shapeList[i-1].style.x+c.getTextWidth(this.shapeList[i-1].style.text,this.shapeList[i-1].style.textFont)-e))/2);else if(i===n-1)t.push((this._itemGroupLocation.width-(this.shapeList[i].style.x+c.getTextWidth(this.shapeList[i].style.text,this.shapeList[i].style.textFont)-e))/2);for(var r=-1,i=1,n=this.shapeList.length;n>i;i++){if(this.shapeList[i].style.x===e)r++;if(0!==t[r])this.shapeList[i].style.x+=t[r];else;}},_buildBackground:function(){var t=this.reformCssArray(this.legendOption.padding);this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-t[3],y:this._itemGroupLocation.y-t[0],width:this._itemGroupLocation.width+t[3]+t[1],height:this._itemGroupLocation.height+t[0]+t[2],brushType:0===this.legendOption.borderWidth?"fill":"both",color:this.legendOption.backgroundColor,strokeColor:this.legendOption.borderColor,lineWidth:this.legendOption.borderWidth}}))},_getItemGroupLocation:function(){var t=this.legendOption.data,e=t.length,i=this.legendOption.itemGap,n=this.legendOption.itemWidth+5,r=this.legendOption.itemHeight,o=this.legendOption.textStyle,s=this.getFont(o),a=0,h=0,d=this.reformCssArray(this.legendOption.padding),u=this.zr.getWidth()-d[1]-d[3],f=this.zr.getHeight()-d[0]-d[2],p=0,m=0;if("horizontal"===this.legendOption.orient){h=r;for(var g=0;e>g;g++)if(""!==this._getName(t[g])){var v=c.getTextWidth(this._getFormatterNameFromData(t[g]),t[g].textStyle?this.getFont(l.merge(t[g].textStyle||{},o)):s);if(p+n+v+i>u)p-=i,a=Math.max(a,p),h+=r+i,p=0;else p+=n+v+i,a=Math.max(a,p-i)}else p-=i,a=Math.max(a,p),h+=r+i,p=0}else{for(var g=0;e>g;g++)m=Math.max(m,c.getTextWidth(this._getFormatterNameFromData(t[g]),t[g].textStyle?this.getFont(l.merge(t[g].textStyle||{},o)):s));m+=n,a=m;for(var g=0;e>g;g++)if(""!==this._getName(t[g]))if(p+r+i>f)a+=m+i,p-=i,h=Math.max(h,p),p=0;else p+=r+i,h=Math.max(h,p-i);else a+=m+i,p-=i,h=Math.max(h,p),p=0}u=this.zr.getWidth(),f=this.zr.getHeight();var y;switch(this.legendOption.x){case"center":y=Math.floor((u-a)/2);break;case"left":y=d[3]+this.legendOption.borderWidth;break;case"right":y=u-a-d[1]-d[3]-2*this.legendOption.borderWidth;break;default:y=this.parsePercent(this.legendOption.x,u)}var _;switch(this.legendOption.y){case"top":_=d[0]+this.legendOption.borderWidth;break;case"bottom":_=f-h-d[0]-d[2]-2*this.legendOption.borderWidth;break;case"center":_=Math.floor((f-h)/2);break;default:_=this.parsePercent(this.legendOption.y,f)}return{x:y,y:_,width:a,height:h,maxWidth:m}},_getSomethingByName:function(t){for(var e,i=this.option.series,n=0,r=i.length;r>n;n++){if(i[n].name===t)return{type:i[n].type,series:i[n],seriesIndex:n,data:null,dataIndex:-1};if(i[n].type===a.CHART_TYPE_PIE||i[n].type===a.CHART_TYPE_RADAR||i[n].type===a.CHART_TYPE_CHORD||i[n].type===a.CHART_TYPE_FORCE||i[n].type===a.CHART_TYPE_FUNNEL||i[n].type===a.CHART_TYPE_TREEMAP){e=i[n].categories||i[n].data||i[n].nodes;for(var o=0,s=e.length;s>o;o++)if(e[o].name===t)return{type:i[n].type,series:i[n],seriesIndex:n,data:e[o],dataIndex:o}}}return{type:"bar",series:null,seriesIndex:-1,data:null,dataIndex:-1}},_getItemShapeByType:function(t,e,i,n,r,o,s){var l,c="#ccc"===r?s:r,h={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{iconType:"legendicon"+o,x:t,y:e,width:i,height:n,color:r,strokeColor:r,lineWidth:2},highlightStyle:{color:c,strokeColor:c,lineWidth:1},hoverable:this.legendOption.selectedMode,clickable:this.legendOption.selectedMode};if(o.match("image")){var l=o.replace(new RegExp("^image:\\/\\/"),"");o="image"}switch(o){case"line":h.style.brushType="stroke",h.highlightStyle.lineWidth=3;break;case"radar":case"venn":case"tree":case"treemap":case"scatter":h.highlightStyle.lineWidth=3;break;case"k":h.style.brushType="both",h.highlightStyle.lineWidth=3,h.highlightStyle.color=h.style.color=this.deepQuery([this.ecTheme,a],"k.itemStyle.normal.color")||"#fff",h.style.strokeColor="#ccc"!=r?this.deepQuery([this.ecTheme,a],"k.itemStyle.normal.lineStyle.color")||"#ff3200":r;break;case"image":if(h.style.iconType="image",h.style.image=l,"#ccc"===r)h.style.opacity=.5}return h},__legendSelected:function(t){var e=t.target._name;if("single"===this.legendOption.selectedMode)for(var i in this._selectedMap)this._selectedMap[i]=!1;this._selectedMap[e]=!this._selectedMap[e],this.messageCenter.dispatch(a.EVENT.LEGEND_SELECTED,t.event,{selected:this._selectedMap,target:e},this.myChart)},__dispatchHoverLink:function(t){this.messageCenter.dispatch(a.EVENT.LEGEND_HOVERLINK,t.event,{target:t.target._name},this.myChart)},refresh:function(t){if(t){this.option=t||this.option,this.option.legend=this.reformOption(this.option.legend),this.legendOption=this.option.legend;var e,i,n,r,o=this.legendOption.data||[];if(this.legendOption.selected)for(var s in this.legendOption.selected)this._selectedMap[s]="undefined"!=typeof this._selectedMap[s]?this._selectedMap[s]:this.legendOption.selected[s];for(var l=0,c=o.length;c>l;l++)if(e=this._getName(o[l]),""!==e)if(i=this._getSomethingByName(e),!i.series)this._hasDataMap[e]=!1;else{if(this._hasDataMap[e]=!0,i.data&&(i.type===a.CHART_TYPE_PIE||i.type===a.CHART_TYPE_FORCE||i.type===a.CHART_TYPE_FUNNEL))r=[i.data,i.series];else r=[i.series];if(n=this.getItemStyleColor(this.deepQuery(r,"itemStyle.normal.color"),i.seriesIndex,i.dataIndex,i.data),n&&i.type!=a.CHART_TYPE_K)this.setColor(e,n);this._selectedMap[e]=null!=this._selectedMap[e]?this._selectedMap[e]:!0}else;}this.clear(),this._buildShape()},getRelatedAmount:function(t){for(var e,i=0,n=this.option.series,r=0,o=n.length;o>r;r++){if(n[r].name===t)i++;if(n[r].type===a.CHART_TYPE_PIE||n[r].type===a.CHART_TYPE_RADAR||n[r].type===a.CHART_TYPE_CHORD||n[r].type===a.CHART_TYPE_FORCE||n[r].type===a.CHART_TYPE_FUNNEL){e=n[r].type!=a.CHART_TYPE_FORCE?n[r].data:n[r].categories;for(var s=0,l=e.length;l>s;s++)if(e[s].name===t&&"-"!=e[s].value)i++}}return i},setColor:function(t,e){this._colorMap[t]=e},getColor:function(t){if(!this._colorMap[t])this._colorMap[t]=this.zr.getColor(this._colorIndex++);return this._colorMap[t]},hasColor:function(t){return this._colorMap[t]?this._colorMap[t]:!1},add:function(t,e){for(var i=this.legendOption.data,n=0,r=i.length;r>n;n++)if(this._getName(i[n])===t)return;this.legendOption.data.push(t),this.setColor(t,e),this._selectedMap[t]=!0,this._hasDataMap[t]=!0},del:function(t){for(var e=this.legendOption.data,i=0,n=e.length;n>i;i++)if(this._getName(e[i])===t)return this.legendOption.data.splice(i,1)},getItemShape:function(t){if(null!=t)for(var e,i=0,n=this.shapeList.length;n>i;i++)if(e=this.shapeList[i],e._name===t&&"text"!=e.type)return e},setItemShape:function(t,e){for(var i,n=0,r=this.shapeList.length;r>n;n++)if(i=this.shapeList[n],i._name===t&&"text"!=i.type){if(!this._selectedMap[t])e.style.color="#ccc",e.style.strokeColor="#ccc";this.zr.modShape(i.id,e)}},isSelected:function(t){if("undefined"!=typeof this._selectedMap[t])return this._selectedMap[t];else return!0},getSelectedMap:function(){return this._selectedMap},setSelected:function(t,e){if("single"===this.legendOption.selectedMode)for(var i in this._selectedMap)this._selectedMap[i]=!1;this._selectedMap[t]=e,this.messageCenter.dispatch(a.EVENT.LEGEND_SELECTED,null,{selected:this._selectedMap,target:t},this.myChart)},onlegendSelected:function(t,e){var i=t.selected;for(var n in i){if(this._selectedMap[n]!=i[n])e.needRefresh=!0;this._selectedMap[n]=i[n]}}};var h={line:function(t,e){var i=e.height/2;t.moveTo(e.x,e.y+i),t.lineTo(e.x+e.width,e.y+i)},pie:function(t,e){var i=e.x,n=e.y,o=e.width,s=e.height;r.prototype.buildPath(t,{x:i+o/2,y:n+s+2,r:s,r0:6,startAngle:45,endAngle:135})},eventRiver:function(t,e){var i=e.x,n=e.y,r=e.width,o=e.height;t.moveTo(i,n+o),t.bezierCurveTo(i+r,n+o,i,n+4,i+r,n+4),t.lineTo(i+r,n),t.bezierCurveTo(i,n,i+r,n+o-4,i,n+o-4),t.lineTo(i,n+o)},k:function(t,e){var i=e.x,n=e.y,r=e.width,o=e.height;s.prototype.buildPath(t,{x:i+r/2,y:[n+1,n+1,n+o-6,n+o],width:r-6})},bar:function(t,e){var i=e.x,n=e.y+1,r=e.width,o=e.height-2,s=3;t.moveTo(i+s,n),t.lineTo(i+r-s,n),t.quadraticCurveTo(i+r,n,i+r,n+s),t.lineTo(i+r,n+o-s),t.quadraticCurveTo(i+r,n+o,i+r-s,n+o),t.lineTo(i+s,n+o),t.quadraticCurveTo(i,n+o,i,n+o-s),t.lineTo(i,n+s),t.quadraticCurveTo(i,n,i+s,n)},force:function(t,e){o.prototype.iconLibrary.circle(t,e)},radar:function(t,e){var i=6,n=e.x+e.width/2,r=e.y+e.height/2,o=e.height/2,s=2*Math.PI/i,a=-Math.PI/2,l=n+o*Math.cos(a),c=r+o*Math.sin(a);t.moveTo(l,c),a+=s;for(var h=0,d=i-1;d>h;h++)t.lineTo(n+o*Math.cos(a),r+o*Math.sin(a)),a+=s;t.lineTo(l,c)}};h.chord=h.pie,h.map=h.bar;for(var d in h)o.prototype.iconLibrary["legendicon"+d]=h[d];return l.inherits(t,e),require("../component").define("legend",t),t}),define("echarts/util/shape/Chain",["require","zrender/shape/Base","./Icon","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/matrix"],function(require){function t(t){e.call(this,t)}var e=require("zrender/shape/Base"),i=require("./Icon"),n=require("zrender/shape/util/dashedLineTo"),r=require("zrender/tool/util"),o=require("zrender/tool/matrix");return t.prototype={type:"chain",brush:function(t,e){var i=this.style;if(e)i=this.getHighlightStyle(i,this.highlightStyle||{});t.save(),this.setContext(t,i),this.setTransform(t),t.save(),t.beginPath(),this.buildLinePath(t,i),t.stroke(),t.restore(),this.brushSymbol(t,i),t.restore()},buildLinePath:function(t,e){var i=e.x,r=e.y+5,o=e.width,s=e.height/2-10;if(t.moveTo(i,r),t.lineTo(i,r+s),t.moveTo(i+o,r),t.lineTo(i+o,r+s),t.moveTo(i,r+s/2),!e.lineType||"solid"==e.lineType)t.lineTo(i+o,r+s/2);else if("dashed"==e.lineType||"dotted"==e.lineType){var a=(e.lineWidth||1)*("dashed"==e.lineType?5:1);n(t,i,r+s/2,i+o,r+s/2,a)}},brushSymbol:function(t,e){var n=e.y+e.height/4;t.save();for(var r,o=e.chainPoint,s=0,a=o.length;a>s;s++){if(r=o[s],"none"!=r.symbol){t.beginPath();var l=r.symbolSize;i.prototype.buildPath(t,{iconType:r.symbol,x:r.x-l,y:n-l,width:2*l,height:2*l,n:r.n}),t.fillStyle=r.isEmpty?"#fff":e.strokeColor,t.closePath(),t.fill(),t.stroke()}if(r.showLabel)if(t.font=r.textFont,t.fillStyle=r.textColor,t.textAlign=r.textAlign,t.textBaseline=r.textBaseline,r.rotation)t.save(),this._updateTextTransform(t,r.rotation),t.fillText(r.name,r.textX,r.textY),t.restore();else t.fillText(r.name,r.textX,r.textY)}t.restore()},_updateTextTransform:function(t,e){var i=o.create();if(o.identity(i),0!==e[0]){var n=e[1]||0,r=e[2]||0;if(n||r)o.translate(i,i,[-n,-r]);if(o.rotate(i,i,e[0]),n||r)o.translate(i,i,[n,r])}t.transform.apply(t,i)},isCover:function(t,e){var i=this.style;if(t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height)return!0;else return!1}},r.inherits(t,e),t}),define("echarts/component/timeline",["require","./base","zrender/shape/Rectangle","../util/shape/Icon","../util/shape/Chain","../config","zrender/tool/util","zrender/tool/area","zrender/tool/event","../component"],function(require){function t(t,e,n,r,o){i.call(this,t,e,n,r,o);var l=this;if(l._onclick=function(t){return l.__onclick(t)},l._ondrift=function(t,e){return l.__ondrift(this,t,e)},l._ondragend=function(){return l.__ondragend()},l._setCurrentOption=function(){var t=l.timelineOption;l.currentIndex%=t.data.length;var e=l.options[l.currentIndex]||{};l.myChart._setOption(e,t.notMerge,!0),l.messageCenter.dispatch(s.EVENT.TIMELINE_CHANGED,null,{currentIndex:l.currentIndex,data:null!=t.data[l.currentIndex].name?t.data[l.currentIndex].name:t.data[l.currentIndex]},l.myChart)},l._onFrame=function(){if(l._setCurrentOption(),l._syncHandleShape(),l.timelineOption.autoPlay)l.playTicket=setTimeout(function(){if(l.currentIndex+=1,!l.timelineOption.loop&&l.currentIndex>=l.timelineOption.data.length)return l.currentIndex=l.timelineOption.data.length-1,void l.stop();else return void l._onFrame()},l.timelineOption.playInterval)},this.setTheme(!1),this.options=this.option.options,this.currentIndex=this.timelineOption.currentIndex%this.timelineOption.data.length,!this.timelineOption.notMerge&&0!==this.currentIndex)this.options[this.currentIndex]=a.merge(this.options[this.currentIndex],this.options[0]);if(this.timelineOption.show)this._buildShape(),this._syncHandleShape();if(this._setCurrentOption(),this.timelineOption.autoPlay){var l=this;this.playTicket=setTimeout(function(){l.play()},null!=this.ecTheme.animationDuration?this.ecTheme.animationDuration:s.animationDuration)}}function e(t,e){var i=2,n=e.x+i,o=e.y+i+2,s=e.width-i,a=e.height-i,l=e.symbol;if("last"===l)t.moveTo(n+s-2,o+a/3),t.lineTo(n+s-2,o),t.lineTo(n+2,o+a/2),t.lineTo(n+s-2,o+a),t.lineTo(n+s-2,o+a/3*2),t.moveTo(n,o),t.lineTo(n,o);else if("next"===l)t.moveTo(n+2,o+a/3),t.lineTo(n+2,o),t.lineTo(n+s-2,o+a/2),t.lineTo(n+2,o+a),t.lineTo(n+2,o+a/3*2),t.moveTo(n,o),t.lineTo(n,o);else if("play"===l)if("stop"===e.status)t.moveTo(n+2,o),t.lineTo(n+s-2,o+a/2),t.lineTo(n+2,o+a),t.lineTo(n+2,o);else{var c="both"===e.brushType?2:3;t.rect(n+2,o,c,a),t.rect(n+s-c-2,o,c,a)}else if(l.match("image")){var h="";h=l.replace(new RegExp("^image:\\/\\/"),""),l=r.prototype.iconLibrary.image,l(t,{x:n,y:o,width:s,height:a,image:h})}}var i=require("./base"),n=require("zrender/shape/Rectangle"),r=require("../util/shape/Icon"),o=require("../util/shape/Chain"),s=require("../config");s.timeline={zlevel:0,z:4,show:!0,type:"time",notMerge:!1,realtime:!0,x:80,x2:80,y2:0,height:50,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,controlPosition:"left",autoPlay:!1,loop:!0,playInterval:2e3,lineStyle:{width:1,color:"#666",type:"dashed"},label:{show:!0,interval:"auto",rotate:0,textStyle:{color:"#333"}},checkpointStyle:{symbol:"auto",symbolSize:"auto",color:"auto",borderColor:"auto",borderWidth:"auto",label:{show:!1,textStyle:{color:"auto"}}},controlStyle:{itemSize:15,itemGap:5,normal:{color:"#333"},emphasis:{color:"#1e90ff"}},symbol:"emptyDiamond",symbolSize:4,currentIndex:0};var a=require("zrender/tool/util"),l=require("zrender/tool/area"),c=require("zrender/tool/event");return t.prototype={type:s.COMPONENT_TYPE_TIMELINE,_buildShape:function(){if(this._location=this._getLocation(),this._buildBackground(),this._buildControl(),this._chainPoint=this._getChainPoint(),this.timelineOption.label.show)for(var t=this._getInterval(),e=0,i=this._chainPoint.length;i>e;e+=t)this._chainPoint[e].showLabel=!0;this._buildChain(),this._buildHandle();for(var e=0,n=this.shapeList.length;n>e;e++)this.zr.addShape(this.shapeList[e])},_getLocation:function(){var t,e=this.timelineOption,i=this.reformCssArray(this.timelineOption.padding),n=this.zr.getWidth(),r=this.parsePercent(e.x,n),o=this.parsePercent(e.x2,n);if(null==e.width)t=n-r-o,o=n-o;else t=this.parsePercent(e.width,n),o=r+t;var s,a,l=this.zr.getHeight(),c=this.parsePercent(e.height,l);if(null!=e.y)s=this.parsePercent(e.y,l),a=s+c;else a=l-this.parsePercent(e.y2,l),s=a-c;return{x:r+i[3],y:s+i[0],x2:o-i[1],y2:a-i[2],width:t-i[1]-i[3],height:c-i[0]-i[2]}},_getReformedLabel:function(t){var e=this.timelineOption,i=null!=e.data[t].name?e.data[t].name:e.data[t],n=e.data[t].formatter||e.label.formatter;if(n)if("function"==typeof n)i=n.call(this.myChart,i);else if("string"==typeof n)i=n.replace("{value}",i);return i},_getInterval:function(){var t=this._chainPoint,e=this.timelineOption,i=e.label.interval;if("auto"===i){var n=e.label.textStyle.fontSize,r=e.data,o=e.data.length;if(o>3){var s,a,c=!1;for(i=0;!c&&o>i;){i++,c=!0;for(var h=i;o>h;h+=i){if(s=t[h].x-t[h-i].x,0!==e.label.rotate)a=n;else if(r[h].textStyle)a=l.getTextWidth(t[h].name,t[h].textFont);else{var d=t[h].name+"",u=(d.match(/\w/g)||"").length,f=d.length-u;a=u*n*2/3+f*n}if(a>s){c=!1;break}}}}else i=1}else i=i-0+1;return i},_getChainPoint:function(){function t(t){return null!=c[t].name?c[t].name:c[t]+""}var e,i=this.timelineOption,n=i.symbol.toLowerCase(),r=i.symbolSize,o=i.label.rotate,s=i.label.textStyle,l=this.getFont(s),c=i.data,h=this._location.x,d=this._location.y+this._location.height/4*3,u=this._location.x2-this._location.x,f=c.length,p=[];if(f>1){var m=u/f;if(m=m>50?50:20>m?5:m,u-=2*m,"number"===i.type)for(var g=0;f>g;g++)p.push(h+m+u/(f-1)*g);else{p[0]=new Date(t(0).replace(/-/g,"/")),p[f-1]=new Date(t(f-1).replace(/-/g,"/"))-p[0];for(var g=1;f>g;g++)p[g]=h+m+u*(new Date(t(g).replace(/-/g,"/"))-p[0])/p[f-1];p[0]=h+m}}else p.push(h+u/2);for(var v,y,_,b,x,w=[],g=0;f>g;g++){if(h=p[g],v=c[g].symbol&&c[g].symbol.toLowerCase()||n,v.match("empty"))v=v.replace("empty",""),_=!0;else _=!1;if(v.match("star"))y=v.replace("star","")-0||5,v="star";if(e=c[g].textStyle?a.merge(c[g].textStyle||{},s):s,b=e.align||"center",o)b=o>0?"right":"left",x=[o*Math.PI/180,h,d-5];else x=!1;w.push({x:h,n:y,isEmpty:_,symbol:v,symbolSize:c[g].symbolSize||r,color:c[g].color,borderColor:c[g].borderColor,borderWidth:c[g].borderWidth,name:this._getReformedLabel(g),textColor:e.color,textAlign:b,textBaseline:e.baseline||"middle",textX:h,textY:d-(o?5:0),textFont:c[g].textStyle?this.getFont(e):l,rotation:x,showLabel:!1})}return w},_buildBackground:function(){var t=this.timelineOption,e=this.reformCssArray(this.timelineOption.padding),i=this._location.width,r=this._location.height;if(0!==t.borderWidth||"rgba(0,0,0,0)"!=t.backgroundColor.replace(/\s/g,""))this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x-e[3],y:this._location.y-e[0],width:i+e[1]+e[3],height:r+e[0]+e[2],brushType:0===t.borderWidth?"fill":"both",color:t.backgroundColor,strokeColor:t.borderColor,lineWidth:t.borderWidth}}))},_buildControl:function(){var t=this,e=this.timelineOption,i=e.lineStyle,n=e.controlStyle;if("none"!==e.controlPosition){var o,s=n.itemSize,l=n.itemGap;if("left"===e.controlPosition)o=this._location.x,this._location.x+=3*(s+l);else o=this._location.x2-(3*(s+l)-l),this._location.x2-=3*(s+l);var c=this._location.y,h={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{iconType:"timelineControl",symbol:"last",x:o,y:c,width:s,height:s,brushType:"stroke",color:n.normal.color,strokeColor:n.normal.color,lineWidth:i.width},highlightStyle:{color:n.emphasis.color,strokeColor:n.emphasis.color,lineWidth:i.width+1},clickable:!0};this._ctrLastShape=new r(h),this._ctrLastShape.onclick=function(){t.last()},this.shapeList.push(this._ctrLastShape),o+=s+l,this._ctrPlayShape=new r(a.clone(h)),this._ctrPlayShape.style.brushType="fill",this._ctrPlayShape.style.symbol="play",this._ctrPlayShape.style.status=this.timelineOption.autoPlay?"playing":"stop",this._ctrPlayShape.style.x=o,this._ctrPlayShape.onclick=function(){if("stop"===t._ctrPlayShape.style.status)t.play();else t.stop()},this.shapeList.push(this._ctrPlayShape),o+=s+l,this._ctrNextShape=new r(a.clone(h)),this._ctrNextShape.style.symbol="next",this._ctrNextShape.style.x=o,this._ctrNextShape.onclick=function(){t.next()},this.shapeList.push(this._ctrNextShape)}},_buildChain:function(){var t=this.timelineOption,e=t.lineStyle;this._timelineShae={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:this._location.x,y:this.subPixelOptimize(this._location.y,e.width),width:this._location.x2-this._location.x,height:this._location.height,chainPoint:this._chainPoint,brushType:"both",strokeColor:e.color,lineWidth:e.width,lineType:e.type},hoverable:!1,clickable:!0,onclick:this._onclick},this._timelineShae=new o(this._timelineShae),this.shapeList.push(this._timelineShae)},_buildHandle:function(){var t=this._chainPoint[this.currentIndex],e=t.symbolSize+1;e=5>e?5:e,this._handleShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,hoverable:!1,draggable:!0,style:{iconType:"diamond",n:t.n,x:t.x-e,y:this._location.y+this._location.height/4-e,width:2*e,height:2*e,brushType:"both",textPosition:"specific",textX:t.x,textY:this._location.y-this._location.height/4,textAlign:"center",textBaseline:"middle"},highlightStyle:{},ondrift:this._ondrift,ondragend:this._ondragend},this._handleShape=new r(this._handleShape),this.shapeList.push(this._handleShape)},_syncHandleShape:function(){if(this.timelineOption.show){var t=this.timelineOption,e=t.checkpointStyle,i=this._chainPoint[this.currentIndex];if(this._handleShape.style.text=e.label.show?i.name:"",this._handleShape.style.textFont=i.textFont,this._handleShape.style.n=i.n,"auto"===e.symbol)this._handleShape.style.iconType="none"!=i.symbol?i.symbol:"diamond";else if(this._handleShape.style.iconType=e.symbol,e.symbol.match("star"))this._handleShape.style.n=e.symbol.replace("star","")-0||5,this._handleShape.style.iconType="star";var n;if("auto"===e.symbolSize)n=i.symbolSize+2,n=5>n?5:n;else n=e.symbolSize-0;this._handleShape.style.color="auto"===e.color?i.color?i.color:t.controlStyle.emphasis.color:e.color,this._handleShape.style.textColor="auto"===e.label.textStyle.color?this._handleShape.style.color:e.label.textStyle.color,this._handleShape.highlightStyle.strokeColor=this._handleShape.style.strokeColor="auto"===e.borderColor?i.borderColor?i.borderColor:"#fff":e.borderColor,this._handleShape.style.lineWidth="auto"===e.borderWidth?i.borderWidth?i.borderWidth:0:e.borderWidth-0,this._handleShape.highlightStyle.lineWidth=this._handleShape.style.lineWidth+1,this.zr.animate(this._handleShape.id,"style").when(500,{x:i.x-n,textX:i.x,y:this._location.y+this._location.height/4-n,width:2*n,height:2*n}).start("ExponentialOut")}},_findChainIndex:function(t){var e=this._chainPoint,i=e.length;if(t<=e[0].x)return 0;else if(t>=e[i-1].x)return i-1;for(var n=0;i-1>n;n++)if(t>=e[n].x&&t<=e[n+1].x)return Math.abs(t-e[n].x)<Math.abs(t-e[n+1].x)?n:n+1},__onclick:function(t){var e=c.getX(t.event),i=this._findChainIndex(e);if(i===this.currentIndex)return!0;else return this.currentIndex=i,this.timelineOption.autoPlay&&this.stop(),clearTimeout(this.playTicket),void this._onFrame()},__ondrift:function(t,e){this.timelineOption.autoPlay&&this.stop();var i,n=this._chainPoint,r=n.length;if(t.style.x+e<=n[0].x-n[0].symbolSize)t.style.x=n[0].x-n[0].symbolSize,i=0;else if(t.style.x+e>=n[r-1].x-n[r-1].symbolSize)t.style.x=n[r-1].x-n[r-1].symbolSize,i=r-1;else t.style.x+=e,i=this._findChainIndex(t.style.x);var o=n[i],s=o.symbolSize+2;if(t.style.iconType=o.symbol,t.style.n=o.n,t.style.textX=t.style.x+s/2,t.style.y=this._location.y+this._location.height/4-s,t.style.width=2*s,t.style.height=2*s,t.style.text=o.name,i===this.currentIndex)return!0;if(this.currentIndex=i,this.timelineOption.realtime){clearTimeout(this.playTicket);var a=this;this.playTicket=setTimeout(function(){a._setCurrentOption()},200)}return!0},__ondragend:function(){this.isDragend=!0},ondragend:function(t,e){if(this.isDragend&&t.target)!this.timelineOption.realtime&&this._setCurrentOption(),e.dragOut=!0,e.dragIn=!0,e.needRefresh=!1,this.isDragend=!1,this._syncHandleShape()},last:function(){if(this.timelineOption.autoPlay&&this.stop(),this.currentIndex-=1,this.currentIndex<0)this.currentIndex=this.timelineOption.data.length-1;return this._onFrame(),this.currentIndex},next:function(){if(this.timelineOption.autoPlay&&this.stop(),this.currentIndex+=1,this.currentIndex>=this.timelineOption.data.length)this.currentIndex=0;return this._onFrame(),this.currentIndex},play:function(t,e){if(this._ctrPlayShape&&"playing"!=this._ctrPlayShape.style.status)this._ctrPlayShape.style.status="playing",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame();if(this.timelineOption.autoPlay=null!=e?e:!0,!this.timelineOption.autoPlay)clearTimeout(this.playTicket);if(this.currentIndex=null!=t?t:this.currentIndex+1,this.currentIndex>=this.timelineOption.data.length)this.currentIndex=0;return this._onFrame(),this.currentIndex},stop:function(){if(this._ctrPlayShape&&"stop"!=this._ctrPlayShape.style.status)this._ctrPlayShape.style.status="stop",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame();return this.timelineOption.autoPlay=!1,clearTimeout(this.playTicket),this.currentIndex},resize:function(){if(this.timelineOption.show)this.clear(),this._buildShape(),this._syncHandleShape()},setTheme:function(t){if(this.timelineOption=this.reformOption(a.clone(this.option.timeline)),this.timelineOption.label.textStyle=this.getTextStyle(this.timelineOption.label.textStyle),this.timelineOption.checkpointStyle.label.textStyle=this.getTextStyle(this.timelineOption.checkpointStyle.label.textStyle),!this.myChart.canvasSupported)this.timelineOption.realtime=!1;if(this.timelineOption.show&&t)this.clear(),this._buildShape(),this._syncHandleShape()},onbeforDispose:function(){clearTimeout(this.playTicket)}},r.prototype.iconLibrary.timelineControl=e,a.inherits(t,i),require("../component").define("timeline",t),t}),define("zrender/loadingEffect/Bar",["require","./Base","../tool/util","../tool/color","../shape/Rectangle"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/color"),r=require("../shape/Rectangle");return i.inherits(t,e),t.prototype._start=function(t,e){var o=i.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effectOption:{x:0,y:this.canvasHeight/2-30,width:this.canvasWidth,height:5,brushType:"fill",timeInterval:100}}),s=this.createTextShape(o.textStyle),a=this.createBackgroundShape(o.backgroundColor),l=o.effectOption,c=new r({highlightStyle:i.clone(l)});if(c.highlightStyle.color=l.color||n.getLinearGradient(l.x,l.y,l.x+l.width,l.y+l.height,[[0,"#ff6400"],[.5,"#ffe100"],[1,"#b1ff00"]]),null!=o.progress)return t(a),c.highlightStyle.width=this.adjust(o.progress,[0,1])*o.effectOption.width,t(c),t(s),void e();else return c.highlightStyle.width=0,setInterval(function(){if(t(a),c.highlightStyle.width<l.width)c.highlightStyle.width+=8;else c.highlightStyle.width=0;t(c),t(s),e()},l.timeInterval)},t}),define("zrender/loadingEffect/Bubble",["require","./Base","../tool/util","../tool/color","../shape/Circle"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/color"),r=require("../shape/Circle");return i.inherits(t,e),t.prototype._start=function(t,e){for(var o=i.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{n:50,lineWidth:2,brushType:"stroke",color:"random",timeInterval:100}}),s=this.createTextShape(o.textStyle),a=this.createBackgroundShape(o.backgroundColor),l=o.effect,c=l.n,h=l.brushType,d=l.lineWidth,u=[],f=this.canvasWidth,p=this.canvasHeight,m=0;c>m;m++){var g="random"==l.color?n.alpha(n.random(),.3):l.color;u[m]=new r({highlightStyle:{x:Math.ceil(Math.random()*f),y:Math.ceil(Math.random()*p),r:Math.ceil(40*Math.random()),brushType:h,color:g,strokeColor:g,lineWidth:d},animationY:Math.ceil(20*Math.random())})}return setInterval(function(){t(a);for(var i=0;c>i;i++){var n=u[i].highlightStyle;if(n.y-u[i].animationY+n.r<=0)u[i].highlightStyle.y=p+n.r,u[i].highlightStyle.x=Math.ceil(Math.random()*f);u[i].highlightStyle.y-=u[i].animationY,t(u[i])}t(s),e()},l.timeInterval)},t}),define("zrender/loadingEffect/DynamicLine",["require","./Base","../tool/util","../tool/color","../shape/Line"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/color"),r=require("../shape/Line");return i.inherits(t,e),t.prototype._start=function(t,e){for(var o=i.merge(this.options,{textStyle:{color:"#fff"},backgroundColor:"rgba(0, 0, 0, 0.8)",effectOption:{n:30,lineWidth:1,color:"random",timeInterval:100}}),s=this.createTextShape(o.textStyle),a=this.createBackgroundShape(o.backgroundColor),l=o.effectOption,c=l.n,h=l.lineWidth,d=[],u=this.canvasWidth,f=this.canvasHeight,p=0;c>p;p++){var m=-Math.ceil(1e3*Math.random()),g=Math.ceil(400*Math.random()),v=Math.ceil(Math.random()*f),y="random"==l.color?n.random():l.color;d[p]=new r({highlightStyle:{xStart:m,yStart:v,xEnd:m+g,yEnd:v,strokeColor:y,lineWidth:h},animationX:Math.ceil(100*Math.random()),len:g})}return setInterval(function(){t(a);for(var i=0;c>i;i++){var n=d[i].highlightStyle;if(n.xStart>=u)d[i].len=Math.ceil(400*Math.random()),n.xStart=-400,n.xEnd=-400+d[i].len,n.yStart=Math.ceil(Math.random()*f),n.yEnd=n.yStart;n.xStart+=d[i].animationX,n.xEnd+=d[i].animationX,t(d[i])}t(s),e()},l.timeInterval)},t}),define("zrender/shape/Ring",["require","./Base","../tool/util"],function(require){var t=require("./Base"),e=function(e){t.call(this,e)};return e.prototype={type:"ring",buildPath:function(t,e){t.arc(e.x,e.y,e.r,0,2*Math.PI,!1),t.moveTo(e.x+e.r0,e.y),t.arc(e.x,e.y,e.r0,0,2*Math.PI,!0)},getRect:function(t){if(t.__rect)return t.__rect;var e;if("stroke"==t.brushType||"fill"==t.brushType)e=t.lineWidth||1;else e=0;return t.__rect={x:Math.round(t.x-t.r-e/2),y:Math.round(t.y-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}},require("../tool/util").inherits(e,t),e}),define("zrender/loadingEffect/Ring",["require","./Base","../tool/util","../tool/color","../shape/Ring","../shape/Sector"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/color"),r=require("../shape/Ring"),o=require("../shape/Sector");return i.inherits(t,e),t.prototype._start=function(t,e){var s=i.merge(this.options,{textStyle:{color:"#07a"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{x:this.canvasWidth/2,y:this.canvasHeight/2,r0:60,r:100,color:"#bbdcff",brushType:"fill",textPosition:"inside",textFont:"normal 30px verdana",textColor:"rgba(30, 144, 255, 0.6)",timeInterval:100}}),a=s.effect,l=s.textStyle;if(null==l.x)l.x=a.x;if(null==l.y)l.y=a.y+(a.r0+a.r)/2-5;for(var c=this.createTextShape(s.textStyle),h=this.createBackgroundShape(s.backgroundColor),d=a.x,u=a.y,f=a.r0+6,p=a.r-6,m=a.color,g=n.lift(m,.1),v=new r({highlightStyle:i.clone(a)}),y=[],_=n.getGradientColors(["#ff6400","#ffe100","#97ff00"],25),b=15,x=240,w=0;16>w;w++)y.push(new o({highlightStyle:{x:d,y:u,r0:f,r:p,startAngle:x-b,endAngle:x,brushType:"fill",color:g},_color:n.getLinearGradient(d+f*Math.cos(x,!0),u-f*Math.sin(x,!0),d+f*Math.cos(x-b,!0),u-f*Math.sin(x-b,!0),[[0,_[2*w]],[1,_[2*w+1]]])})),x-=b;x=360;for(var w=0;4>w;w++)y.push(new o({highlightStyle:{x:d,y:u,r0:f,r:p,startAngle:x-b,endAngle:x,brushType:"fill",color:g},_color:n.getLinearGradient(d+f*Math.cos(x,!0),u-f*Math.sin(x,!0),d+f*Math.cos(x-b,!0),u-f*Math.sin(x-b,!0),[[0,_[2*w+32]],[1,_[2*w+33]]])})),x-=b;var T=0;if(null!=s.progress){t(h),T=100*this.adjust(s.progress,[0,1]).toFixed(2)/5,v.highlightStyle.text=5*T+"%",t(v);for(var w=0;20>w;w++)y[w].highlightStyle.color=T>w?y[w]._color:g,t(y[w]);return t(c),void e()}return setInterval(function(){t(h),T+=T>=20?-20:1,t(v);for(var i=0;20>i;i++)y[i].highlightStyle.color=T>i?y[i]._color:g,t(y[i]);t(c),e()},a.timeInterval)},t}),define("zrender/loadingEffect/Spin",["require","./Base","../tool/util","../tool/color","../tool/area","../shape/Sector"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/color"),r=require("../tool/area"),o=require("../shape/Sector");return i.inherits(t,e),t.prototype._start=function(t,e){var s=i.merge(this.options,{textStyle:{color:"#fff",textAlign:"start"},backgroundColor:"rgba(0, 0, 0, 0.8)"}),a=this.createTextShape(s.textStyle),l=10,c=r.getTextWidth(a.highlightStyle.text,a.highlightStyle.textFont),h=r.getTextHeight(a.highlightStyle.text,a.highlightStyle.textFont),d=i.merge(this.options.effect||{},{r0:9,r:15,n:18,color:"#fff",timeInterval:100}),u=this.getLocation(this.options.textStyle,c+l+2*d.r,Math.max(2*d.r,h));d.x=u.x+d.r,d.y=a.highlightStyle.y=u.y+u.height/2,a.highlightStyle.x=d.x+d.r+l;for(var f=this.createBackgroundShape(s.backgroundColor),p=d.n,m=d.x,g=d.y,v=d.r0,y=d.r,_=d.color,b=[],x=Math.round(180/p),w=0;p>w;w++)b[w]=new o({
highlightStyle:{x:m,y:g,r0:v,r:y,startAngle:x*w*2,endAngle:x*w*2+x,color:n.alpha(_,(w+1)/p),brushType:"fill"}});var T=[0,m,g];return setInterval(function(){t(f),T[0]-=.3;for(var i=0;p>i;i++)b[i].rotation=T,t(b[i]);t(a),e()},d.timeInterval)},t}),define("zrender/loadingEffect/Whirling",["require","./Base","../tool/util","../tool/area","../shape/Ring","../shape/Droplet","../shape/Circle"],function(require){function t(t){e.call(this,t)}var e=require("./Base"),i=require("../tool/util"),n=require("../tool/area"),r=require("../shape/Ring"),o=require("../shape/Droplet"),s=require("../shape/Circle");return i.inherits(t,e),t.prototype._start=function(t,e){var a=i.merge(this.options,{textStyle:{color:"#888",textAlign:"start"},backgroundColor:"rgba(250, 250, 250, 0.8)"}),l=this.createTextShape(a.textStyle),c=10,h=n.getTextWidth(l.highlightStyle.text,l.highlightStyle.textFont),d=n.getTextHeight(l.highlightStyle.text,l.highlightStyle.textFont),u=i.merge(this.options.effect||{},{r:18,colorIn:"#fff",colorOut:"#555",colorWhirl:"#6cf",timeInterval:50}),f=this.getLocation(this.options.textStyle,h+c+2*u.r,Math.max(2*u.r,d));u.x=f.x+u.r,u.y=l.highlightStyle.y=f.y+f.height/2,l.highlightStyle.x=u.x+u.r+c;var p=this.createBackgroundShape(a.backgroundColor),m=new o({highlightStyle:{a:Math.round(u.r/2),b:Math.round(u.r-u.r/6),brushType:"fill",color:u.colorWhirl}}),g=new s({highlightStyle:{r:Math.round(u.r/6),brushType:"fill",color:u.colorIn}}),v=new r({highlightStyle:{r0:Math.round(u.r-u.r/3),r:u.r,brushType:"fill",color:u.colorOut}}),y=[0,u.x,u.y];return m.highlightStyle.x=g.highlightStyle.x=v.highlightStyle.x=y[1],m.highlightStyle.y=g.highlightStyle.y=v.highlightStyle.y=y[2],setInterval(function(){t(p),t(v),y[0]-=.3,m.rotation=y,t(m),t(g),t(l),e()},u.timeInterval)},t}),define("echarts/theme/macarons",[],function(){var t={color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],title:{textStyle:{fontWeight:"normal",color:"#008acd"}},dataRange:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{color:["#1e90ff","#1e90ff","#1e90ff","#1e90ff"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},bar:{itemStyle:{normal:{barBorderRadius:5},emphasis:{barBorderRadius:5}}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},k:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#d87a80"}}},emphasis:{areaStyle:{color:"#fe994e"}}}},force:{itemStyle:{normal:{linkStyle:{color:"#1e90ff"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return t}),define("echarts/theme/infographic",[],function(){var t={color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],title:{textStyle:{fontWeight:"normal",color:"#27727B"}},dataRange:{x:"right",y:"center",itemWidth:5,itemHeight:25,color:["#C1232B","#FCCE10"]},toolbox:{color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}}},dataZoom:{dataBackgroundColor:"rgba(181,195,52,0.3)",fillerColor:"rgba(181,195,52,0.2)",handleColor:"#27727B"},grid:{borderWidth:0},categoryAxis:{axisLine:{lineStyle:{color:"#27727B"}},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1},splitArea:{show:!1},splitLine:{lineStyle:{color:["#ccc"],type:"dashed"}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#27727B"},controlStyle:{normal:{color:"#27727B"},emphasis:{color:"#27727B"}},symbol:"emptyCircle",symbolSize:3},line:{itemStyle:{normal:{borderWidth:2,borderColor:"#fff",lineStyle:{width:3}},emphasis:{borderWidth:0}},symbol:"circle",symbolSize:3.5},k:{itemStyle:{normal:{color:"#C1232B",color0:"#B5C334",lineStyle:{width:1,color:"#C1232B",color0:"#B5C334"}}}},scatter:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(200,200,200,0.5)"},emphasis:{borderWidth:0}},symbol:"star4",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#C1232B"}}},emphasis:{areaStyle:{color:"#fe994e"},label:{textStyle:{color:"rgb(100,0,0)"}}}}},force:{itemStyle:{normal:{linkStyle:{color:"#27727B"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{center:["50%","80%"],radius:"100%",startAngle:180,endAngle:0,axisLine:{show:!0,lineStyle:{color:[[.2,"#B5C334"],[.8,"#27727B"],[1,"#C1232B"]],width:"40%"}},axisTick:{splitNumber:2,length:5,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#fff",fontWeight:"bolder"}},splitLine:{length:"5%",lineStyle:{color:"#fff"}},pointer:{width:"40%",length:"80%",color:"#fff"},title:{offsetCenter:[0,-20],textStyle:{color:"auto",fontSize:20}},detail:{offsetCenter:[0,0],textStyle:{color:"auto",fontSize:40}}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return t}),define("echarts/echarts",["require","./config","zrender/tool/util","zrender/tool/event","zrender/tool/env","zrender","zrender/config","./chart/island","./component/toolbox","./component","./component/title","./component/tooltip","./component/legend","./util/ecData","./chart","zrender/tool/color","./component/timeline","zrender/shape/Image","zrender/loadingEffect/Bar","zrender/loadingEffect/Bubble","zrender/loadingEffect/DynamicLine","zrender/loadingEffect/Ring","zrender/loadingEffect/Spin","zrender/loadingEffect/Whirling","./theme/macarons","./theme/infographic"],function(require){function t(){o.Dispatcher.call(this)}function e(e){e.innerHTML="",this._themeConfig={},this.dom=e,this._connected=!1,this._status={dragIn:!1,dragOut:!1,needRefresh:!1},this._curEventType=!1,this._chartList=[],this._messageCenter=new t,this._messageCenterOutSide=new t,this.resize=this.resize(),this._init()}function i(t,e,i,n,r){for(var o=t._chartList,s=o.length;s--;){var a=o[s];if("function"==typeof a[e])a[e](i,n,r)}}var n=require("./config"),r=require("zrender/tool/util"),o=require("zrender/tool/event"),s={},a=require("zrender/tool/env").canvasSupported,l=new Date-0,c={},h="_echarts_instance_";s.version="2.2.7",s.dependencies={zrender:"2.1.1"},s.init=function(t,i){var n=require("zrender");if(n.version.replace(".","")-0<s.dependencies.zrender.replace(".","")-0)console.error("ZRender "+n.version+" is too old for ECharts "+s.version+". Current version need ZRender "+s.dependencies.zrender+"+");t=t instanceof Array?t[0]:t;var r=t.getAttribute(h);if(!r)r=l++,t.setAttribute(h,r);if(c[r])c[r].dispose();return c[r]=new e(t),c[r].id=r,c[r].canvasSupported=a,c[r].setTheme(i),c[r]},s.getInstanceById=function(t){return c[t]},r.merge(t.prototype,o.Dispatcher.prototype,!0);var d=require("zrender/config").EVENT,u=["CLICK","DBLCLICK","MOUSEOVER","MOUSEOUT","DRAGSTART","DRAGEND","DRAGENTER","DRAGOVER","DRAGLEAVE","DROP"];return e.prototype={_init:function(){var t=this,e=require("zrender").init(this.dom);this._zr=e,this._messageCenter.dispatch=function(e,i,n,r){n=n||{},n.type=e,n.event=i,t._messageCenter.dispatchWithContext(e,n,r),t._messageCenterOutSide.dispatchWithContext(e,n,r)},this._onevent=function(e){return t.__onevent(e)};for(var i in n.EVENT)if("CLICK"!=i&&"DBLCLICK"!=i&&"HOVER"!=i&&"MOUSEOUT"!=i&&"MAP_ROAM"!=i)this._messageCenter.bind(n.EVENT[i],this._onevent,this);var r={};this._onzrevent=function(e){return t[r[e.type]](e)};for(var o=0,s=u.length;s>o;o++){var a=u[o],l=d[a];r[l]="_on"+a.toLowerCase(),e.on(l,this._onzrevent)}this.chart={},this.component={};var c=require("./chart/island");this._island=new c(this._themeConfig,this._messageCenter,e,{},this),this.chart.island=this._island;var h=require("./component/toolbox");this._toolbox=new h(this._themeConfig,this._messageCenter,e,{},this),this.component.toolbox=this._toolbox;var f=require("./component");if(f.define("title",require("./component/title")),f.define("tooltip",require("./component/tooltip")),f.define("legend",require("./component/legend")),0===e.getWidth()||0===e.getHeight())console.error("Dom’s width & height should be ready before init.")},__onevent:function(t){t.__echartsId=t.__echartsId||this.id;var e=t.__echartsId===this.id;if(!this._curEventType)this._curEventType=t.type;switch(t.type){case n.EVENT.LEGEND_SELECTED:this._onlegendSelected(t);break;case n.EVENT.DATA_ZOOM:if(!e){var i=this.component.dataZoom;if(i)i.silence(!0),i.absoluteZoom(t.zoom),i.silence(!1)}this._ondataZoom(t);break;case n.EVENT.DATA_RANGE:e&&this._ondataRange(t);break;case n.EVENT.MAGIC_TYPE_CHANGED:if(!e){var r=this.component.toolbox;if(r)r.silence(!0),r.setMagicType(t.magicType),r.silence(!1)}this._onmagicTypeChanged(t);break;case n.EVENT.DATA_VIEW_CHANGED:e&&this._ondataViewChanged(t);break;case n.EVENT.TOOLTIP_HOVER:e&&this._tooltipHover(t);break;case n.EVENT.RESTORE:this._onrestore();break;case n.EVENT.REFRESH:e&&this._onrefresh(t);break;case n.EVENT.TOOLTIP_IN_GRID:case n.EVENT.TOOLTIP_OUT_GRID:if(!e){var o=this.component.grid;if(o)this._zr.trigger("mousemove",{connectTrigger:!0,zrenderX:o.getX()+t.x*o.getWidth(),zrenderY:o.getY()+t.y*o.getHeight()})}else if(this._connected){var o=this.component.grid;if(o)t.x=(t.event.zrenderX-o.getX())/o.getWidth(),t.y=(t.event.zrenderY-o.getY())/o.getHeight()}}if(this._connected&&e&&this._curEventType===t.type){for(var s in this._connected)this._connected[s].connectedEventHandler(t);this._curEventType=null}if(!e||!this._connected&&e)this._curEventType=null},_onclick:function(t){if(i(this,"onclick",t),t.target){var e=this._eventPackage(t.target);if(e&&null!=e.seriesIndex)this._messageCenter.dispatch(n.EVENT.CLICK,t.event,e,this)}},_ondblclick:function(t){if(i(this,"ondblclick",t),t.target){var e=this._eventPackage(t.target);if(e&&null!=e.seriesIndex)this._messageCenter.dispatch(n.EVENT.DBLCLICK,t.event,e,this)}},_onmouseover:function(t){if(t.target){var e=this._eventPackage(t.target);if(e&&null!=e.seriesIndex)this._messageCenter.dispatch(n.EVENT.HOVER,t.event,e,this)}},_onmouseout:function(t){if(t.target){var e=this._eventPackage(t.target);if(e&&null!=e.seriesIndex)this._messageCenter.dispatch(n.EVENT.MOUSEOUT,t.event,e,this)}},_ondragstart:function(t){this._status={dragIn:!1,dragOut:!1,needRefresh:!1},i(this,"ondragstart",t)},_ondragenter:function(t){i(this,"ondragenter",t)},_ondragover:function(t){i(this,"ondragover",t)},_ondragleave:function(t){i(this,"ondragleave",t)},_ondrop:function(t){i(this,"ondrop",t,this._status),this._island.ondrop(t,this._status)},_ondragend:function(t){if(i(this,"ondragend",t,this._status),this._timeline&&this._timeline.ondragend(t,this._status),this._island.ondragend(t,this._status),this._status.needRefresh){this._syncBackupData(this._option);var e=this._messageCenter;e.dispatch(n.EVENT.DATA_CHANGED,t.event,this._eventPackage(t.target),this),e.dispatch(n.EVENT.REFRESH,null,null,this)}},_onlegendSelected:function(t){if(this._status.needRefresh=!1,i(this,"onlegendSelected",t,this._status),this._status.needRefresh)this._messageCenter.dispatch(n.EVENT.REFRESH,null,null,this)},_ondataZoom:function(t){if(this._status.needRefresh=!1,i(this,"ondataZoom",t,this._status),this._status.needRefresh)this._messageCenter.dispatch(n.EVENT.REFRESH,null,null,this)},_ondataRange:function(t){if(this._clearEffect(),this._status.needRefresh=!1,i(this,"ondataRange",t,this._status),this._status.needRefresh)this._zr.refreshNextFrame()},_onmagicTypeChanged:function(){this._clearEffect(),this._render(this._toolbox.getMagicOption())},_ondataViewChanged:function(t){this._syncBackupData(t.option),this._messageCenter.dispatch(n.EVENT.DATA_CHANGED,null,t,this),this._messageCenter.dispatch(n.EVENT.REFRESH,null,null,this)},_tooltipHover:function(t){var e=[];i(this,"ontooltipHover",t,e)},_onrestore:function(){this.restore()},_onrefresh:function(t){this._refreshInside=!0,this.refresh(t),this._refreshInside=!1},_syncBackupData:function(t){this.component.dataZoom&&this.component.dataZoom.syncBackupData(t)},_eventPackage:function(t){if(t){var e=require("./util/ecData"),i=e.get(t,"seriesIndex"),n=e.get(t,"dataIndex");return n=-1!=i&&this.component.dataZoom?this.component.dataZoom.getRealDataIndex(i,n):n,{seriesIndex:i,seriesName:(e.get(t,"series")||{}).name,dataIndex:n,data:e.get(t,"data"),name:e.get(t,"name"),value:e.get(t,"value"),special:e.get(t,"special")}}},_noDataCheck:function(t){for(var e=t.series,i=0,r=e.length;r>i;i++)if(e[i].type==n.CHART_TYPE_MAP||e[i].data&&e[i].data.length>0||e[i].markPoint&&e[i].markPoint.data&&e[i].markPoint.data.length>0||e[i].markLine&&e[i].markLine.data&&e[i].markLine.data.length>0||e[i].nodes&&e[i].nodes.length>0||e[i].links&&e[i].links.length>0||e[i].matrix&&e[i].matrix.length>0||e[i].eventList&&e[i].eventList.length>0)return!1;var o=this._option&&this._option.noDataLoadingOption||this._themeConfig.noDataLoadingOption||n.noDataLoadingOption||{text:this._option&&this._option.noDataText||this._themeConfig.noDataText||n.noDataText,effect:this._option&&this._option.noDataEffect||this._themeConfig.noDataEffect||n.noDataEffect};return this.clear(),this.showLoading(o),!0},_render:function(t){if(this._mergeGlobalConifg(t),!this._noDataCheck(t)){var e=t.backgroundColor;if(e)if(!a&&-1!=e.indexOf("rgba")){var i=e.split(",");this.dom.style.filter="alpha(opacity="+100*i[3].substring(0,i[3].lastIndexOf(")"))+")",i.length=3,i[0]=i[0].replace("a",""),this.dom.style.backgroundColor=i.join(",")+")"}else this.dom.style.backgroundColor=e;this._zr.clearAnimation(),this._chartList=[];var r=require("./chart"),o=require("./component");if(t.xAxis||t.yAxis)t.grid=t.grid||{},t.dataZoom=t.dataZoom||{};for(var s,l,c,h=["title","legend","tooltip","dataRange","roamController","grid","dataZoom","xAxis","yAxis","polar"],d=0,u=h.length;u>d;d++)if(l=h[d],c=this.component[l],t[l]){if(c)c.refresh&&c.refresh(t);else s=o.get(/^[xy]Axis$/.test(l)?"axis":l),c=new s(this._themeConfig,this._messageCenter,this._zr,t,this,l),this.component[l]=c;this._chartList.push(c)}else if(c)c.dispose(),this.component[l]=null,delete this.component[l];for(var f,p,m,g={},d=0,u=t.series.length;u>d;d++)if(p=t.series[d].type){if(!g[p])if(g[p]=!0,f=r.get(p)){if(this.chart[p])m=this.chart[p],m.refresh(t);else m=new f(this._themeConfig,this._messageCenter,this._zr,t,this);this._chartList.push(m),this.chart[p]=m}else console.error(p+" has not been required.")}else console.error("series["+d+"] chart type has not been defined.");for(p in this.chart)if(p!=n.CHART_TYPE_ISLAND&&!g[p])this.chart[p].dispose(),this.chart[p]=null,delete this.chart[p];this.component.grid&&this.component.grid.refixAxisShape(this.component),this._island.refresh(t),this._toolbox.refresh(t),t.animation&&!t.renderAsImage?this._zr.refresh():this._zr.render();var v="IMG"+this.id,y=document.getElementById(v);if(t.renderAsImage&&a){if(y)y.src=this.getDataURL(t.renderAsImage);else y=this.getImage(t.renderAsImage),y.id=v,y.style.position="absolute",y.style.left=0,y.style.top=0,this.dom.firstChild.appendChild(y);this.un(),this._zr.un(),this._disposeChartList(),this._zr.clear()}else if(y)y.parentNode.removeChild(y);y=null,this._option=t}},restore:function(){this._clearEffect(),this._option=r.clone(this._optionRestore),this._disposeChartList(),this._island.clear(),this._toolbox.reset(this._option,!0),this._render(this._option)},refresh:function(t){this._clearEffect(),t=t||{};var e=t.option;if(!this._refreshInside&&e)e=this.getOption(),r.merge(e,t.option,!0),r.merge(this._optionRestore,t.option,!0),this._toolbox.reset(e);this._island.refresh(e),this._toolbox.refresh(e),this._zr.clearAnimation();for(var i=0,n=this._chartList.length;n>i;i++)this._chartList[i].refresh&&this._chartList[i].refresh(e);this.component.grid&&this.component.grid.refixAxisShape(this.component),this._zr.refresh()},_disposeChartList:function(){this._clearEffect(),this._zr.clearAnimation();for(var t=this._chartList.length;t--;){var e=this._chartList[t];if(e){var i=e.type;this.chart[i]&&delete this.chart[i],this.component[i]&&delete this.component[i],e.dispose&&e.dispose()}}this._chartList=[]},_mergeGlobalConifg:function(t){for(var e=["backgroundColor","calculable","calculableColor","calculableHolderColor","nameConnector","valueConnector","animation","animationThreshold","animationDuration","animationDurationUpdate","animationEasing","addDataAnimation","symbolList","DRAG_ENABLE_TIME"],i=e.length;i--;){var r=e[i];if(null==t[r])t[r]=null!=this._themeConfig[r]?this._themeConfig[r]:n[r]}var o=t.color;if(!o||!o.length)o=this._themeConfig.color||n.color;if(this._zr.getColor=function(t){var e=require("zrender/tool/color");return e.getColor(t,o)},!a)t.animation=!1,t.addDataAnimation=!1},setOption:function(t,e){if(!t.timeline)return this._setOption(t,e);else return this._setTimelineOption(t)},_setOption:function(t,e,i){if(!e&&this._option)this._option=r.merge(this.getOption(),r.clone(t),!0);else this._option=r.clone(t),!i&&this._timeline&&this._timeline.dispose();if(this._optionRestore=r.clone(this._option),!this._option.series||0===this._option.series.length)return void this._zr.clear();if(this.component.dataZoom&&(this._option.dataZoom||this._option.toolbox&&this._option.toolbox.feature&&this._option.toolbox.feature.dataZoom&&this._option.toolbox.feature.dataZoom.show))this.component.dataZoom.syncOption(this._option);return this._toolbox.reset(this._option),this._render(this._option),this},getOption:function(){function t(t){var n=i._optionRestore[t];if(n)if(n instanceof Array)for(var o=n.length;o--;)e[t][o].data=r.clone(n[o].data);else e[t].data=r.clone(n.data)}var e=r.clone(this._option),i=this;return t("xAxis"),t("yAxis"),t("series"),e},setSeries:function(t,e){if(!e)this.setOption({series:t});else this._option.series=t,this.setOption(this._option,e);return this},getSeries:function(){return this.getOption().series},_setTimelineOption:function(t){this._timeline&&this._timeline.dispose();var e=require("./component/timeline"),i=new e(this._themeConfig,this._messageCenter,this._zr,t,this);return this._timeline=i,this.component.timeline=this._timeline,this},addData:function(t,e,i,o,s){function a(){if(d._zr){d._zr.clearAnimation();for(var t=0,e=k.length;e>t;t++)k[t].motionlessOnce=c.addDataAnimation&&k[t].addDataAnimation;d._messageCenter.dispatch(n.EVENT.REFRESH,null,{option:c},d)}}for(var l=t instanceof Array?t:[[t,e,i,o,s]],c=this.getOption(),h=this._optionRestore,d=this,u=0,f=l.length;f>u;u++){t=l[u][0],e=l[u][1],i=l[u][2],o=l[u][3],s=l[u][4];var p=h.series[t],m=i?"unshift":"push",g=i?"pop":"shift";if(p){var v=p.data,y=c.series[t].data;if(v[m](e),y[m](e),!o)v[g](),e=y[g]();if(null!=s){var _,b;if(p.type===n.CHART_TYPE_PIE&&(_=h.legend)&&(b=_.data)){var x=c.legend.data;if(b[m](s),x[m](s),!o){var w=r.indexOf(b,e.name);-1!=w&&b.splice(w,1),w=r.indexOf(x,e.name),-1!=w&&x.splice(w,1)}}else if(null!=h.xAxis&&null!=h.yAxis){var T,S,C=p.xAxisIndex||0;if(null==h.xAxis[C].type||"category"===h.xAxis[C].type)if(T=h.xAxis[C].data,S=c.xAxis[C].data,T[m](s),S[m](s),!o)T[g](),S[g]();if(C=p.yAxisIndex||0,"category"===h.yAxis[C].type)if(T=h.yAxis[C].data,S=c.yAxis[C].data,T[m](s),S[m](s),!o)T[g](),S[g]()}}this._option.series[t].data=c.series[t].data}}this._zr.clearAnimation();for(var k=this._chartList,$=0,E=function(){if($--,0===$)a()},u=0,f=k.length;f>u;u++)if(c.addDataAnimation&&k[u].addDataAnimation)$++,k[u].addDataAnimation(l,E);if(this.component.dataZoom&&this.component.dataZoom.syncOption(c),this._option=c,!c.addDataAnimation)setTimeout(a,0);return this},addMarkPoint:function(t,e){return this._addMark(t,e,"markPoint")},addMarkLine:function(t,e){return this._addMark(t,e,"markLine")},_addMark:function(t,e,i){var n,o=this._option.series;if(o&&(n=o[t])){var s=this._optionRestore.series,a=s[t],l=n[i],c=a[i];l=n[i]=l||{data:[]},c=a[i]=c||{data:[]};for(var h in e)if("data"===h)l.data=l.data.concat(e.data),c.data=c.data.concat(e.data);else if("object"!=typeof e[h]||null==l[h])l[h]=c[h]=e[h];else r.merge(l[h],e[h],!0),r.merge(c[h],e[h],!0);var d=this.chart[n.type];d&&d.addMark(t,e,i)}return this},delMarkPoint:function(t,e){return this._delMark(t,e,"markPoint")},delMarkLine:function(t,e){return this._delMark(t,e,"markLine")},_delMark:function(t,e,i){var n,r,o,s=this._option.series;if(!(s&&(n=s[t])&&(r=n[i])&&(o=r.data)))return this;e=e.split(" > ");for(var a=-1,l=0,c=o.length;c>l;l++){var h=o[l];if(h instanceof Array){if(h[0].name===e[0]&&h[1].name===e[1]){a=l;break}}else if(h.name===e[0]){a=l;break}}if(a>-1){o.splice(a,1),this._optionRestore.series[t][i].data.splice(a,1);var d=this.chart[n.type];d&&d.delMark(t,e.join(" > "),i)}return this},getDom:function(){return this.dom},getZrender:function(){return this._zr},getDataURL:function(t){if(!a)return"";if(0===this._chartList.length){var e="IMG"+this.id,i=document.getElementById(e);if(i)return i.src}var n=this.component.tooltip;switch(n&&n.hideTip(),t){case"jpeg":break;default:t="png"}var r=this._option.backgroundColor;if(r&&"rgba(0,0,0,0)"===r.replace(" ",""))r="#fff";return this._zr.toDataURL("image/"+t,r)},getImage:function(t){var e=this._optionRestore.title,i=document.createElement("img");return i.src=this.getDataURL(t),i.title=e&&e.text||"ECharts",i},getConnectedDataURL:function(t){if(!this.isConnected())return this.getDataURL(t);var e=this.dom,i={self:{img:this.getDataURL(t),left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}},n=i.self.left,r=i.self.top,o=i.self.right,s=i.self.bottom;for(var a in this._connected)e=this._connected[a].getDom(),i[a]={img:this._connected[a].getDataURL(t),left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight},n=Math.min(n,i[a].left),r=Math.min(r,i[a].top),o=Math.max(o,i[a].right),s=Math.max(s,i[a].bottom);var l=document.createElement("div");l.style.position="absolute",l.style.left="-4000px",l.style.width=o-n+"px",l.style.height=s-r+"px",document.body.appendChild(l);var c=require("zrender").init(l),h=require("zrender/shape/Image");for(var a in i)c.addShape(new h({style:{x:i[a].left-n,y:i[a].top-r,image:i[a].img}}));c.render();var d=this._option.backgroundColor;if(d&&"rgba(0,0,0,0)"===d.replace(/ /g,""))d="#fff";var u=c.toDataURL("image/png",d);return setTimeout(function(){c.dispose(),l.parentNode.removeChild(l),l=null},100),u},getConnectedImage:function(t){var e=this._optionRestore.title,i=document.createElement("img");return i.src=this.getConnectedDataURL(t),i.title=e&&e.text||"ECharts",i},on:function(t,e){return this._messageCenterOutSide.bind(t,e,this),this},un:function(t,e){return this._messageCenterOutSide.unbind(t,e),this},connect:function(t){if(!t)return this;if(!this._connected)this._connected={};if(t instanceof Array)for(var e=0,i=t.length;i>e;e++)this._connected[t[e].id]=t[e];else this._connected[t.id]=t;return this},disConnect:function(t){if(!t||!this._connected)return this;if(t instanceof Array)for(var e=0,i=t.length;i>e;e++)delete this._connected[t[e].id];else delete this._connected[t.id];for(var n in this._connected)return this;return this._connected=!1,this},connectedEventHandler:function(t){if(t.__echartsId!=this.id)this._onevent(t)},isConnected:function(){return!!this._connected},showLoading:function(t){var e={bar:require("zrender/loadingEffect/Bar"),bubble:require("zrender/loadingEffect/Bubble"),dynamicLine:require("zrender/loadingEffect/DynamicLine"),ring:require("zrender/loadingEffect/Ring"),spin:require("zrender/loadingEffect/Spin"),whirling:require("zrender/loadingEffect/Whirling")};this._toolbox.hideDataView(),t=t||{};var i=t.textStyle||{};t.textStyle=i;var o=r.merge(r.merge(r.clone(i),this._themeConfig.textStyle),n.textStyle);if(i.textFont=o.fontStyle+" "+o.fontWeight+" "+o.fontSize+"px "+o.fontFamily,i.text=t.text||this._option&&this._option.loadingText||this._themeConfig.loadingText||n.loadingText,null!=t.x)i.x=t.x;if(null!=t.y)i.y=t.y;t.effectOption=t.effectOption||{},t.effectOption.textStyle=i;var s=t.effect;if("string"==typeof s||null==s)s=e[t.effect||this._option&&this._option.loadingEffect||this._themeConfig.loadingEffect||n.loadingEffect]||e.spin;return this._zr.showLoading(new s(t.effectOption)),this},hideLoading:function(){return this._zr.hideLoading(),this},setTheme:function(t){if(t){if("string"==typeof t)switch(t){case"macarons":t=require("./theme/macarons");break;case"infographic":t=require("./theme/infographic");break;default:t={}}else t=t||{};this._themeConfig=t}if(!a){var e=this._themeConfig.textStyle;e&&e.fontFamily&&e.fontFamily2&&(e.fontFamily=e.fontFamily2),e=n.textStyle,e.fontFamily=e.fontFamily2}this._timeline&&this._timeline.setTheme(!0),this._optionRestore&&this.restore()},resize:function(){var t=this;return function(){if(t._clearEffect(),t._zr.resize(),t._option&&t._option.renderAsImage&&a)return t._render(t._option),t;t._zr.clearAnimation(),t._island.resize(),t._toolbox.resize(),t._timeline&&t._timeline.resize();for(var e=0,i=t._chartList.length;i>e;e++)t._chartList[e].resize&&t._chartList[e].resize();return t.component.grid&&t.component.grid.refixAxisShape(t.component),t._zr.refresh(),t._messageCenter.dispatch(n.EVENT.RESIZE,null,null,t),t}},_clearEffect:function(){this._zr.modLayer(n.EFFECT_ZLEVEL,{motionBlur:!1}),this._zr.painter.clearLayer(n.EFFECT_ZLEVEL)},clear:function(){return this._disposeChartList(),this._zr.clear(),this._option={},this._optionRestore={},this.dom.style.backgroundColor=null,this},dispose:function(){var t=this.dom.getAttribute(h);t&&delete c[t],this._island.dispose(),this._toolbox.dispose(),this._timeline&&this._timeline.dispose(),this._messageCenter.unbind(),this.clear(),this._zr.dispose(),this._zr=null}},s}),define("echarts",["echarts/echarts"],function(t){return t}),define("echarts/util/coordinates",["require","zrender/tool/math"],function(require){function t(t,e){return[t*i.sin(e),t*i.cos(e)]}function e(t,e){return[Math.sqrt(t*t+e*e),Math.atan(e/t)]}var i=require("zrender/tool/math");return{polar2cartesian:t,cartesian2polar:e}}),define("echarts/util/smartSteps",[],function(){function t(t){return k.log(L(t))/k.LN10}function e(t){return k.pow(10,t)}function i(t){return t===E(t)}function n(t,e,n,r){if(_=r||{},b=_.steps||S,x=_.secs||C,n=$(+n||0)%99,t=+t||0,e=+e||0,w=T=0,"min"in _)t=+_.min||0,w=1;if("max"in _)e=+_.max||0,T=1;if(t>e)e=[t,t=e][0];var o=e-t;if(w&&T)return y(t,e,n);if((n||5)>o)if(i(t)&&i(e))return f(t,e,n);else if(0===o)return p(t,e,n);return c(t,e,n)}function r(t,i,n,r){r=r||0;var a=o((i-t)/n,-1),l=o(t,-1,1),c=o(i,-1),h=k.min(a.e,l.e,c.e);if(0===l.c)h=k.min(a.e,c.e);else if(0===c.c)h=k.min(a.e,l.e);s(a,{c:0,e:h}),s(l,a,1),s(c,a),r+=h,t=l.c,i=c.c;for(var d=(i-t)/n,u=e(r),f=0,p=[],m=n+1;m--;)p[m]=(t+d*m)*u;if(0>r){f=g(u),d=+(d*u).toFixed(f),t=+(t*u).toFixed(f),i=+(i*u).toFixed(f);for(var m=p.length;m--;)p[m]=p[m].toFixed(f),0===+p[m]&&(p[m]="0")}else t*=u,i*=u,d*=u;return x=0,b=0,_=0,{min:t,max:i,secs:n,step:d,fix:f,exp:r,pnts:p}}function o(n,r,o){if(r=$(r%10)||2,0>r)if(i(n))r=(""+L(n)).replace(/0+$/,"").length||1;else n=n.toFixed(15).replace(/0+$/,""),r=n.replace(".","").replace(/^[-0]+/,"").length,n=+n;var s=E(t(n))-r+1,a=+(n*e(-s)).toFixed(15)||0;if(a=o?E(a):I(a),!a&&(s=0),(""+L(a)).length>r)s+=1,a/=10;return{c:a,e:s}}function s(t,i,n){var r=i.e-t.e;if(r)t.e+=r,t.c*=e(-r),t.c=n?E(t.c):I(t.c)}function a(t,e,i){if(t.e<e.e)s(e,t,i);else s(t,e,i)}function l(t,e){e=e||S,t=o(t);for(var i=t.c,n=0;i>e[n];)n++;if(!e[n])for(i/=10,t.e+=1,n=0;i>e[n];)n++;return t.c=e[n],t}function c(t,e,n){var a,c=n||+x.slice(-1),p=l((e-t)/c,b),g=o(e-t),y=o(t,-1,1),_=o(e,-1);if(s(g,p),s(y,p,1),s(_,p),!n)c=h(y,_);else a=d(y,_,c);if(i(t)&&i(e)&&t*e>=0){if(c>e-t)return f(t,e,c);c=u(t,e,n,y,_,c)}var S=m(t,e,y.c,_.c);if(y.c=S[0],_.c=S[1],w||T)v(t,e,y,_);return r(y.c,_.c,c,_.e)}function h(t,i){for(var n,r,o,s,a=[],c=x.length;c--;)n=x[c],r=l((i.c-t.c)/n,b),r=r.c*e(r.e),o=E(t.c/r)*r,s=I(i.c/r)*r,a[c]={min:o,max:s,step:r,span:s-o};return a.sort(function(t,e){var i=t.span-e.span;if(0===i)i=t.step-e.step;return i}),a=a[0],n=a.span/a.step,t.c=a.min,i.c=a.max,3>n?2*n:n}function d(t,i,n){for(var r,o,s=i.c,a=(i.c-t.c)/n-1;s>t.c;)a=l(a+1,b),a=a.c*e(a.e),r=a*n,o=I(i.c/a)*a,s=o-r;var c=t.c-s,h=o-i.c,d=c-h;if(d>1.1*a)d=$(d/a/2)*a,s+=d,o+=d;return t.c=s,i.c=o,a}function u(t,n,r,o,s,a){var l=s.c-o.c,c=l/a*e(s.e);if(!i(c)){if(c=E(c),l=c*a,n-t>l)if(c+=1,l=c*a,!r&&c*(a-1)>=n-t)a-=1,l=c*a;if(l>=n-t){var h=l-(n-t);o.c=$(t-h/2),s.c=$(n+h/2),o.e=0,s.e=0}}return a}function f(t,e,i){if(i=i||5,w)e=t+i;else if(T)t=e-i;else{var n=i-(e-t),o=$(t-n/2),s=$(e+n/2),a=m(t,e,o,s);t=a[0],e=a[1]}return r(t,e,i)}function p(t,e,i){i=i||5;var n=k.min(L(e/i),i)/2.1;if(w)e=t+n;else if(T)t=e-n;else t-=n,e+=n;return c(t,e,i)}function m(t,e,i,n){if(t>=0&&0>i)n-=i,i=0;else if(0>=e&&n>0)i-=n,n=0;return[i,n]}function g(t){return t=(+t).toFixed(15).split("."),t.pop().replace(/0+$/,"").length}function v(t,e,i,n){if(w){var r=o(t,4,1);if(i.e-r.e>6)r={c:0,e:i.e};a(i,r),a(n,r),n.c+=r.c-i.c,i.c=r.c}else if(T){var s=o(e,4);if(n.e-s.e>6)s={c:0,e:n.e};a(i,s),a(n,s),i.c+=s.c-n.c,n.c=s.c}}function y(t,e,i){var n=i?[i]:x,a=e-t;if(0===a)return e=o(e,3),i=n[0],e.c=$(e.c+i/2),r(e.c-i,e.c,i,e.e);if(L(e/a)<1e-6)e=0;if(L(t/a)<1e-6)t=0;var l,c,h,d=[[5,10],[10,2],[50,10],[100,2]],u=[],f=[],p=o(e-t,3),m=o(t,-1,1),g=o(e,-1);s(m,p,1),s(g,p),a=g.c-m.c,p.c=a;for(var v=n.length;v--;){if(i=n[v],l=I(a/i),c=l*i-a,h=3*(c+3),h+=2*(i-n[0]+2),i%5===0)h-=10;for(var y=d.length;y--;)if(l%d[y][0]===0)h/=d[y][1];f[v]=[i,l,c,h].join(),u[v]={secs:i,step:l,delta:c,score:h}}return u.sort(function(t,e){return t.score-e.score}),u=u[0],m.c=$(m.c-u.delta/2),g.c=$(g.c+u.delta/2),r(m.c,g.c,u.secs,p.e)}var _,b,x,w,T,S=[10,20,25,50],C=[4,5,6],k=Math,$=k.round,E=k.floor,I=k.ceil,L=k.abs;return n}),define("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(require){function t(t,i,n,r,o){e.call(this,t,i,n,r,o),this.refresh(r)}var e=require("./base"),i=require("zrender/shape/Text"),n=require("zrender/shape/Line"),r=require("zrender/shape/Polygon"),o=require("zrender/shape/Circle"),s=require("zrender/shape/Ring"),a=require("../config");
a.polar={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,boundaryGap:[0,0],splitNumber:5,name:{show:!0,textStyle:{color:"#333"}},axisLine:{show:!0,lineStyle:{color:"#ccc",width:1,type:"solid"}},axisLabel:{show:!1,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},splitLine:{show:!0,lineStyle:{width:1,color:"#ccc"}},type:"polygon"};var l=require("zrender/tool/util"),c=require("../util/coordinates");return t.prototype={type:a.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var t=0;t<this.polar.length;t++)this._index=t,this.reformOption(this.polar[t]),this._queryTarget=[this.polar[t],this.option],this._createVector(t),this._buildSpiderWeb(t),this._buildText(t),this._adjustIndicatorValue(t),this._addAxisLabel(t);for(var t=0;t<this.shapeList.length;t++)this.zr.addShape(this.shapeList[t])},_createVector:function(t){for(var e,i=this.polar[t],n=this.deepQuery(this._queryTarget,"indicator"),r=n.length,o=i.startAngle,s=2*Math.PI/r,a=this._getRadius(),l=i.__ecIndicator=[],h=0;r>h;h++)e=c.polar2cartesian(a,o*Math.PI/180+s*h),l.push({vector:[e[1],-e[0]]})},_getRadius:function(){var t=this.polar[this._index];return this.parsePercent(t.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(t){var e=this.polar[t],i=e.__ecIndicator,n=e.splitArea,r=e.splitLine,o=this.getCenter(t),s=e.splitNumber,a=r.lineStyle.color,l=r.lineStyle.width,c=r.show,h=this.deepQuery(this._queryTarget,"axisLine");this._addArea(i,s,o,n,a,l,c),h.show&&this._addLine(i,o,h)},_addAxisLabel:function(t){for(var e,n,r,o,n,s,a,c,h,d,u=require("../util/accMath"),f=this.polar[t],p=this.deepQuery(this._queryTarget,"indicator"),m=f.__ecIndicator,g=this.deepQuery(this._queryTarget,"splitNumber"),v=this.getCenter(t),y=0;y<p.length;y++)if(e=this.deepQuery([p[y],f,this.option],"axisLabel"),e.show){var _=this.deepQuery([e,f,this.option],"textStyle"),b=this.deepQuery([e,f],"formatter");if(r={},r.textFont=this.getFont(_),r.color=_.color,r=l.merge(r,e),r.lineWidth=r.width,n=m[y].vector,s=m[y].value,c=y/p.length*2*Math.PI,h=e.offset||10,d=e.interval||0,!s)return;for(var x=1;g>=x;x+=d+1){if(o=l.merge({},r),a=u.accAdd(s.min,u.accMul(s.step,x)),"function"==typeof b)a=b(a);else if("string"==typeof b)a=b.replace("{a}","{a0}").replace("{a0}",a);else a=this.numAddCommas(a);o.text=a,o.x=x*n[0]/g+Math.cos(c)*h+v[0],o.y=x*n[1]/g+Math.sin(c)*h+v[1],this.shapeList.push(new i({zlevel:this.getZlevelBase(),z:this.getZBase(),style:o,draggable:!1,hoverable:!1}))}}},_buildText:function(t){for(var e,n,r,o,s,a,l,c=this.polar[t],h=c.__ecIndicator,d=this.deepQuery(this._queryTarget,"indicator"),u=this.getCenter(t),f=0,p=0,m=0;m<d.length;m++)if(o=this.deepQuery([d[m],c,this.option],"name"),o.show){if(l=this.deepQuery([o,c,this.option],"textStyle"),n={},n.textFont=this.getFont(l),n.color=l.color,"function"==typeof o.formatter)n.text=o.formatter.call(this.myChart,d[m].text,m);else if("string"==typeof o.formatter)n.text=o.formatter.replace("{value}",d[m].text);else n.text=d[m].text;if(h[m].text=n.text,e=h[m].vector,Math.round(e[0])>0)r="left";else if(Math.round(e[0])<0)r="right";else r="center";if(null==o.margin)e=this._mapVector(e,u,1.1);else a=o.margin,f=e[0]>0?a:-a,p=e[1]>0?a:-a,f=0===e[0]?0:f,p=0===e[1]?0:p,e=this._mapVector(e,u,1);if(n.textAlign=r,n.x=e[0]+f,n.y=e[1]+p,o.rotate)s=[o.rotate/180*Math.PI,e[0],e[1]];else s=[0,0,0];this.shapeList.push(new i({zlevel:this.getZlevelBase(),z:this.getZBase(),style:n,draggable:!1,hoverable:!1,rotation:s}))}else;},getIndicatorText:function(t,e){return this.polar[t]&&this.polar[t].__ecIndicator[e]&&this.polar[t].__ecIndicator[e].text},getDropBox:function(t){var e,i,t=t||0,n=this.polar[t],r=this.getCenter(t),o=n.__ecIndicator,s=o.length,a=[],l=n.type;if("polygon"==l){for(var c=0;s>c;c++)e=o[c].vector,a.push(this._mapVector(e,r,1.2));i=this._getShape(a,"fill","rgba(0,0,0,0)","",1)}else if("circle"==l)i=this._getCircle("",1,1.2,r,"fill","rgba(0,0,0,0)");return i},_addArea:function(t,e,i,n,r,o,s){for(var a,l,c,h,d=this.deepQuery(this._queryTarget,"type"),u=0;e>u;u++){if(l=(e-u)/e,s){if("polygon"==d)h=this._getPointList(t,l,i),a=this._getShape(h,"stroke","",r,o);else if("circle"==d)a=this._getCircle(r,o,l,i,"stroke");this.shapeList.push(a)}if(n.show)c=(e-u-1)/e,this._addSplitArea(t,n,l,c,i,u)}},_getCircle:function(t,e,i,n,r,s){var a=this._getRadius();return new o({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:n[0],y:n[1],r:a*i,brushType:r,strokeColor:t,lineWidth:e,color:s},hoverable:!1,draggable:!1})},_getRing:function(t,e,i,n){var r=this._getRadius();return new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:n[0],y:n[1],r:e*r,r0:i*r,color:t,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(t,e,i){for(var n,r=[],o=t.length,s=0;o>s;s++)n=t[s].vector,r.push(this._mapVector(n,i,e));return r},_getShape:function(t,e,i,n,o){return new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:e,color:i,strokeColor:n,lineWidth:o},hoverable:!1,draggable:!1})},_addSplitArea:function(t,e,i,n,r,o){var s,a,l,c,h,d=t.length,u=e.areaStyle.color,f=[],d=t.length,p=this.deepQuery(this._queryTarget,"type");if("string"==typeof u)u=[u];if(a=u.length,s=u[o%a],"polygon"==p)for(var m=0;d>m;m++)f=[],l=t[m].vector,c=t[(m+1)%d].vector,f.push(this._mapVector(l,r,i)),f.push(this._mapVector(l,r,n)),f.push(this._mapVector(c,r,n)),f.push(this._mapVector(c,r,i)),h=this._getShape(f,"fill",s,"",1),this.shapeList.push(h);else if("circle"==p)h=this._getRing(s,i,n,r),this.shapeList.push(h)},_mapVector:function(t,e,i){return[t[0]*i+e[0],t[1]*i+e[1]]},getCenter:function(t){var t=t||0;return this.parseCenter(this.zr,this.polar[t].center)},_addLine:function(t,e,i){for(var n,r,o=t.length,s=i.lineStyle,a=s.color,l=s.width,c=s.type,h=0;o>h;h++)r=t[h].vector,n=this._getLine(e[0],e[1],r[0]+e[0],r[1]+e[1],a,l,c),this.shapeList.push(n)},_getLine:function(t,e,i,r,o,s,a){return new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:t,yStart:e,xEnd:i,yEnd:r,strokeColor:o,lineWidth:s,lineType:a},hoverable:!1})},_adjustIndicatorValue:function(t){for(var e,i,n,r=this.polar[t],o=this.deepQuery(this._queryTarget,"indicator"),s=o.length,a=r.__ecIndicator,l=this._getSeriesData(t),c=r.boundaryGap,h=r.splitNumber,d=r.scale,u=require("../util/smartSteps"),f=0;s>f;f++){if("number"==typeof o[f].max)e=o[f].max,i=o[f].min||0,n={max:e,min:i};else{var p=this._findValue(l,f,h,c);i=p.min,e=p.max}if(!d&&i>=0&&e>=0)i=0;if(!d&&0>=i&&0>=e)e=0;var m=u(i,e,h,n);a[f].value={min:m.min,max:m.max,step:m.step}}},_getSeriesData:function(t){for(var e,i,n,r=[],o=this.component.legend,s=0;s<this.series.length;s++)if(e=this.series[s],e.type==a.CHART_TYPE_RADAR){i=e.data||[];for(var l=0;l<i.length;l++)if(n=this.deepQuery([i[l],e,this.option],"polarIndex")||0,n==t&&(!o||o.isSelected(i[l].name)))r.push(i[l])}else;return r},_findValue:function(t,e,i,n){function r(t){(t>o||void 0===o)&&(o=t),(s>t||void 0===s)&&(s=t)}var o,s,a;if(t&&0!==t.length){if(1==t.length)s=0;if(1!=t.length)for(var l=0;l<t.length;l++)r(this.getDataFromOption(t[l].value[e]));else{a=t[0];for(var l=0;l<a.value.length;l++)r(this.getDataFromOption(a.value[l]))}var c=Math.abs(o-s);if(s-=Math.abs(c*n[0]),o+=Math.abs(c*n[1]),s===o)if(0===o)o=1;else if(o>0)s=o/i;else o/=i;return{max:o,min:s}}},getVector:function(t,e,i){t=t||0,e=e||0;var n=this.polar[t].__ecIndicator;if(!(e>=n.length)){var r,o=this.polar[t].__ecIndicator[e],s=this.getCenter(t),a=o.vector,l=o.value.max,c=o.value.min;if("undefined"==typeof i)return s;switch(i){case"min":i=c;break;case"max":i=l;break;case"center":i=(l+c)/2}if(l!=c)r=(i-c)/(l-c);else r=.5;return this._mapVector(a,s,r)}},isInside:function(t){var e=this.getNearestIndex(t);if(e)return e.polarIndex;else return-1},getNearestIndex:function(t){for(var e,i,n,r,o,s,a,l,h,d=0;d<this.polar.length;d++){if(e=this.polar[d],i=this.getCenter(d),t[0]==i[0]&&t[1]==i[1])return{polarIndex:d,valueIndex:0};if(n=this._getRadius(),o=e.startAngle,s=e.indicator,a=s.length,l=2*Math.PI/a,r=c.cartesian2polar(t[0]-i[0],i[1]-t[1]),t[0]-i[0]<0)r[1]+=Math.PI;if(r[1]<0)r[1]+=2*Math.PI;if(h=r[1]-o/180*Math.PI+2*Math.PI,Math.abs(Math.cos(h%(l/2)))*n>r[0])return{polarIndex:d,valueIndex:Math.floor((h+l/2)/l)%a}}},getIndicator:function(t){var t=t||0;return this.polar[t].indicator},refresh:function(t){if(t)this.option=t,this.polar=this.option.polar,this.series=this.option.series;this.clear(),this._buildShape()}},l.inherits(t,e),require("../component").define("polar",t),t}),define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(require){function t(t,i,n,r,o){e.call(this,t,i,n,r,o),this.refresh(r)}var e=require("./base"),i=require("zrender/shape/Polygon");require("../component/polar");var n=require("../config");n.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var r=require("../util/ecData"),o=require("zrender/tool/util"),s=require("zrender/tool/color");return t.prototype={type:n.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var t,e=this.series,i=this.component.legend,r=0,o=e.length;o>r;r++)if(e[r].type===n.CHART_TYPE_RADAR)if(this.serie=this.reformOption(e[r]),this.legendHoverLink=e[r].legendHoverLink||this.legendHoverLink,t=this.serie.name||"",this.selectedMap[t]=i?i.isSelected(t):!0,this.selectedMap[t]){if(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable"))this._addDropBox(r);this._buildSingleRadar(r),this.buildMark(r)}this.addShapeList()},_buildSingleRadar:function(t){for(var e,i,n,r,o=this.component.legend,s=this.serie.data,a=this.deepQuery(this._queryTarget,"calculable"),l=0;l<s.length;l++)if(n=s[l].name||"",this.selectedMap[n]=o?o.isSelected(n):!0,this.selectedMap[n]){if(o){if(i=o.getColor(n),e=o.getItemShape(n))e.style.brushType=this.deepQuery([s[l],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",o.setItemShape(n,e)}else i=this.zr.getColor(l);r=this._getPointList(this.serie.polarIndex,s[l]),this._addSymbol(r,i,l,t,this.serie.polarIndex),this._addDataShape(r,i,s[l],t,l,a),this._radarDataCounter++}else;},_getPointList:function(t,e){for(var i,n,r=[],o=this.component.polar,s=0,a=e.value.length;a>s;s++)if(n=this.getDataFromOption(e.value[s]),i="-"!=n?o.getVector(t,s,n):!1)r.push(i);return r},_addSymbol:function(t,e,i,n,o){for(var s,a=this.series,l=this.component.polar,c=0,h=t.length;h>c;c++)s=this.getSymbolShape(this.deepMerge([a[n].data[i],a[n]]),n,a[n].data[i].value[c],c,l.getIndicatorText(o,c),t[c][0],t[c][1],this._symbol[this._radarDataCounter%this._symbol.length],e,"#fff","vertical"),s.zlevel=this.getZlevelBase(),s.z=this.getZBase()+1,r.set(s,"data",a[n].data[i]),r.set(s,"value",a[n].data[i].value),r.set(s,"dataIndex",i),r.set(s,"special",c),this.shapeList.push(s)},_addDataShape:function(t,e,n,o,a,l){var c=this.series,h=[n,this.serie],d=this.getItemStyleColor(this.deepQuery(h,"itemStyle.normal.color"),o,a,n),u=this.deepQuery(h,"itemStyle.normal.lineStyle.width"),f=this.deepQuery(h,"itemStyle.normal.lineStyle.type"),p=this.deepQuery(h,"itemStyle.normal.areaStyle.color"),m=this.deepQuery(h,"itemStyle.normal.areaStyle"),g={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:m?"both":"stroke",color:p||d||("string"==typeof e?s.alpha(e,.5):e),strokeColor:d||e,lineWidth:u,lineType:f},highlightStyle:{brushType:this.deepQuery(h,"itemStyle.emphasis.areaStyle")||m?"both":"stroke",color:this.deepQuery(h,"itemStyle.emphasis.areaStyle.color")||p||d||("string"==typeof e?s.alpha(e,.5):e),strokeColor:this.getItemStyleColor(this.deepQuery(h,"itemStyle.emphasis.color"),o,a,n)||d||e,lineWidth:this.deepQuery(h,"itemStyle.emphasis.lineStyle.width")||u,lineType:this.deepQuery(h,"itemStyle.emphasis.lineStyle.type")||f}};if(r.pack(g,c[o],o,n,a,n.name,this.component.polar.getIndicator(c[o].polarIndex)),l)g.draggable=!0,this.setCalculable(g);g=new i(g),this.shapeList.push(g)},_addDropBox:function(t){var e=this.series,i=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[i]){var n=this.component.polar.getDropBox(i);n.zlevel=this.getZlevelBase(),n.z=this.getZBase(),this.setCalculable(n),r.pack(n,e,t,void 0,-1),this.shapeList.push(n),this._dropBoxList[i]=!0}},ondragend:function(t,e){var i=this.series;if(this.isDragend&&t.target){var n=t.target,o=r.get(n,"seriesIndex"),s=r.get(n,"dataIndex");this.component.legend&&this.component.legend.del(i[o].data[s].name),i[o].data.splice(s,1),e.dragOut=!0,e.needRefresh=!0,this.isDragend=!1}},ondrop:function(t,e){var i=this.series;if(this.isDrop&&t.target){var n,o,s=t.target,a=t.dragged,l=r.get(s,"seriesIndex"),c=r.get(s,"dataIndex"),h=this.component.legend;if(-1===c)n={value:r.get(a,"value"),name:r.get(a,"name")},i[l].data.push(n),h&&h.add(n.name,a.style.color||a.style.strokeColor);else{var d=require("../util/accMath");n=i[l].data[c],h&&h.del(n.name),n.name+=this.option.nameConnector+r.get(a,"name"),o=r.get(a,"value");for(var u=0;u<o.length;u++)n.value[u]=d.accAdd(n.value[u],o[u]);h&&h.add(n.name,a.style.color||a.style.strokeColor)}e.dragIn=e.dragIn||!0,this.isDrop=!1}},refresh:function(t){if(t)this.option=t,this.series=t.series;this.backupShapeList(),this._buildShape()}},o.inherits(t,e),require("../chart").define("radar",t),t}),define("product/product",["require","../comm","../common/etpl","../common/passport","../widget/confirmDialog","../../tpl/product/priceDl.tpl","../../tpl/product/marketDl.tpl","../../tpl/product/timeDl.tpl","../../tpl/product/addrSelectBar.tpl","../../tpl/product/selectAddress.tpl","../../tpl/product/productAddition.tpl","../../tpl/cateSide.tpl","../../tpl/recommendSide.tpl","../widget/addressSelector","../common/province","../common/localStorage","../../tpl/product/mDoctorDl.tpl","../../tpl/product/productComment.tpl","../../tpl/product/briefComment.tpl","../common/cookie","../widget/lazyload","widget/categorySide","echarts","echarts/chart/radar"],function(require){var util=require("../comm"),etpl=require("../common/etpl"),passport=require("../common/passport"),confirmDialog=require("../widget/confirmDialog"),priceDl=require("../../tpl/product/priceDl.tpl"),marketDl=require("../../tpl/product/marketDl.tpl"),timeDl=require("../../tpl/product/timeDl.tpl"),addrSelectBar=require("../../tpl/product/addrSelectBar.tpl"),addrSelectOption=require("../../tpl/product/selectAddress.tpl"),cateSide=(require("../../tpl/product/productAddition.tpl"),require("../../tpl/cateSide.tpl")),recoSide=require("../../tpl/recommendSide.tpl"),addressSelector=require("../widget/addressSelector"),provinceData=require("../common/province"),storage=require("../common/localStorage"),mDoctorDl=require("../../tpl/product/mDoctorDl.tpl"),commentTpl=require("../../tpl/product/productComment.tpl"),briefCommentTpl=require("../../tpl/product/briefComment.tpl"),$cookie=require("../common/cookie"),mDoctorLoaded=!1,chartLoaded=!1,getUrl={productStockAndPrice:"/product/stockAndPrice",productRecommend:"/product/recommend",productMarketSku:"/product/market",productCoupon:"/product/bindCoupon",productCalcDeliveryFee:"/product/calcDeliveryFee",addFavorSkuIds:"/product/addFavorSkus",addFavorShopId:"/product/addFavorShop",productAreaList:"/address/getAreaList",cancelFavorItems:"/product/cancelFavorItems",checkItemsAdded:"/product/checkItemsAdded",productSKuChange:"/product/productSKuChange",mDoctor:"/product/mDoctor",productComment:"/product/productComment",commentVote:"/product/commentVoteApi",queryRestriction:"/order/queryRestriction"},imgNFUrl="/img/widget/img_loading_98_98.png";etpl.config({commandOpen:"{{",commandClose:"}}",strip:!0});var skuToProperMap={},skuToWeight={},dataStockPrice={},favorSKUList=[];if($("#skuStock").attr("data-value"))var canInput=!0;else var canInput=!1;addressSelector.prototype.calDelivery=function(t,e,i,n,r,o,s){util.fetch(getUrl.productCalcDeliveryFee,{areaId:t,shopId:e,num:i,skuId:n,weight:o,price:r}).then(function(t){if(!t.error){var e="0"!=t.rtnCode?"":t.data.deliveryFee?"运费￥"+t.data.deliveryFee+"元":"包邮";if(void 0!==s.marketPostFree&&s.marketPostFree===!0)e="包邮";if($(".postAge-info span").html(e),"0"!=t.rtnCode)$("#skuStock").html("无货，此商品暂时售完").addClass("hard_kc"),$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable"),canInput=!1;else{$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable"),canInput=!0;var i=$("#skuStock").attr("data-value");if("0"!==i)if(5>=i)$("#skuStock").html("仅剩"+i+"件").attr("data-value",i).addClass("hard_kc");else $("#skuStock").html("").attr("data-value",i).removeClass("hard_kc");else $(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable")}}})};var Product={init:function(){this.generateMap(),this.renderPara(),this.bind(),this.lazyload(),this.autoScroll(),this.getCommentData()},autoScroll:function(){$(document).ready(function(){if(""!==document.referrer&&document.referrer!==location.href)$("html, body").animate({scrollTop:195},100)})},lazyload:function(){require("../widget/lazyload"),$("img.lazy").lazyload(),$("img.lazy").error(function(){$(this).unbind("error").attr("src",imgNFUrl)})},generateMap:function(){$.each(transSkuList,function(t,e){if(skuToProperMap[e.skuId]=[],void 0!==e.infos)$.each(e.infos,function(t,i){var n={};n.pid=i.pid,n.vid=i.vid?i.vid:i.vname,skuToProperMap[e.skuId].push(n)});skuToWeight[e.skuId]=e.weight})},skuToProper:function(t){var e=[];for(var i in skuToProperMap)if(t==i){e=[];for(var n=0;n<=skuToProperMap[i].length-1;n++)e.push(skuToProperMap[i][n].pid),e.push(skuToProperMap[i][n].vid);break}return e},properToSkuId:function(t,e,i,n){var r={};for(var o in skuToProperMap){for(var s="",a=0;a<=skuToProperMap[o].length-1;a++)s+=skuToProperMap[o][a].pid,s+=":",s+=skuToProperMap[o][a].vid,s+=",";r[s]=parseInt(o)}if(t&&e&&i&&n){var l=""+t+":"+e+","+i+":"+n+",";c=""+i+":"+n+","+t+":"+e+","}else var l=""+t+":"+e+",",c="";var h;for(var o in r)if(l==o||c==o){h=Number(r[o]);break}return $("#idStorage").attr("data-skuid",h),h},disableNoSkuSaleParams:function(t,e,i,n){var r={};for(var o in skuToProperMap){for(var s="",a=0;a<=skuToProperMap[o].length-1;a++)s+=skuToProperMap[o][a].pid,s+=":",s+=skuToProperMap[o][a].vid,s+=",";r[s]=parseInt(o)}if(t&&e&&i&&n)$(".para1 .des_item").each(function(){var i=""+t+":"+e+","+$(this).attr("data-pid")+":"+$(this).attr("data-vid")+",",n=""+$(this).attr("data-pid")+":"+$(this).attr("data-vid")+","+t+":"+e+",";if(!(i in r||n in r))$(this).removeClass("des_item_acitve").addClass("des_item_nosku");else if($(this).hasClass("des_item_nosku"))$(this).removeClass("des_item_nosku")}),$(".para0 .des_item").each(function(){var t=""+$(this).attr("data-pid")+":"+$(this).attr("data-vid")+","+i+":"+n+",",e=""+i+":"+n+","+$(this).attr("data-pid")+":"+$(this).attr("data-vid")+",";if(!(t in r||e in r))$(this).removeClass("des_item_acitve").addClass("des_item_nosku");else if($(this).hasClass("des_item_nosku"))$(this).removeClass("des_item_nosku")})},generateSkuIds:function(){var t=[];for(var e in skuToProperMap)t.push(Number(e));return t},renderPara:function(){var t,e=this,i=$("#idStorage").attr("data-shopid");this.itemId=$("#idStorage").attr("data-itemid");switch($(".para").length){case 0:t=$("#idStorage").attr("data-skuid");break;case 1:if($("#idStorage").attr("data-skuid")){t=$("#idStorage").attr("data-skuid");for(var n=this.skuToProper(t),r=$(".des_item"),o=0;o<=r.length-1;o++){var s=$(r[o]).attr("data-pid")==n[0]&&$(r[o]).attr("data-vid")==n[1];if(s)$(r[o]).addClass("des_item_acitve")}}else{var a=$(".para0 .des_item_acitve").attr("data-pid"),l=$(".para0 .des_item_acitve").attr("data-vid");t=this.properToSkuId(a,l),$("#idStorage").attr("data-skuid",t)}break;case 2:if($("#idStorage").attr("data-skuid")){t=$("#idStorage").attr("data-skuid");for(var n=this.skuToProper(t),r=$(".des_item"),o=0;o<=r.length-1;o++){var s=$(r[o]).attr("data-pid")==n[0]&&$(r[o]).attr("data-vid")==n[1]||$(r[o]).attr("data-pid")==n[2]&&$(r[o]).attr("data-vid")==n[3];if(s)$(r[o]).addClass("des_item_acitve")}var a=$(".para0 .des_item_acitve").attr("data-pid"),l=$(".para0 .des_item_acitve").attr("data-vid"),c=$(".para1 .des_item_acitve").attr("data-pid"),h=$(".para1 .des_item_acitve").attr("data-vid");e.disableNoSkuSaleParams(a,l,c,h)}else{var a=$(".para0 .des_item_acitve").attr("data-pid"),l=$(".para0 .des_item_acitve").attr("data-vid"),c=$(".para1 .des_item_acitve").attr("data-pid"),h=$(".para1 .des_item_acitve").attr("data-vid");t=this.properToSkuId(a,l,c,h),e.disableNoSkuSaleParams(a,l,c,h),$("#idStorage").attr("data-skuid",t)}}$("#idStorage").attr("data-selectNum",1);var d=$("#idStorage").attr("data-price"),u=$("#idStorage").attr("data-selectnum"),i=($(".addr_tri_1").attr("data-areaid"),$("#idStorage").attr("data-shopid")),f=skuToWeight[t];e.getMarketData(i,t,function(n){e.getLocalAreaInfoAndRenderFree(i,u,t,f,d,n)}),passport.on("login",function(){util.fetch(getUrl.productMarketSku,{shopId:i,skuId:t}).then(function(t){if(!t.error)e.renderMarket(t.data)})});var p=this.generateSkuIds();e.isFavor(1,function(e){for(var i=0;i<=e.length-1;i++)if(t==e[i].favorItemId)if(e[i].added){$(".mark_btn").addClass("active").removeClass("unactive"),$(".mark_des").html("已收藏");break}},p),e.isFavor(2,function(t){if(t[0].added)$(".shop-position .mark-shop a").addClass("shop-favor").html("已收藏");else $(".shop-position .mark-shop a").removeClass("shop-favor").html("收藏")}),$(".mark-shop").on("click",function(t){if(t.preventDefault(),$(".mark-shop a").hasClass("shop-favor"))e.cancelFavorItems(2,function(){$(".shop-position .mark-shop a").removeClass("shop-favor").html("收藏")});else e.addFavorShop(function(){$(".shop-position .mark-shop a").addClass("shop-favor").html("已收藏")})}),$(document).on("click",".J_talk",function(){window.trackEventTJ(11,[{shopId:i},{skuId:t}])})},getLocalAreaInfoAndRenderFree:function(t,e,i,n,r,o){var s=this,a=storage.getStore({key:"product_province"})||"",l=storage.getStore({key:"product_city"})||"",c=storage.getStore({key:"product_area"})||"",h=storage.getStore({key:"product_province_id"})||"",d=storage.getStore({key:"product_city_id"})||"",u=storage.getStore({key:"product_area_id"})||"";if(h&&d&&u){if($(".addr_tri_1").attr("data-areaid",u).attr("data-cityid",d).attr("data-provinceid",h).attr("data-province",a).attr("data-city",l).attr("data-area",c),a&&l&&c)$(".addr_tri_1").html(a+l+c);s.renderFree(u,t,e,i,n,r,o,function(){if(canInput)$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable"),s.changeStockByInput($("#des_num_text").val());else $(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable")})}else if(canInput)$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable"),s.changeStockByInput($("#des_num_text").val());else $(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable")},renderFree:function(t,e,i,n,r,o,s,a){var l=this;util.fetch(getUrl.productCalcDeliveryFee,{areaId:t,shopId:e,num:i,skuId:n,weight:r,price:o}).then(function(t){if(!t.error){var e="0"!=t.rtnCode?"":t.data.deliveryFee?"运费￥"+t.data.deliveryFee+"元":"包邮";if(void 0!==s&&s.postNotNull){var i=s.postFreeOnFull;if(void 0!==i)if(1===i.type){if(parseFloat(i.fullAmount)<=parseFloat(o))l.marketPostFree=!0,e="包邮"}else if(i.postFree)l.marketPostFree=!0,e="包邮"}if(void 0!==s&&s.flashPriceNotNull)l.marketPostFree=!0,e="包邮";if($(".postAge-info span").html(e),"0"!=t.rtnCode)$("#skuStock").html("无货，此商品暂时售完").addClass("hard_kc"),canInput=!1;else{canInput=!0;var n=$("#skuStock").attr("data-value");if("0"!==n)if(5>=n)$("#skuStock").html("仅剩"+n+"件").attr("data-value",n).addClass("hard_kc");else $("#skuStock").html("").attr("data-value",n).removeClass("hard_kc")}}a&&a()}).fail(function(){a&&a()})},renderMarket:function(t,e){var i=this;$(".sales").remove(),$(".des_down .time").remove(),i.saleRestrictNum=null,i.saleRestrictType=null;var n=$("#idStorage").attr("data-price");if(void 0!==t&&t.postNotNull){var r=t.postFreeOnFull;if(void 0!==r)if(1===r.type){if(parseFloat(r.fullAmount)<=parseFloat(n))i.marketPostFree=!0}else if(r.postFree)i.marketPostFree=!0}if(void 0!==t&&t.flashPriceNotNull)i.marketPostFree=!0;if(t.flashPriceNotNull||t.flashSaleNotNull){if(t.flashPriceNotNull)i.saleRestrictNum=t.flashPrice.skuQuota,this.saleRestrictType=t.flashPrice.quotaType;if(t.flashSaleNotNull)i.saleRestrictNum=t.flashSale.skuQuota,this.saleRestrictType=t.flashSale.quotaType;var o=etpl.compile(priceDl),s=t.flashPriceNotNull?t.flashPrice.skuPrice.toFixed(2):t.flashSale.skuPrice.toFixed(2),a=s.indexOf("."),l=$(".price_cut_money").html(),c={};c.priceInt=s.slice(0,a),c.priceDes=s.slice(a),c.cutPart=(parseFloat(s)/parseFloat(l)*10).toFixed(1),c.priceMoney=l,c.priceYuan="￥",c.isCut=parseFloat(c.cutPart)&&parseFloat(c.cutPart)<10?!0:!1,c.isFlash=t.flashPriceNotNull?1:0,c.isTime=t.flashSaleNotNull?1:0,$(".price").remove(),$(".dl_position").prepend(o(c)),$("#idStorage").attr("data-price",s);var h=(new Date).getTime();if(t.flashPrice&&parseInt(t.flashPrice.endTime)>h||t.flashSale&&parseInt(t.flashSale.endTime)>h){$("#idStorage").attr("data-skutype",1),$(".time").remove();var d=etpl.compile(timeDl),u={};if(void 0!==t.flashPrice){u.timeDt="闪购";var f=t.flashPrice.endTime}if(void 0!==t.flashSale){u.timeDt="限时";var f=t.flashSale.endTime}$(".des_down").prepend(d(u)),i.showTime(f,function(){$(".time").remove()})}else $("#idStorage").attr("data-skuType",0),$(".time").remove()}if(!t.onlyFlash){var p=etpl.compile(marketDl);$(".dl_position").append(p(t)),$(".cut-dd .open-up").on("click",function(t){t.preventDefault();var e=$(".cut-has-more").offset().top+30,i=$(".cut-has-more").offset().left,n=$(".cut-has-more").width()+30;if($(".cut-ul").toggleClass("open"),$(".cut-has-more").toggleClass("open"),$(".cut-ul").hasClass("open"))$(".cut-ul").css({"z-index":"900",position:"absolute",top:e+"px",left:i+"px",width:n+"px"}),$(".cut-has-more .sales_dot").show().css({"margin-left":"4px"});else $(".cut-has-more .sales_dot").hide()}),$(".des_position img").error(function(){$(this).unbind("error").attr("src",imgNFUrl)}),$(".coupons .open-up").bind("click",function(){i.addCoupons($(this),$(this).parent().attr("id"))}),$(".des_position img").error(function(){$(this).unbind("error").attr("src",imgNFUrl)})}e&&e(t)},renderStockAndPrice:function(t,e,i){if(t){for(var n=!1,r=0;r<=t.length-1;r++)if(t[r].region.skuId==e){var o=t[r].sellPrice.toFixed(2),s=o.indexOf("."),a=t[r].price.toFixed(2),l={};l.priceInt=o.slice(0,s),l.priceDes=o.slice(s),l.cutPart=(parseFloat(o)/parseFloat(a)*10).toFixed(1),l.priceMoney=a,l.priceYuan="￥",l.isCut=parseFloat(l.cutPart)&&parseFloat(l.cutPart)<10?!0:!1;var c=etpl.compile(priceDl);if($(".price").remove(),$(".dl_position").prepend(c(l)),$("#idStorage").attr("data-price",o),!t[r].stock)$("#skuStock").html("库存不足").attr("data-value",t[r].stock).addClass("hard_kc"),canInput=!1;else if(t[r].stock<=5)$("#skuStock").html("仅剩"+t[r].stock+"件").attr("data-value",t[r].stock).addClass("hard_kc"),canInput=!0;else $("#skuStock").html("").attr("data-value",t[r].stock).removeClass("hard_kc"),canInput=!0;n=!0;break}if(!n)$("#skuStock").html("获取库存失败，请刷新页面").attr("data-value",t[r].stock).addClass("hard_kc"),$(".shopping_btn, .buy_btn").addClass("disable")}else $("#skuStock").html("获取库存失败，请刷新页面").attr("data-value",t[r].stock).addClass("hard_kc"),$(".shopping_btn, .buy_btn").addClass("disable");i&&i()},renderReco:function(t){util.fetch(getUrl.productRecommend).then(function(t){var e=etpl.compile(cateSide),i=etpl.compile(recoSide);$(".des_info .leftArea").append(e(t)).append(i(t));var n=require("widget/categorySide");new n($("#accordion"))})},getMarketData:function(t,e,i){var n=this;util.fetch(getUrl.productMarketSku,{shopId:t,skuId:e}).then(function(t){if(t.error)$(".sales").remove(),$(".des_down .time").remove(),i&&i();else n.renderMarket(t.data,i)})},getStockAndPrice:function(t,e,i){var n=this;util.fetch(getUrl.productStockAndPrice,{skuIds:t}).then(function(t){if(!t.error)dataStockPrice=t.prices;n.renderStockAndPrice(dataStockPrice,e,i)})},getOnSKuChange:function(t,e,i,n,r,o){var s=this;util.fetch(getUrl.productSKuChange,$.stringifyJSON({skuIds:t,shopId:i,skuId:e,areaId:n,num:r,weight:o}),{type:"POST"}).then(function(t){if(!t.stockAndPrice.error)dataStockPrice=t.stockAndPrice.prices;if(s.renderStockAndPrice(dataStockPrice,e),t.market)if(s.renderMarket(t.market.data),t.market.error)$(".sales").remove(),$(".des_down .time").remove();if(!t.free.error){var i="0"!=t.free.rtnCode?"":t.free.data.deliveryFee?"运费￥"+t.free.data.deliveryFee+"元":"包邮",n=t.market.data;if(void 0!==n&&n.postNotNull){var r=n.postFreeOnFull;if(void 0!==r)if(1===r.type){var o=$("#idStorage").attr("data-price");if(parseFloat(r.fullAmount)<=parseFloat(o))i="包邮",s.marketPostFree=!0}else if(r.postFree)i="包邮",s.marketPostFree=!0}if(void 0!==n&&n.flashPriceNotNull)i="包邮",s.marketPostFree=!0;if($(".postAge-info span").html(i),"0"!=t.free.rtnCode)$("#skuStock").html("无货，此商品暂时售完").addClass("hard_kc"),canInput=!1,$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable");else{canInput=!0;var a=$("#skuStock").attr("data-value");if("0"!==a)if(5>=a)$("#skuStock").html("仅剩"+a+"件").attr("data-value",a).addClass("hard_kc");else $("#skuStock").html("").attr("data-value",a).removeClass("hard_kc");$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable"),s.changeStockByInput($("#des_num_text").val())}}else if(canInput)$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable"),s.changeStockByInput($("#des_num_text").val());else $(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable")})},addCart:function(t){var e=$("#idStorage").attr("data-shopid"),i=$("#idStorage").attr("data-skuid"),n=$("#idStorage").attr("data-selectnum");if(t.hasClass("loading"))return!1;else return t.addClass("loading"),trackRTEvent({ecom_cart:{prod:[{p_id:i,p_price:$("#idStorage").data("price")}]}}),window.trackEventTJ(17,[{skuId:i},{itemId:$("#idStorage").data("itemid")}]),void util.post("/cart/add",{shopId:e,skuId:i,skuNum:n,tongjiChannel:$cookie.get("channel"),tongjiActivity:util.getUrlParam("tg")}).then(function(t){switch(t.code){case 200:var e=$(".shopping-trolley .total-num");e.text(parseInt(e.text())+parseInt(n)),confirmDialog({success:1,title:"商品已成功加入购物袋啦！",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"去购物袋结算",cls:"J_close go-cart",href:"/cart/list"}]}).showModal(),trackEventTJ(3,[{skuId:i},{skuNum:n}]);break;case 10002:var r,o,s=[],a="";if(r=t.cartManagerResult,o=r.status,8==o)a="购物袋单个商品数量不能超过"+r.num;else if(3==o)a="该商品购买数量不能超过"+r.num;else if(5==o||6==o)a="您添加的商品不存在";else if(7==o)a="您购物袋中的商品已达上限！去购",s=["物袋结算商品或者清理下购物袋吧~"];confirmDialog({title:"添加失败",content:a,moreContent:s,buttons:[{val:"查看购物袋",cls:"J_close  ok-btn",href:"/cart/list",target:"_blank"}]}).showModal();break;case 10001:confirmDialog({title:"添加失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal();break;default:confirmDialog({title:"添加失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}},function(){confirmDialog({title:"添加失败",buttons:[{
val:"确定",cls:"J_close ok-btn"}]}).showModal()}).always(function(){t.removeClass("loading")})},cartBind:function(){var t=this;$(document).on("click",".buy_btn",function(e){if(e.preventDefault(),$(this).hasClass("disable"))return!1;else return void t.addCart($(this))}),$(document).on("click",".shopping_btn",function(e){function i(t){t.removeClass("loading")}function n(){window.location.href=util.locationJump("/order/orderSure?list="+r+"_"+o+"_"+a+"_"+l+"_"+s)}e.preventDefault();var r=$("#idStorage").attr("data-shopid"),o=$("#idStorage").attr("data-skuid"),s=$("#idStorage").attr("data-selectnum"),a=$("#idStorage").attr("data-skutype")?$("#idStorage").attr("data-skutype"):0,l=$("#idStorage").attr("data-price"),c=$(this);if(c.hasClass("disable"))return!1;if(c.hasClass("loading"))return!1;else return void passport.tryLogin().then(function(){c.addClass("loading");var e=$.Deferred();return function(){if(1===t.saleRestrictType)util.post(getUrl.queryRestriction,{shopId:r,saleChannel:"mall",deviceType:0,skuId:o}).then(function(n){if(200===n.code){var r=n.successResult,o=~~r.restrictionNum-~~r.buyCount;if(~~s>o){if(o)var a="该商品您最多还可购买"+o+"件";else var a="超值商品数量有限，您已达到限额，请再看看别的吧";t.showErrorMsg(a),i(c),e.reject()}}e.resolve()});else e.resolve()}(),e.then(function(){util.post("/cart/add",{shopId:r,skuId:o,skuNum:s,tongjiChannel:$cookie.get("channel"),tongjiActivity:util.getUrlParam("tg")}).always(function(){i(c),n()})}),e})})},showErrorMsg:function(t){$("#skuStock").html(t).addClass("hard_kc")},addCoupons:function(t,e){var i=t.prev().attr("data-code"),e=t.parent().attr("id");passport.tryLogin().then(function(){if($(".sales #"+e).hasClass("cBind"))return confirmDialog({success:1,title:"您已领取过该券，不能重复领取",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看优惠券",cls:"J_close go-cart",href:"/home/coupon/list",target:"_blank"}]}).showModal(),void $(".cBind .open-up").html("领取成功");else util.fetch(getUrl.productCoupon,{couponCode:i}).then(function(t){if(t.error)return void confirmDialog({title:"领取失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal();else switch(t.data.bizCode){case 1:confirmDialog({success:1,title:"成功领取优惠券啦！",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看优惠券",cls:"J_close go-cart",href:"/home/coupon/list",target:"_blank"}]}).showModal(),$(".sales #"+e).addClass("cBind"),$(".cBind .open-up").html("领取成功");break;case 10001:break;default:confirmDialog({title:"动作太慢了，优惠券已经抢光了",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}}).fail(function(){confirmDialog({title:"领取失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()})})},addFavorSkus:function(t){var e=this,i=Number($("#idStorage").attr("data-skuid")),n=[],r=[];r.push({skuId:i}),n.push(i),trackRTEvent({ecom_favor:{prod:[{p_id:i,p_price:$("#idStorage").data("price")}]}}),passport.tryLogin().then(function(){util.fetch(getUrl.addFavorSkuIds,{favorSkuIds:n}).then(function(e){if(e.error)confirmDialog({title:"收藏失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal();else if(200==e.baseResponse.code)switch(e.result.code){case 200:trackEventTJ(1,r),t();break;case 501:confirmDialog({title:"收藏夹已满",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:"/home/favor/items",target:"_blank"}]}).showModal();break;case 502:confirmDialog({title:"容量不足",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:"/home/favor/items",target:"_blank"}]}).showModal();break;case 503:confirmDialog({title:"收藏失败",buttons:[{val:"确定",cls:"J_close  go-shop"}]}).showModal();break;default:confirmDialog({title:"收藏失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}else confirmDialog({title:"收藏失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}).then(function(){var t=e.generateSkuIds();util.fetch(getUrl.checkItemsAdded,$.stringifyJSON({favorType:1,favorItemIds:t}),{type:"POST"}).then(function(t){favorSKUList=t.result.resultItemList})}).fail(function(){confirmDialog({title:"收藏失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()})})},addFavorShop:function(t){var e=[];e.push(Number($("#idStorage").attr("data-shopid"))),passport.tryLogin().then(function(){util.fetch(getUrl.addFavorShopId,{favorShopId:e}).then(function(e){if(e.error)confirmDialog({title:"收藏失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal();else if(200==e.baseResponse.code)switch(e.result.code){case 200:confirmDialog({success:1,title:"成功收藏店铺啦！",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:"/home/favor/shops",target:"_blank"}]}).showModal(),t();break;case 501:confirmDialog({title:"收藏夹已满",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:"/home/favor/shops",target:"_blank"}]}).showModal();break;case 502:confirmDialog({title:"容量不足",buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:"/home/favor/shops",target:"_blank"}]}).showModal();break;case 503:confirmDialog({title:"收藏失败",buttons:[{val:"确定",cls:"J_close  go-shop"}]}).showModal();break;default:confirmDialog({title:"收藏失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}else confirmDialog({title:"收藏失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()})}),window.trackEventTJ(12,[{shopId:e}])},cancelFavorItems:function(t,e){var i=this,n=Number($("#idStorage").attr("data-skuid")),r=Number($("#idStorage").attr("data-shopid")),o=[],s=[];if(1==t)s.push(n),o.push({skuId:n});else s.push(r);var a=1==t?"取消收藏商品喽！":"取消收藏店铺喽！",l=1==t?"/home/favor/items":"/home/favor/shops";passport.tryLogin().then(function(){util.fetch(getUrl.cancelFavorItems,{favorType:t,favorItemIdList:s}).then(function(i){if(i.error)confirmDialog({title:"取消失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal();else if(i.result.success){if(1!==t)confirmDialog({success:1,title:a,buttons:[{val:"继续购物",cls:"J_close  go-shop"},{val:"查看收藏夹",cls:"J_close go-cart",href:l,target:"_blank"}]}).showModal();trackEventTJ(2,o),e()}else confirmDialog({title:"取消失败",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()}).then(function(){var e=i.generateSkuIds();if(1==t)util.fetch(getUrl.checkItemsAdded,$.stringifyJSON({favorType:t,favorItemIds:e}),{type:"POST"}).then(function(t){favorSKUList=t.result.resultItemList});else;}).fail(function(){confirmDialog({title:"取消失败,请刷新页面",buttons:[{val:"确定",cls:"J_close ok-btn"}]}).showModal()})})},isFavor:function(t,e,i){var n=[];if(1==t)n=i;else n.push(Number($("#idStorage").attr("data-shopid")));passport.on("login",function(){util.fetch(getUrl.checkItemsAdded,$.stringifyJSON({favorType:t,favorItemIds:n}),{type:"POST"}).then(function(i){if(1==t)favorSKUList=i.result.resultItemList;e(i.result.resultItemList)})})},addressSelect:function(t,e){var i,n,r,o,s,a=this,e=e||{};if(i=new addressSelector($(t).find(".province"),{optionData:{provinceArea:provinceData,selectName:e.provinceName,template:addrSelectOption},afterSelect:function(t,e){n.update(e),n.renderSelect().removeClass("unchangable"),r.renderSelect().addClass("unchangable"),o=e}},1),n=new addressSelector($(t).find(".city"),{optionData:{selectName:e.cityName,template:addrSelectOption},afterSelect:function(t,e){r.update(e),r.renderSelect().removeClass("unchangable"),s=e}},2),r=new addressSelector($(t).find(".area"),{optionData:{selectName:e.areaName,template:addrSelectOption},afterSelect:function(t,e){var i=$("#idStorage").attr("data-shopid"),n=$("#idStorage").attr("data-selectnum"),l=$("#idStorage").attr("data-price"),c=$("#idStorage").attr("data-skuid"),h=0;r.calDelivery(e,i,n,c,l,h,a);var d=$("li.province").attr("data-name"),u=$("li.city").attr("data-name"),f=$("li.area").attr("data-name");if($(".addr_tri_1").attr("data-areaid",e).attr("data-province",d).attr("data-city",u).attr("data-area",f),$(".addr_tri_1").html(d+u+f).removeClass("open"),storage.setStore({key:"product_area_id",value:e}),storage.setStore({key:"product_area",value:f}),o&&s)storage.setStore({key:"product_province_id",value:o}),storage.setStore({key:"product_city_id",value:s}),storage.setStore({key:"product_province",value:d}),storage.setStore({key:"product_city",value:u});$(".addr_tri").removeClass("addr_tri_alert"),$(".area.select-list").addClass("hover"),$("#addressBox").hide(),$(".addr_tri_open").hide(),window.trackEventTJ(13,[{skuId:c},{provinceId:o},{cityId:s},{areaId:e}])},beforeSelect:function(t){t.select.parents(".address-area").next().hide()}},3),e.provinceName&&e.cityName&&e.areaName)$(".area.select-list").addClass("hover"),n.update(e.provinceId,e.cityName,!0),r.update(e.cityId,e.areaName,!0),$(".select-list.province").attr("data-name",e.provinceName).attr("data-id",e.provinceId),$(".select-list.city").attr("data-name",e.cityName).attr("data-id",e.cityId),$(".select-list.area").attr("data-name",e.areaName).attr("data-id",e.areaId);else $(".province.select-list").addClass("hover").siblings().addClass("unchangable")},addressBind:function(t){var e=this,i=etpl.compile(addrSelectBar);$(document).on("click",".addr_tri",function(){if($(".address-dialog").length||$(".address-dialog").hasClass("addr_box_open"))$(".address-dialog").show(),$(".addr_tri_open").show().css({width:$(".addr_tri").width()+5+"px"});else{var t=$(".addr_tri").position().top,n=$(".addr_tri").position().left,r=$(".addr_tri").width(),o=$(".addr_tri").height(),s='<div class="addr_tri_open"></div>';$(".des_down").append(i).append(s),$(".addr_tri_open").css({"z-index":"100",width:r+5+"px",height:o+"px",top:t+"px",left:n+"px"}),$("#addressBox").css({"z-index":"99",top:t+31+"px",left:n+"px"});var a={provinceName:$(".addr_tri_1").attr("data-province"),cityName:$(".addr_tri_1").attr("data-city"),areaName:$(".addr_tri_1").attr("data-area"),provinceId:$(".addr_tri_1").attr("data-provinceid"),cityId:$(".addr_tri_1").attr("data-cityid"),areaId:$(".addr_tri_1").attr("data-areaid")};e.addressSelect(".address-dialog",a)}}),$(document).on("click",function(t){var e=$("#addressBox"),i=$(".addr_tri"),n=$(".addr_tri_open");if(!n.is(t.target)&&!i.is(t.target)&&0===i.has(t.target).length&&!e.is(t.target)&&0===e.has(t.target).length)e.hide(),n.hide()})},changeStockByInput:function(t,e){if(/^[1-9]\d*$/.test(t)){if(t=parseInt(t),"plus"==e)t+=1,$(".des_number .reduction").removeClass("disable");if("reduction"==e){if(1>=t)t=1;else t--;$(".des_number .plus").removeClass("disable")}if(1==t)$(".des_number .reduction").addClass("disable"),$(".des_number .plus").removeClass("disable");if(0==$("#skuStock").attr("data-value"))$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable"),$(".shopping_btn, .buy_btn").addClass("disable"),$("#skuStock").html("库存不足");else{if(parseFloat(t)==parseFloat($("#skuStock").attr("data-value"))){if($(".des_number .plus").addClass("disable"),$(".des_number .reduction").removeClass("disable"),$(".shopping_btn, .buy_btn").removeClass("disable"),$("#skuStock").attr("data-value")<=5)$("#skuStock").html("仅剩"+$("#skuStock").attr("data-value")+"件")}else if(parseFloat(t)>parseFloat($("#skuStock").attr("data-value")))$("#skuStock").html("库存不足"),$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").removeClass("disable");else{if($("#skuStock").attr("data-value")<=5)$("#skuStock").html("仅剩"+$("#skuStock").attr("data-value")+"件");else $("#skuStock").html("");$(".shopping_btn, .buy_btn").removeClass("disable"),$(".des_number .plus").removeClass("disable"),$(".des_number .reduction").removeClass("disable")}if(void 0!==this.saleRestrictNum&&null!==this.saleRestrictNum)if(parseFloat($("#skuStock").attr("data-value"))>=parseFloat(t)&&parseFloat(t)>=parseFloat(this.saleRestrictNum))$("#skuStock").html("该商品限购"+this.saleRestrictNum+"件"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").removeClass("disable")}if(0>=t)t=1,$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .reduction").addClass("disable"),$(".des_number .plus").addClass("disable");if(t>50)t=50,$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable");if(50===t)$(".des_number .plus").addClass("disable");if("plus"===e)if(t>=50)$(".des_number .plus").addClass("disable");if("reduction"===e)if(t>=50)$(".shopping_btn, .buy_btn").removeClass("disable");if(parseFloat(t)>=parseFloat(this.saleRestrictNum))t=this.saleRestrictNum}else t=1,$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .reduction").addClass("disable"),$(".des_number .plus").addClass("disable");return $("#idStorage").attr("data-selectnum",t),$("#des_num_text").val(t),t},thumbSwiper:function(t){$(".gallery-top .product-swiper-slide").removeClass("swiper-slide-active"),$(".gallery-top .product-swiper-slide."+t).addClass("swiper-slide-active"),$('.big-img[data-id="'+t+'"]').addClass("big-img-show").siblings().removeClass("big-img-show")},zoomPic:function(t,e,i,n,r){var o=t.pageX-e.offset().left-i.width()/2,s=t.pageY-e.offset().top-i.height()/2;if(0>o)o=0;else if(o>e.width()-i.width())o=e.width()-i.width();if(0>s)s=0;else if(s>e.height()-i.height())s=e.height()-i.height();i.css({left:o+"px",top:s+"px"});var a=o/(e.width()-i.width()),l=s/(e.height()-i.height());r.css({left:-a*(r.width()-n.width())+"px",top:-l*(r.height()-n.height())+"px"})},showTime:function(t,e){var i=setInterval(function(){var n=(new Date).getTime(),r=parseInt(t)-n;if(1e3>r){if($("#timeDay").html("00"),$("#timeHour").html("00"),$("#timeMin").html("00"),$("#timeSec").html("00"),clearInterval(i),e)e()}else{var o=Math.floor(r/864e5);r-=864e5*o;var s=Math.floor(r/36e5);r-=36e5*s;var a=Math.floor(r/6e4);r-=6e4*a;var l=Math.floor(r/1e3);if(10>o)o="0"+o;if(10>s)s="0"+s;if(10>a)a="0"+a;if(10>l)l="0"+l;$("#timeDay").html(o+"天"),$("#timeHour").html(s+"小时"),$("#timeMin").html(a+"分"),$("#timeSec").html(l+"秒")}},1e3)},bind:function(){var that=this;that.cartBind(),that.addressBind();var selectId0,selectValue0,selectId1,selectValue1,getSkuId,getFullSkuIds;$("#idStorage").attr("data-shopid");$(".des_item").click(function(){if(!$(this).hasClass("des_item_nosku")){if($(".des_item").removeClass("des_item_disable"),$(this).addClass("des_item_acitve").siblings().removeClass("des_item_acitve"),selectId0=$(".para0 .des_item_acitve").attr("data-pid"),selectValue0=$(".para0 .des_item_acitve").attr("data-vid"),$(".para1").length>=1)selectId1=$(".para1 .des_item_acitve").attr("data-pid"),selectValue1=$(".para1 .des_item_acitve").attr("data-vid"),getSkuId=that.properToSkuId(selectId0,selectValue0,selectId1,selectValue1),that.disableNoSkuSaleParams(selectId0,selectValue0,selectId1,selectValue1);else getSkuId=that.properToSkuId(selectId0,selectValue0);var t=15;if("尺码"===$(this).parents(".para").find(".small-para-select span").text())t=14;if(window.trackEventTJ(t,[{skuId:getSkuId},{pid:$(this).data("pid")},{vid:$(this).data("vid")}]),"undefined"==typeof getSkuId)$("#skuStock").html("无货，此商品暂时售完"),$(".shopping_btn, .buy_btn").addClass("disable"),$(".des_number .plus").addClass("disable"),$(".des_number .reduction").addClass("disable"),$(this).addClass("des_item_disable").removeClass("des_item_acitve"),$("#idStorage").attr("data-skuid","none"),canInput=!1;else{if("颜色"==$(this).parents().prev("dt").find("span").html()){var e=($(this).attr("data-srcsi"),$(this).attr("data-srcmi")),i=$(this).attr("data-srcli");$(".small-box .swiper-slide-active img").attr("src",e),$(".big-box-contain .big-img-show").attr("src",i)}getFullSkuIds=that.generateSkuIds();var n=$(".addr_tri_1").attr("data-areaid"),r=$("#idStorage").attr("data-shopid"),o=skuToWeight[getSkuId]||0,s=$("#idStorage").attr("data-selectnum");that.getOnSKuChange(getFullSkuIds,getSkuId,r,n,s,o);for(var a=!1,l=0;l<=favorSKUList.length-1;l++)if(getSkuId==favorSKUList[l].favorItemId)if(favorSKUList[l].added){a=!0;break}if(a)$(".mark_btn").addClass("active").removeClass("unactive"),$(".mark_des").html("已收藏");else $(".mark_btn").removeClass("active").addClass("unactive"),$(".mark_des").html("收藏")}}});var thumbIndex=($(".gallery-top"),$(".product-swiper-wrapper"),0);imgItemWidth=$(".product-swiper-wrapper .product-swiper-slide").width(),imgItemNum=$(".gallery-top .product-swiper-slide").length/2-1,$(".arrow-next").unbind("click").click(function(t){if(t.preventDefault(),thumbIndex==imgItemNum)thumbIndex=0;else thumbIndex+=1;that.thumbSwiper(thumbIndex)}),$(".arrow-prev").unbind("click").click(function(t){if(t.preventDefault(),0==thumbIndex)thumbIndex=imgItemNum;else thumbIndex-=1;that.thumbSwiper(thumbIndex)}),$(".gallery-thumbs .product-swiper-slide:not(.swiper-none)").mouseenter(function(t){t.preventDefault(),$(this).addClass("swiper-slide-active").siblings().removeClass("swiper-slide-active");var e=$(".small-box .swiper-slide-active img").attr("data-srcmi"),i=$(".big-box-contain .big-img-show").attr("data-srcli");$(".gallery-top .swiper-slide-active img").attr("src",e),$(".big-box-contain .big-img-show").attr("src",i);var n=this.getAttribute("index");that.thumbSwiper(n),thumbIndex=parseInt(n),$('.big-img[data-id="'+thumbIndex+'"]').addClass("big-img-show").siblings().removeClass("big-img-show"),window.trackEventTJ(18,[{skuId:$("#idStorage").attr("data-skuid")},{index:n}])});$(".small-box");$(".small-box").on({mouseover:function(t){if("float-icon"!=t.target.id)$("#float-box").css("display","block"),$("#float-icon").css("display","none"),$(".big-box-contain").css("display","block"),$("#big-box").css({"z-index":"800",display:"block"})},mouseout:function(){$("#float-box").css("display","none"),$("#float-icon").css("display","block"),$(".big-box-contain").css("display","none"),$("#big-box").css({"z-index":"0",display:"none"})}}),$(".small-box").mousemove(function(t){var e=$(".small-box"),i=$("#float-box"),n=$("#big-box"),r=$("#big-box img");that.zoomPic(t,e,i,n,r)});var obtn=$("#float-box,#float-icon"),cbtn=$(".mask-close"),mask=$("#mask"),show=$("#big-show");obtn.on("click",function(){var t=$(document).height(),e=$(document).width();mask.css({display:"block",height:t,width:e}),show.css({display:"block"}),$(document).on("click",function(t){var e=$("#big-show");if(!obtn.is($(t.target))&&!e.is($(t.target))&&0===e.has(t.target).length||cbtn.is($(t.target)))mask.css({display:"none"}),show.css({display:"none"})})}),$(".reduction").on("mousedown",function(){if(!$(this).hasClass("disable")){var t=parseInt($("#des_num_text").val());t=that.changeStockByInput(t,"reduction"),$("#des_num_text").val(t),window.trackEventTJ(16,[{skuId:$("#idStorage").attr("data-skuid")},{skuNum:t},{itemId:$("#idStorage").data("itemid")}])}}),$(".plus").on("mousedown",function(){if(!$(this).hasClass("disable")){var t=parseInt($("#des_num_text").val());t=that.changeStockByInput(t,"plus"),$("#des_num_text").val(t),window.trackEventTJ(16,[{skuId:$("#idStorage").attr("data-skuid")},{skuNum:t},{itemId:$("#idStorage").data("itemid")}])}}),$("#des_num_text").bind("input propertychange",function(){if(canInput)that.changeStockByInput($("#des_num_text").val())}).blur(function(){var t=$("#des_num_text").val();if(!/^[1-9]\d*$/.test(t)){if($("#des_num_text").val(1),canInput)that.changeStockByInput(1)}else{var e=parseInt(t);if(e>50)if($("#des_num_text").val(50),canInput)that.changeStockByInput(50);var i=that.saleRestrictNum;if(void 0!==i&&parseInt(i)<e)if($("#des_num_text").val(i),canInput)that.changeStockByInput(i)}}),$(window).bind("resize",function(){$("#mask").css({height:$(document).height(),width:$(document).width()}),$(".addr_tri_open").css({top:$(".addr_tri").position().top+"px",left:$(".addr_tri").position().left+"px"}),$("#addressBox").css({top:$(".addr_tri").position().top+31+"px",left:$(".addr_tri").position().left+"px"})}),$(".share_btn").mouseenter(function(){$("#bdshare-contain, #bdshare-box").addClass("bdshare-box-open"),window.trackEventTJ(19,[{skuId:$("#idStorage").attr("data-skuid")}])}),$("#bdshare-contain").mouseleave(function(){$("#bdshare-contain, #bdshare-box").removeClass("bdshare-box-open")});var bdPicSrc=$(".leftArea .gallery-top .swiper-slide-active img").attr("src");with(window._bd_share_config={common:{bdSnsKey:{},bdText:"",bdMini:"1",bdMiniList:!1,bdPic:bdPicSrc,bdStyle:"1",bdSize:"24"},share:{}},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)];$(".mark_btn").on("click",function(t){if(t.preventDefault(),$(".mark_btn").hasClass("active"))that.cancelFavorItems(1,function(){$(".mark_btn").removeClass("active").addClass("unactive"),$(".mark_des").html("收藏")});else that.addFavorSkus(function(){$(".mark_btn").addClass("active").removeClass("unactive"),$(".mark_des").html("已收藏")})}),$(".centerArea").on("click",".product_detail_tit h3",function(){var t=$(this);t.addClass("active").siblings().removeClass("active"),$(".tab-content-wrapper").hide(),$("."+t.data("target")).show()}).on("click",".m-doctor-tab",this.getMdoctorData).on("click",".know-item .title",function(){$(this).parent().toggleClass("active")}).on("click",".product-comment-tab",this.showChart)},getMdoctorData:function(){function t(t){$(".m-doctor-wrapper").html(etpl.compile(mDoctorDl)(t))}if(!mDoctorLoaded)util.fetch(getUrl.mDoctor,{itemId:Product.itemId}).then(function(e){if(e&&e.dataList)$.each(e.dataList,function(t,e){e.content=util.replaceEnter(e.content)});t(e),$(".centerArea .know-item .title").first().trigger("click"),mDoctorLoaded=!0}).fail(function(){t(),mDoctorLoaded=!0})},getCommentData:function(){var t=this;util.ajaxPost(getUrl.productComment,{queryItemRequest:{data:{itemid:~~Product.itemId}}}).then(function(e){if(e&&e.data){var i=0,n=0,r=0,o=e.data.voteinfo;$.each(o,function(t,e){$.each(e.optiondetail,function(e,o){if(i+=o.optionid*o.count,n+=o.count,0===t)r+=o.count})});var s=i/(n||1)||5;e.data.commentInfo={score:parseFloat(s.toFixed(1)),commentNum:r,star:(.5*Math.ceil(10*s/5)).toString().replace(".","-")},t.commentData=e.data,$(".product-comment").html(etpl.compile(briefCommentTpl)(e.data.commentInfo))}}).fail(function(){})},showChart:function(){function t(){chartLoaded=!0;var t=[],i=[];if($.each(e.voteinfo,function(e,n){var r={text:n.votename,max:5};if("描述相符"===n.votename)t.unshift(r);else t.push(r);i.push(n.avg||5)}),$(".product-comment-wrapper").html(etpl.compile(commentTpl)(e.commentInfo)),t.length)$(".chart-title").show();Product.drawChart(t,i)}var e=Product.commentData;if(e&&!chartLoaded)if(!e.voteinfo||!e.voteinfo.length)util.ajaxPost(getUrl.commentVote,{queryCategoryRequest:{data:{leafcategoryid:~~$(".nav_position .nav").data("back-cat-id")}}}).then(function(i){e.voteinfo=i.data||[],t()});else t()},drawChart:function(t,e){var i=require("echarts");require("echarts/chart/radar");var n=i.init($(".chart-content")[0],"macarons"),r={tooltip:{trigger:"axis"},calculable:!0,polar:[{indicator:t,radius:130}],series:[{name:"aaaaa",type:"radar",polarIndex:0,itemStyle:{normal:{areaStyle:{type:"default",color:"rgba(113, 117, 187, .6)"},lineStyle:{color:"rgba(0, 0, 0, .6)",width:2}}},data:[{value:e,name:"评分"}]}]};n.setOption(r)}};Product.init()});